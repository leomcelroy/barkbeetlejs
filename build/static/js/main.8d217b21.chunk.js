(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(31),l=a.n(i),o=a(14),c=a(13),u=a(3),s=a(68),d=a(181),m=a(45),p=a(182),g=(a(80),{mdf:{2:{diameter:2,type:"down-cut"},3:{diameter:2,type:"down-cut"},4:{diameter:3,type:"down-cut"},6:{diameter:3,type:"up-cut"},7:{diameter:3,type:"up-cut"},8:{diameter:3,type:"up-cut"},10:{diameter:3,type:"up-cut"},12:{diameter:4,type:"up-cut"},15:{diameter:4,type:"up-cut"},16:{diameter:6,type:"up-cut"},18:{diameter:6,type:"up-cut"},20:{diameter:8,type:"up-cut"},25:{diameter:8,type:"up-cut"},30:{diameter:10,type:"up-cut"},40:{diameter:12,type:"up-cut"}},plywood:{2:{diameter:2,type:"up-cut"},3:{diameter:2,type:"up-cut"},4:{diameter:3,type:"compression"},6:{diameter:3,type:"compression"},8:{diameter:3,type:"compression"},10:{diameter:3,type:"compression"},12:{diameter:4,type:"compression"},15:{diameter:4,type:"compression"},16:{diameter:6,type:"compression"},18:{diameter:6,type:"compression"},20:{diameter:8,type:"compression"},25:{diameter:8,type:"compression"},30:{diameter:10,type:"compression"},40:{diameter:12,type:"compression"}},plastic:{2:{diameter:2,type:"down-cut"},3:{diameter:2,type:"up-cut"},4:{diameter:3,type:"up-cut"},6:{diameter:4,type:"up-cut"},8:{diameter:4,type:"up-cut"},10:{diameter:4,type:"up-cut"},12:{diameter:6,type:"up-cut"},15:{diameter:6,type:"up-cut"},16:{diameter:8,type:"up-cut"},18:{diameter:8,type:"up-cut"},20:{diameter:10,type:"up-cut"},25:{diameter:12,type:"up-cut"},30:{diameter:14,type:"up-cut"},40:{diameter:16,type:"up-cut"}},aluminum:{2:{diameter:2,type:"up-cut"},3:{diameter:2,type:"up-cut"},4:{diameter:3,type:"up-cut"},6:{diameter:4,type:"up-cut"},8:{diameter:6,type:"up-cut"},10:{diameter:6,type:"up-cut"},12:{diameter:8,type:"up-cut"},15:{diameter:10,type:"up-cut"},16:{diameter:12,type:"up-cut"},18:{diameter:16,type:"up-cut"},20:{diameter:16,type:"up-cut"},25:{diameter:20,type:"up-cut"},30:{diameter:20,type:"up-cut"},40:{diameter:25,type:"up-cut"}},steel:{2:{diameter:3,type:"up-cut"},3:{diameter:4,type:"up-cut"},4:{diameter:4,type:"up-cut"},6:{diameter:6,type:"up-cut"},8:{diameter:8,type:"up-cut"},10:{diameter:10,type:"up-cut"},12:{diameter:12,type:"up-cut"},15:{diameter:16,type:"up-cut"},16:{diameter:16,type:"up-cut"},18:{diameter:20,type:"up-cut"},20:{diameter:20,type:"up-cut"},25:{diameter:25,type:"up-cut"},30:{diameter:30,type:"up-cut"},40:{diameter:40,type:"up-cut"}}}),f={mdf:{chiploads:.25,passdepths:17,rampAngle:90},wood:{chiploads:.2,passdepths:16,rampAngle:90},hardwood:{chiploads:.133,passdepths:12,rampAngle:45},foam_or_wax:{chiploads:.3,passdepths:19,rampAngle:90},plastic_roughing:{chiploads:.15,passdepths:8,rampAngle:18},plastic_finishing:{chiploads:.073,passdepths:8,rampAngle:18},aluminum_roughing:{chiploads:.12,passdepths:1.8,rampAngle:12},aluminum_finishing:{chiploads:.06,passdepths:1.8,rampAngle:12},steel_roughing:{chiploads:.08,passdepths:.6,rampAngle:5},steel_finishing:{chiploads:.04,passdepths:.6,rampAngle:5}},h=a(60),b=a.n(h),v=function(e,t,a){var n=[];n.push(e);for(var r=0;r<a-1;r++)n.push(n[r]+t);return n},j=function(e,t){var a=document.createElement("a");if(a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),a.dispatchEvent(n)}else a.click()},y=function(e){return JSON.parse(JSON.stringify(e))},E=function(){return Math.random().toString(36).substr(2,9)},S=function(e){var t=/[0-9.]+$/,a=e.match(t);return null!==a&&1===a.length&&e.match(t)[0].length===e.length},D=function(e){return document.getElementsByName(e)[0].value},V=function(e,t){var a=Math.ceil(e/t),n=e/a;return v(n,n,a).map(function(e){return-e})},R={name:"anon",dogbone:!1,tabThickness:0,tabs:!1,compensatedRadius:1.5,cutDepth:1,passDepth:.6,jogHeight:10,stepoverPercentage:60,feedRate:3600,jogRate:6e3,units:"mm",plungeRate:2100,tolerance:0,toolDiameter:3,rampAngle:90},T=a(30),P=a.n(T),O=function(e,t){return{type:"line",origin:e,end:t}},N=function(e){var t,a=[];return e.forEach(function(e,n){0!==n?(a.push(O(t,e)),t=e):t=e}),a},w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={selected:!1,highlighted:!1,toolpath:!1};Object.keys(n).forEach(function(e){Object.keys(a).includes(e)||(a[e]=n[e])});var i="M "+[e.origin,e.end].map(function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return"".concat(a," ").concat(n)}),l="black";a.selected&&(l="blue"),a.highlighted&&(l="yellow"),a.toolpath&&(l="red");var o={fill:"none",strokeWidth:"2px",stroke:l,strokeLinejoin:"round",strokeLinecap:"round",opacity:"1",vectorEffect:"non-scaling-stroke"};return r.a.createElement("path",{d:i,style:o,key:t})},C=2,k=4,H=[P.a.JoinType.jtSquare,P.a.JoinType.jtRound,P.a.JoinType.jtMiter],x=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e[0].origin),r=e[e.length-1].end,i=r.every(function(e,t){return e===n[t]}),l=e.map(function(e){return{X:Math.round(1e3*e.origin[0]),Y:Math.round(1e3*e.origin[1])}});i?l.push(l[0]):(r={X:Math.round(1e3*r[0]),Y:Math.round(1e3*r[1])},l.push(r));var o=[l],c=new P.a.ClipperOffset,u=new P.a.Paths;c.Clear(),c.AddPaths(o,H[a],i?k:C),c.MiterLimit=2,c.ArcTolerance=.25,c.Execute(u,1e3*t);var s=[];return u.forEach(function(e){if(0!==e.length){var t=[];e.forEach(function(e){t.push([e.X/1e3,e.Y/1e3])}),i&&t.push(t[0]),s.push(N(t))}}),s},I=function(e,t){var a=function(e,t){var a=function(e){return"outside"!==e&&("inside"===e||("none"===e?"none":void 0))}(t.offset);return"none"===a?[e]:x(e,(a=!0===a?-1:1)*t.compensatedRadius)}(e,t);return{drawing:a,geometry:a}},G=function(e){return function(e){return Object.keys(e).length}(e)>=1},A=function(e,t){var a=function(e,t){var a=[],n=0,r=x(e,-t.compensatedRadius);if(!0!==G(r))return a;for(;G(r);)a.push(r),r=a[++n-1].map(function(e){return x(e,-t.compensatedRadius*t.stepoverPercentage/100)}).flat();return a.flat()}(e,t);return{drawing:a,geometry:a}},_=function(e,t){var a=function(e){var t,a=e.map(function(e,a){return a===t-1?[{x:e.origin[0],y:e.origin[1]},{x:e.end[0],y:e.end[1]}]:{x:e.origin[0],y:e.origin[1]}}).flat(),n=a.map(function(e){return e.x}),r=(Math.max.apply(Math,Object(o.a)(n))+Math.min.apply(Math,Object(o.a)(n)))/2,i=a.map(function(e){return e.y});return[r,(Math.max.apply(Math,Object(o.a)(i))+Math.min.apply(Math,Object(o.a)(i)))/2]}(e);return{drawing:[[O([a[0]-t.compensatedRadius,a[1]],[a[0]+t.compensatedRadius,a[1]])],[O([a[0],a[1]-t.compensatedRadius],[a[0],a[1]+t.compensatedRadius])]],geometry:a}},M=[O([0,0],[40,40]),O([40,40],[20,40]),O([20,40],[0,0])],B=I(M,R),F=A(M,R),Y=_(M,R),J=R,z=b()({contours:{3:M},toolpaths:[{type:"profile",name:"Profile 1",parameters:J,sourceGeometryID:"3",geometry:B,id:E(),cutSelected:!1,visible:!0},{type:"pocket",name:"Pocket 1",parameters:J,sourceGeometryID:"3",geometry:F,id:E(),cutSelected:!1,visible:!0},{type:"drill",name:"Drill 1",parameters:J,sourceGeometryID:"3",geometry:Y,id:E(),cutSelected:!1,visible:!0}],selected:[],hovered:[],material:"wood",thickness:34,units:"mm",zero:"bottomleft",initialized:!1,defaultParameters:J}),X=function(){var e=Object(n.useState)({feedrate:0,plungerate:0,passDepth:0,rampAngle:0,rpmDisabled:!0,flutesDisabled:!0,bitDiameterDisabled:!0,submit2Disabled:!0,submit1Text:"Submit to Enable Calculator"}),t=Object(c.a)(e,2),a=t[0],i=t[1],l=function(){var e=parseFloat(document.getElementById("materialThickness").value),t=document.getElementById("material").value,n=parseFloat(document.getElementById("bitDiameter").value),r=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.6;return function(e,t,a,n,r){var i=e.materialToCut,l=e.millingBitDiameter,o=e.numberOfFlutes,c=a[i].chiploads*t*o*l/n,u=1-.15*o;return{feedrate:c,plungerate:c*r,passDepth:a[i].passdepths/n*l*u,rampAngle:a[i].rampAngle}}({materialToCut:e,millingBitDiameter:t,numberOfFlutes:a},n,f,6,r)}(t,n,parseFloat(document.getElementById("flutes").value),parseFloat(document.getElementById("rpm").value));i(Object(u.a)({},a,{feedrate:r.feedrate,plungerate:r.plungerate,passDepth:r.passDepth,rampAngle:r.rampAngle,submit2Disabled:!1,rpmDisabled:!1,flutesDisabled:!1,bitDiameterDisabled:!1,submit1Text:"Suggest Bit"}));var l=z.state;z.update(Object(u.a)({},l,{defaultParameters:Object(u.a)({},l.defaultParameters,{feedRate:r.feedrate,passDepth:r.passDepth,plungeRate:r.plungerate,rampAngle:r.rampAngle,cutDepth:e,toolDiameter:n}),initialized:!0}))};return r.a.createElement("div",null,r.a.createElement("b",null,"Automill Calculator"),r.a.createElement("form",{id:"inputs"},"Material:",r.a.createElement("select",{id:"material"},r.a.createElement("option",{value:"wood"},"wood"),r.a.createElement("option",{value:"mdf"},"mdf"),r.a.createElement("option",{value:"foam_or_wax"},"foam_or_wax"),r.a.createElement("option",{value:"hardwood"},"hardwood"),r.a.createElement("option",{value:"plastic_roughing"},"plastic_roughing"),r.a.createElement("option",{value:"plastic_finishing"},"plastic_finishing"),r.a.createElement("option",{value:"aluminum_roughing"},"aluminum_roughing"),r.a.createElement("option",{value:"aluminum_finishing"},"aluminum_finishing"),r.a.createElement("option",{value:"steel_roughing"},"steel_roughing"),r.a.createElement("option",{value:"steel_finishing"},"steel_finishing")),r.a.createElement("br",null),"Thickness: ",r.a.createElement("input",{type:"number",id:"materialThickness"})," ",r.a.createElement("br",null),"Unit: mm"),r.a.createElement("button",{type:"submit",id:"submit1",onClick:function(){var e=document.getElementById("material").value,t=parseFloat(document.getElementById("materialThickness").value);if(!isNaN(t)){var a,n=function(e,t){var a=Object.keys(e).map(function(e){return parseFloat(e)}),n=t,r=!1;return a.forEach(function(e,i){e>=n&&!r&&(r=!0,t=e),n>a[a.length-1]&&(t=e)}),t};"wood"===e&&(t=n(g.plywood,t),a=g.plywood[t].diameter),"hardwood"===e&&(t=n(g.plywood,t),a=g.plywood[t].diameter),"plastic_roughing"!==e&&"plastic_finishing"!==e||(t=n(g.plastic,t),a=g.plastic[t].diameter),"aluminum_roughing"!==e&&"aluminum_finishing"!==e||(t=n(g.aluminum,t),a=g.aluminum[t].diameter),"steel_roughing"!==e&&"steel_finishing"!==e||(t=n(g.steel,t),a=g.aluminum[t].diameter),"foam_or_wax"!==e&&"mdf"!==e||(t=n(g.mdf,t),a=g.mdf[t].diameter),document.getElementById("bitDiameter").value=a,document.getElementById("flutes").value=1,document.getElementById("rpm").value=18e3,l()}}},a.submit1Text),r.a.createElement("form",{id:"inputs2"},"Bit Diameter: ",r.a.createElement("input",{type:"number",id:"bitDiameter",disabled:a.bitDiameterDisabled})," ",r.a.createElement("br",null),"Flutes: ",r.a.createElement("input",{type:"number",id:"flutes",disabled:a.flutesDisabled})," ",r.a.createElement("br",null),"RPM: ",r.a.createElement("input",{type:"number",id:"rpm",disabled:a.rpmDisabled})," ",r.a.createElement("br",null)),r.a.createElement("button",{type:"submit",id:"submit2",onClick:l,disabled:a.submit2Disabled},"Re-calculate")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Settings")," ",r.a.createElement("br",null),"Feed Rate: ",a.feedrate," mm/min ",r.a.createElement("br",null),"Plunge Rate: ",a.plungerate," mm/min ",r.a.createElement("br",null),"Pass Depth: ",Math.round(100*a.passDepth)/100," mm ",r.a.createElement("br",null),"Ramp Angle: ",a.rampAngle," degrees")},Z=a(61),L=a.n(Z),W=a(62),U=a(5),$=a(6),q=a(7),K=a(8),Q=a(9),ee=function(e){function t(){var e,a;Object(U.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(q.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={width:"95%",height:"95%",v0:0,v1:0,v2:500,v3:500},a}return Object(Q.a)(t,e),Object($.a)(t,[{key:"wheel",value:function(e){if(e.ctrlKey){if(e.deltaY<0){var t=10*e.deltaY+this.state.v2>1?10*e.deltaY+this.state.v2:this.state.v2,a=10*e.deltaY+this.state.v3>1?10*e.deltaY+this.state.v3:this.state.v3,n=this.state.v0-10*e.deltaY/2,r=this.state.v1-10*e.deltaY/2;this.setState({v0:n,v1:r,v2:t,v3:a})}if(e.deltaY>0){var i=10*e.deltaY+this.state.v2,l=10*e.deltaY+this.state.v3,o=this.state.v0-10*e.deltaY/2,c=this.state.v1-10*e.deltaY/2;this.setState({v0:o,v1:c,v2:i,v3:l})}}else{if(e.deltaY<0){var u=this.state.v1+e.deltaY;this.setState({v1:u})}if(e.deltaY>0){var s=this.state.v1+e.deltaY;this.setState({v1:s})}if(e.deltaX<0){var d=this.state.v0+e.deltaX;this.setState({v0:d})}if(e.deltaX>0){var m=this.state.v0+e.deltaX;this.setState({v0:m})}}}},{key:"render",value:function(){var e=this;return r.a.createElement("svg",{width:this.state.width,height:this.state.height,viewBox:"".concat(this.state.v0," ").concat(this.state.v1," ").concat(this.state.v2," ").concat(this.state.v3),xmlns:"http://www.w3.org/2000/svg",onWheel:function(t){return e.wheel(t)},style:{border:"1px solid #cccccc"},id:"tempSVGID"},this.props.groups)}}]),t}(n.Component),te=(a(186),a(189)),ae=a(187),ne=a(191),re=function(e){var t=e.disabled,a=Object(n.useState)({isShown:!1,nameValid:!0,cutDepthValid:!0,toolDiameterValid:!0,stepoverPercentageValid:!0,toleranceValid:!0,jogHeightValid:!0,jogRateValid:!0,feedRateValid:!0,dogboneTemp:z.getState().defaultParameters.dogbone}),i=Object(c.a)(a,2),l=i[0],d=i[1];return l.dogboneTemp===z.getState().defaultParameters.dogbone||l.isShown||(console.log("bug fixin time"),d(Object(u.a)({},l,{dogboneTemp:z.getState().defaultParameters.dogbone}))),r.a.createElement("div",null,r.a.createElement(te.a,{isShown:l.isShown,title:"Settings for this Pocket Cut",onCloseComplete:function(){return d(Object(u.a)({},l,{isShown:!1,showAdvanced:!1,dogboneTemp:z.getState().defaultParameters.dogbone}))},onConfirm:function(){if(l.nameValid&&l.cutDepthValid&&l.toolDiameterValid&&l.stepoverPercentageValid&&l.toleranceValid&&l.jogHeightValid&&l.jogRateValid&&l.feedRateValid){var e=D("name"),t=Number(D("cutDepth")),a=Number(D("toolDiameter")),n=Number(D("stepoverPercentage")),r=Number(D("tolerance")),i=Number(D("jogHeight")),c=Number(D("jogRate")),s=Number(D("feedRate"));""===D("name")&&(e=z.getState().defaultParameters.name),""===D("cutDepth")&&(t=z.getState().defaultParameters.cutDepth),""===D("toolDiameter")&&(a=z.getState().defaultParameters.toolDiameter),""===D("stepoverPercentage")&&(n=z.getState().defaultParameters.stepoverPercentage),""===D("tolerance")&&(r=z.getState().defaultParameters.tolerance),""===D("jogHeight")&&(i=z.getState().defaultParameters.jogHeight),""===D("jogRate")&&(c=z.getState().defaultParameters.jogRate),""===D("feedRate")&&(s=z.getState().defaultParameters.feedRate),isNaN(t)&&(t=z.getState().defaultParameters.cutDepth),isNaN(a)&&(a=z.getState().defaultParameters.toolDiameter),isNaN(n)&&(n=z.getState().defaultParameters.stepoverPercentage),isNaN(r)&&(r=z.getState().defaultParameters.tolerance),isNaN(i)&&(i=z.getState().defaultParameters.jogHeight),isNaN(c)&&(c=z.getState().defaultParameters.jogRate),isNaN(s)&&(s=z.getState().defaultParameters.feedRate);var m=l.dogboneTemp,p=a/2,g=a/2+r,f=Math.ceil(t/p),h=t/f,b=v(h,h,f).map(function(e){return-e}),j=y(z.getState().defaultParameters);j.dogbone=m,isNaN(r)||(j.tolerance=r),isNaN(a)||(j.toolDiameter=a,j.compensatedRadius=g),isNaN(t)||(j.cutDepth=t,j.depthOfPasses=b),isNaN(s)||(j.feedRate=s),isNaN(i)||(j.jogHeight=i),isNaN(c)||(j.jogRate=c),isNaN(n)||(j.stepoverPercentage=n),d(Object(u.a)({},l,{isShown:!1}));var S=z.state.toolpaths,V=z.state.selected.map(function(t){return{type:"pocket",name:e,parameters:j,sourceGeometryID:t,geometry:A(z.state.contours[t],j),id:E(),cutSelected:!1,visible:!0}}),R=[].concat(Object(o.a)(S),Object(o.a)(V));console.log("newToolpaths",R),z.update({toolpaths:R})}}},r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{cutDepthValid:t}))},isInvalid:!l.cutDepthValid,name:"cutDepth",description:l.cutDepthValid?"":"please enter a valid number",label:"Depth of Cut for this Pocket",placeholder:String(z.getState().defaultParameters.cutDepth)}),r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{toolDiameterValid:t}))},isInvalid:!l.toolDiameterValid,name:"toolDiameter",description:l.toolDiameterValid?"":"please enter a valid number",label:"Tool Diameter",placeholder:String(z.getState().defaultParameters.toolDiameter)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);t=0<Number(e.target.value)&&Number(e.target.value)<=100,d(Object(u.a)({},l,{stepoverPercentageValid:t}))},isInvalid:!l.stepoverPercentageValid,name:"stepoverPercentage",description:l.stepoverPercentageValid?"":"please enter a valid number",label:"Stepover Percentage",placeholder:String(z.getState().defaultParameters.stepoverPercentage)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{feedRateValid:t}))},isInvalid:!l.feedRateValid,name:"feedRate",description:l.feedRateValid?"":"please enter a valid number",label:"Feed Rate",placeholder:String(z.getState().defaultParameters.feedRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{toleranceValid:t}))},isInvalid:!l.toleranceValid,name:"tolerance",description:l.toleranceValid?"":"please enter a valid number",label:"Tolerance",placeholder:String(z.getState().defaultParameters.tolerance)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{jogRateValid:t}))},isInvalid:!l.jogRateValid,name:"jogRate",description:l.jogRateValid?"":"please enter a valid number",label:"Jog Rate",placeholder:String(z.getState().defaultParameters.jogRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{jogHeightValid:t}))},isInvalid:!l.jogHeightValid,name:"jogHeight",description:l.jogHeightValid?"":"please enter a valid number",label:"Jog Height",placeholder:String(z.getState().defaultParameters.jogHeight)}),r.a.createElement(p.a,{marginTop:20,size:400,color:"rgba(67, 90, 111, .91)"},"Auto Dogbone"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"true",value:!0},{label:"false",value:!1}],value:l.dogboneTemp,onChange:function(e){var t=e;d(Object(u.a)({},l,{dogboneTemp:t}))}}),r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=""!==e.target.value;d(Object(u.a)({},l,{nameValid:t}))},isInvalid:!l.nameValid,name:"name",description:l.nameValid?"":"please enter something",label:"Name for this Pocket",placeholder:String(z.getState().defaultParameters.name)})),r.a.createElement(s.a,{disabled:t,onClick:function(){return d(Object(u.a)({},l,{isShown:!0}))}},"Pocket"))},ie=function(e){var t=e.disabled,a=Object(n.useState)({isShown:!1,nameValid:!0,cutDepthValid:!0,toolDiameterValid:!0,toleranceValid:!0,jogHeightValid:!0,jogRateValid:!0,feedRateValid:!0,tabThicknessValid:!0,offsetTemp:z.state.defaultParameters.offset,tabsTemp:z.state.defaultParameters.tabs,dogboneTemp:z.state.defaultParameters.dogbone}),i=Object(c.a)(a,2),l=i[0],d=i[1];l.offsetTemp===z.getState().defaultParameters.offset&&l.tabsTemp===z.getState().defaultParameters.tabs&&l.dogboneTemp===z.getState().defaultParameters.dogbone||l.isShown||(console.log("bug fixin time"),d(Object(u.a)({},l,{offsetTemp:z.state.defaultParameters.offset,tabsTemp:z.state.defaultParameters.tabs,dogboneTemp:z.state.defaultParameters.dogbone})));return r.a.createElement("div",null,r.a.createElement(te.a,{isShown:l.isShown,title:"Settings for this Profile Cut",onCloseComplete:function(){d(Object(u.a)({},l,{isShown:!1,dogboneTemp:z.getState().defaultParameters.dogbone,tabsTemp:z.getState().defaultParameters.tabs,offsetTemp:z.getState().defaultParameters.offset}))},onConfirm:function(){if(l.nameValid&&l.cutDepthValid&&l.toolDiameterValid&&l.toleranceValid&&l.jogHeightValid&&l.jogRateValid&&l.feedRateValid){var e=D("name"),t=Number(D("cutDepth")),a=Number(D("toolDiameter")),n=Number(D("tolerance")),r=Number(D("jogHeight")),i=Number(D("jogRate")),c=Number(D("feedRate")),s=Number(D("tabThickness"));""===D("name")&&(e=z.getState().defaultParameters.name),""===D("cutDepth")&&(t=z.getState().defaultParameters.cutDepth),""===D("toolDiameter")&&(a=z.getState().defaultParameters.toolDiameter),""===D("tolerance")&&(n=z.getState().defaultParameters.tolerance),""===D("jogHeight")&&(r=z.getState().defaultParameters.jogHeight),""===D("jogRate")&&(i=z.getState().defaultParameters.jogRate),""===D("feedRate")&&(c=z.getState().defaultParameters.feedRate),""===D("tabThickness")&&(s=z.getState().defaultParameters.tabThickness),isNaN(t)&&(t=z.getState().defaultParameters.cutDepth),isNaN(a)&&(a=z.getState().defaultParameters.toolDiameter),isNaN(n)&&(n=z.getState().defaultParameters.tolerance),isNaN(r)&&(r=z.getState().defaultParameters.jogHeight),isNaN(i)&&(i=z.getState().defaultParameters.jogRate),isNaN(c)&&(c=z.getState().defaultParameters.feedRate),isNaN(s)&&(s=z.getState().defaultParameters.tabThickness);var m=l.dogboneTemp,p=l.tabsTemp,g=l.offsetTemp,f=a/2,h=a/2+n,b=Math.ceil(t/f),j=t/b,S=v(j,j,b).map(function(e){return-e}),V=y(z.state.defaultParameters);V.dogbone=m,V.tabs=p,V.offset=g,V.tolerance=n,V.tabThickness=s,V.toolDiameter=a,V.compensatedRadius=h,V.cutDepth=t,V.depthOfPasses=S,V.feedRate=c,V.jogHeight=r,V.jogRate=i,d(Object(u.a)({},l,{isShown:!1}));var R=z.state.toolpaths,T=z.state.selected.map(function(t){return{type:"profile",name:e,parameters:V,sourceGeometryID:t,geometry:I(z.state.contours[t],V),id:E(),cutSelected:!1,visible:!0}}),P=[].concat(Object(o.a)(R),Object(o.a)(T));z.update({toolpaths:P})}}},r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{cutDepthValid:t}))},isInvalid:!l.cutDepthValid,name:"cutDepth",description:l.cutDepthValid?"":"please enter a valid number",label:"Depth of Cut",placeholder:String(z.getState().defaultParameters.cutDepth)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{toolDiameterValid:t}))},isInvalid:!l.toolDiameterValid,name:"toolDiameter",description:l.toolDiameterValid?"":"please enter a valid number",label:"Tool Diameter",placeholder:String(z.getState().defaultParameters.toolDiameter)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{feedRateValid:t}))},isInvalid:!l.feedRateValid,name:"feedRate",description:l.feedRateValid?"":"please enter a valid number",label:"Feed Rate",placeholder:String(z.getState().defaultParameters.feedRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{toleranceValid:t}))},isInvalid:!l.toleranceValid,name:"tolerance",description:l.toleranceValid?"":"please enter a valid number",label:"Tolerance",placeholder:String(z.getState().defaultParameters.tolerance)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{jogRateValid:t}))},isInvalid:!l.jogRateValid,name:"jogRate",description:l.jogRateValid?"":"please enter a valid number",label:"Jog Rate",placeholder:String(z.getState().defaultParameters.jogRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{jogHeightValid:t}))},isInvalid:!l.jogHeightValid,name:"jogHeight",description:l.jogHeightValid?"":"please enter a valid number",label:"Jog Height",placeholder:String(z.getState().defaultParameters.jogHeight)}),r.a.createElement(p.a,{marginTop:8,size:400,color:"rgba(67, 90, 111, .91)"},"Offset Direction"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"outside",value:"outside"},{label:"inside",value:"inside"},{label:"none",value:"none"}],value:l.offsetTemp,onChange:function(e){var t=e;d(Object(u.a)({},l,{offsetTemp:t}))}}),r.a.createElement(p.a,{marginTop:20,size:400,color:"rgba(67, 90, 111, .91)"},"Auto Tabs"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"true",value:!0},{label:"false",value:!1}],value:l.tabsTemp,onChange:function(e){var t=e;d(Object(u.a)({},l,{tabsTemp:t}))}}),r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{tabThicknessValid:t}))},isInvalid:!l.tabThicknessValid,name:"tabThickness",description:l.tabThicknessValid?"":"please enter a valid number",label:"Tab Thickness",placeholder:String(z.getState().defaultParameters.tabThickness)}),r.a.createElement(p.a,{marginTop:20,size:400,color:"rgba(67, 90, 111, .91)"},"Auto Dogbone"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"true",value:!0},{label:"false",value:!1}],value:l.dogboneTemp,onChange:function(e){var t=e;d(Object(u.a)({},l,{dogboneTemp:t}))}}),r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=""!==e.target.value;d(Object(u.a)({},l,{nameValid:t}))},isInvalid:!l.nameValid,name:"name",description:l.nameValid?"":"please enter something",label:"Name for this Profile",placeholder:String(z.getState().defaultParameters.name)})),r.a.createElement(s.a,{disabled:t,onClick:function(){return d(Object(u.a)({},l,{isShown:!0}))}},"Profile"))},le=function(e){var t=e.disabled,a=Object(n.useState)({isShown:!1,nameValid:!0,cutDepthValid:!0,toolDiameterValid:!0,toleranceValid:!0,jogHeightValid:!0,jogRateValid:!0,feedRateValid:!0}),i=Object(c.a)(a,2),l=i[0],d=i[1];return r.a.createElement("div",null,r.a.createElement(te.a,{isShown:l.isShown,title:"Settings for this Drill Cut",onCloseComplete:function(){d(Object(u.a)({},l,{isShown:!1}))},onConfirm:function(){if(l.nameValid&&l.cutDepthValid&&l.toolDiameterValid&&l.toleranceValid&&l.jogHeightValid&&l.jogRateValid&&l.feedRateValid){var e=D("name"),t=Number(D("cutDepth")),a=Number(D("toolDiameter")),n=Number(D("tolerance")),r=Number(D("jogHeight")),i=Number(D("jogRate")),c=Number(D("feedRate"));""===D("name")&&(e=z.getState().defaultParameters.name),""===D("cutDepth")&&(t=z.getState().defaultParameters.cutDepth),""===D("toolDiameter")&&(a=z.getState().defaultParameters.toolDiameter),""===D("tolerance")&&(n=z.getState().defaultParameters.tolerance),""===D("jogHeight")&&(r=z.getState().defaultParameters.jogHeight),""===D("jogRate")&&(i=z.getState().defaultParameters.jogRate),""===D("feedRate")&&(c=z.getState().defaultParameters.feedRate),isNaN(t)&&(t=z.getState().defaultParameters.cutDepth),isNaN(a)&&(a=z.getState().defaultParameters.toolDiameter),isNaN(n)&&(n=z.getState().defaultParameters.tolerance),isNaN(r)&&(r=z.getState().defaultParameters.jogHeight),isNaN(i)&&(i=z.getState().defaultParameters.jogRate),isNaN(c)&&(c=z.getState().defaultParameters.feedRate);var s=a/2+n,m=y(z.state.defaultParameters);m.cutDepth=t,m.toolDiameter=a,m.tolerance=n,m.compensatedRadius=s,m.feedRate=c,m.jogHeight=r,m.jogRate=i,d(Object(u.a)({},l,{isShown:!1}));var p=z.state.toolpaths,g=z.state.selected.map(function(t){return{type:"drill",name:e,parameters:m,sourceGeometryID:t,geometry:_(z.state.contours[t],m),id:E(),cutSelected:!1,visible:!0}}),f=[].concat(Object(o.a)(p),Object(o.a)(g));z.update({toolpaths:f})}}},r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{cutDepthValid:t}))},isInvalid:!l.cutDepthValid,name:"cutDepth",description:l.cutDepthValid?"":"please enter a valid number",label:"Depth of Cut",placeholder:String(z.getState().defaultParameters.cutDepth)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{toolDiameterValid:t}))},isInvalid:!l.toolDiameterValid,name:"toolDiameter",description:l.toolDiameterValid?"":"please enter a valid number",label:"Tool Diameter",placeholder:String(z.getState().defaultParameters.toolDiameter)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{feedRateValid:t}))},isInvalid:!l.feedRateValid,name:"feedRate",description:l.feedRateValid?"":"please enter a valid number",label:"Feed Rate",placeholder:String(z.getState().defaultParameters.feedRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{toleranceValid:t}))},isInvalid:!l.toleranceValid,name:"tolerance",description:l.toleranceValid?"":"please enter a valid number",label:"Tolerance",placeholder:String(z.getState().defaultParameters.tolerance)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{jogRateValid:t}))},isInvalid:!l.jogRateValid,name:"jogRate",description:l.jogRateValid?"":"please enter a valid number",label:"Jog Rate",placeholder:String(z.getState().defaultParameters.jogRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);d(Object(u.a)({},l,{jogHeightValid:t}))},isInvalid:!l.jogHeightValid,name:"jogHeight",description:l.jogHeightValid?"":"please enter a valid number",label:"Jog Height",placeholder:String(z.getState().defaultParameters.jogHeight)}),r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=""!==e.target.value;d(Object(u.a)({},l,{nameValid:t}))},isInvalid:!l.nameValid,name:"name",description:l.nameValid?"":"please enter something",label:"Name for this Profile",placeholder:String(z.getState().defaultParameters.name)})),r.a.createElement(s.a,{disabled:t,onClick:function(){return d(Object(u.a)({},l,{isShown:!0}))}},"Drill"))},oe=a(184),ce=function(e){var t=e.params,a=e.setDefault,i=e.name,l=e.disabled,o=e.index,s=Object(n.useState)({isShown:!1,nameValid:!0,cutDepthValid:!0,toolDiameterValid:!0,stepoverPercentageValid:!0,toleranceValid:!0,jogHeightValid:!0,jogRateValid:!0,feedRateValid:!0,tabThicknessValid:!0,offsetTemp:t.offset,tabsTemp:t.tabs,dogboneTemp:t.dogbone}),d=Object(c.a)(s,2),m=d[0],g=d[1];return r.a.createElement("div",null,r.a.createElement(te.a,{isShown:m.isShown,title:a?"Advanced Default Settings":"Specific Toolpath Settings",onCloseComplete:function(){g(Object(u.a)({},m,{isShown:!1,dogboneTemp:t.dogbone,tabsTemp:t.tabs,offsetTemp:t.offset}))},onConfirm:function(){if(m.nameValid&&m.cutDepthValid&&m.toolDiameterValid&&m.stepoverPercentageValid&&m.toleranceValid&&m.jogHeightValid&&m.jogRateValid&&m.feedRateValid){var e=a?"":D("name"),n=Number(D("cutDepth")),r=Number(D("toolDiameter")),i=Number(D("stepoverPercentage")),l=Number(D("tolerance")),c=Number(D("jogHeight")),s=Number(D("jogRate")),d=Number(D("feedRate")),p=Number(D("tabThickness"));a||""===D("name")&&(e=!1),""===D("cutDepth")&&(n=t.cutDepth),""===D("toolDiameter")&&(r=t.toolDiameter),""===D("stepoverPercentage")&&(i=t.stepoverPercentage),""===D("tolerance")&&(l=t.tolerance),""===D("jogHeight")&&(c=t.jogHeight),""===D("jogRate")&&(s=t.jogRate),""===D("feedRate")&&(d=t.feedRate),""===D("tabThickness")&&(p=t.tabThickness);var f=m.dogboneTemp,h=m.tabsTemp,b=m.offsetTemp,j=n/2,E=r/2+l,S=Math.ceil(n/j),V=n/S,R=v(V,V,S).map(function(e){return-e}),T=y(t);if(T.dogbone=f,T.tabs=h,T.offset=b,T.tolerance=l,T.tabThickness=p,T.toolDiameter=r,T.compensatedRadius=E,T.cutDepth=n,T.depthOfPasses=R,T.feedRate=d,T.jogHeight=c,T.jogRate=s,T.stepoverPercentage=i,g(Object(u.a)({},m,{isShown:!1})),a)console.log("update default parameters",T),z.update({defaultParameters:T});else{var P=z.getState(),O=P.toolpaths,N=O[o];e&&(N.name=e),N.parameters=T;var w=N.sourceGeometryID,C=P.contours[w];if("profile"===N.type){var k=I(C,T);N.geometry=k}if("pocket"===N.type){var H=A(C,T);N.geometry=H}if("drill"===N.type){var x=_(C,T);N.geometry=x}z.update({toolpaths:O})}}}},r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{cutDepthValid:t}))},isInvalid:!m.cutDepthValid,name:"cutDepth",description:m.cutDepthValid?"":"please enter a valid number",label:"Depth of Cut",placeholder:String(t.cutDepth)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{toolDiameterValid:t}))},isInvalid:!m.toolDiameterValid,name:"toolDiameter",description:m.toolDiameterValid?"":"please enter a valid number",label:"Tool Diameter",placeholder:String(t.toolDiameter)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);t=0<Number(e.target.value)&&Number(e.target.value)<=100,g(Object(u.a)({},m,{stepoverPercentageValid:t}))},isInvalid:!m.stepoverPercentageValid,name:"stepoverPercentage",description:m.stepoverPercentageValid?"":"please enter a valid number",label:"Stepover Percentage (this is only relevant for pocket cuts)",placeholder:String(t.stepoverPercentage)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{feedRateValid:t}))},isInvalid:!m.feedRateValid,name:"feedRate",description:m.feedRateValid?"":"please enter a valid number",label:"Feed Rate",placeholder:String(t.feedRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{toleranceValid:t}))},isInvalid:!m.toleranceValid,name:"tolerance",description:m.toleranceValid?"":"please enter a valid number",label:"Tolerance",placeholder:String(t.tolerance)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{jogRateValid:t}))},isInvalid:!m.jogRateValid,name:"jogRate",description:m.jogRateValid?"":"please enter a valid number",label:"Jog Rate",placeholder:String(t.jogRate)}),r.a.createElement(ae.a,{onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{jogHeightValid:t}))},isInvalid:!m.jogHeightValid,name:"jogHeight",description:m.jogHeightValid?"":"please enter a valid number",label:"Jog Height",placeholder:String(t.jogHeight)}),r.a.createElement(p.a,{marginTop:8,size:400,color:"rgba(67, 90, 111, .91)"},"Offset Direction (this is only relevant for profile cuts)"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"outside",value:"outside"},{label:"inside",value:"inside"},{label:"none",value:"none"}],value:m.offsetTemp,onChange:function(e){var t=e;g(Object(u.a)({},m,{offsetTemp:t}))}}),r.a.createElement(p.a,{marginTop:20,size:400,color:"rgba(67, 90, 111, .91)"},"Auto Tabs (this is only relevant for profile cuts)"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"true",value:!0},{label:"false",value:!1}],value:m.tabsTemp,onChange:function(e){var t=e;g(Object(u.a)({},m,{tabsTemp:t}))}}),r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=S(e.target.value);g(Object(u.a)({},m,{tabThicknessValid:t}))},isInvalid:!m.tabThicknessValid,name:"tabThickness",description:m.tabThicknessValid?"":"please enter a valid number",label:"Tab Thickness",placeholder:String(t.tabThickness)}),r.a.createElement(p.a,{marginTop:20,size:400,color:"rgba(67, 90, 111, .91)"},"Auto Dogbone"),r.a.createElement(ne.a,{marginTop:4,options:[{label:"true",value:!0},{label:"false",value:!1}],value:m.dogboneTemp,onChange:function(e){var t=e;g(Object(u.a)({},m,{dogboneTemp:t}))}}),!a&&r.a.createElement(ae.a,{marginTop:20,onChange:function(e){var t=""!==e.target.value;g(Object(u.a)({},m,{nameValid:t}))},isInvalid:!m.nameValid,name:"name",description:m.nameValid?"":"please enter something",label:"Name for this Path",placeholder:i})),r.a.createElement(oe.a,{onClick:function(){return g(Object(u.a)({},m,{isShown:!l}))}},a?"Advanced Default Options":"edit"))},ue=a(188),se=a(185),de=function(e,t,a){return t=t?-1:1,a=a?-1:1,e=e.map(function(e){return e.map(function(e){var n=Object(c.a)(e.origin,2),r=n[0],i=n[1],l=Object(c.a)(e.end,2),o=l[0],u=l[1];return O([r*t,i*a],[o*t,u*a])})})},me=function(e,t,a){return e=e.map(function(e){return e.map(function(e){var n=Object(c.a)(e.origin,2),r=n[0],i=n[1],l=Object(c.a)(e.end,2),o=l[0],u=l[1];return O([r*t,i*a],[o*t,u*a])})})},pe=function(e){var t=e.state.toolpaths;return r.a.createElement(ue.a,null,r.a.createElement(ue.a.Head,null,r.a.createElement(ue.a.TextHeaderCell,null,"name"),r.a.createElement(ue.a.TextHeaderCell,null,"type"),r.a.createElement(ue.a.TextHeaderCell,null,"modify"),r.a.createElement(ue.a.TextHeaderCell,null,"reorder"),r.a.createElement(ue.a.TextHeaderCell,null,"select/view")),r.a.createElement(ue.a.Body,{height:240},t.map(function(e,a){return r.a.createElement(ue.a.Row,{key:e.id,onMouseDown:function(){},style:{background:e.cutSelected?"lightblue":"white"}},r.a.createElement(ue.a.TextCell,null,e.name),r.a.createElement(ue.a.TextCell,null,e.type),r.a.createElement(ue.a.TextCell,null,r.a.createElement(ce,{params:e.parameters,name:e.name,setDefault:!1,index:a,onMouseDown:function(e){return e.stopPropagation()}})),r.a.createElement(ue.a.TextCell,null,"^ v"),r.a.createElement(ue.a.TextCell,null,r.a.createElement(se.a,{checked:e.visible,onMouseDown:function(e){return e.stopPropagation()},onChange:function(e){t[a].visible=e.target.checked,z.update({toolpaths:t})}})))})),r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.TextCell,null,r.a.createElement(s.a,{onClick:function(){var e=[];t.forEach(function(t){if(t.visible){var a,n=t.geometry.geometry;"drill"===t.type?a=function(e,t){var a;return"in"===t.units&&(a="G20"),"mm"===t.units&&(a="G21"),[].concat([a,"G90"],["(end of preamble)","G1 Z".concat(t.jogHeight," F").concat(t.jogRate),"G0 X".concat(e[0]," Y").concat(e[1]),"G1 Z-".concat(t.cutDepth," F").concat(t.plungeRate),"G1 Z".concat(t.jogHeight," F").concat(t.jogRate)]).join("\n")}(n,t.parameters):(n=de(n,!1,!0),n=me(n,.5,.5),"profile"===t.type&&(a=function(e,t){var a,n=(e=e.flat()).map(function(e){return[e.origin[0],e.origin[1]]}),r=n.map(function(e){return"G1 X".concat(e[0]," Y").concat(e[1]," F").concat(t.feedRate)}),i=n[0],l=V(t.cutDepth,t.passDepth),c=l.map(function(e,a){return["G1 Z".concat(l[a]," F").concat(t.plungeRate)].concat(Object(o.a)(r),["G1 X".concat(i[0]," Y").concat(i[1]," F").concat(t.feedRate)])});return c=c.flat(1),"in"===t.units&&(a="G20"),"mm"===t.units&&(a="G21"),[].concat([a,"G90"],["(end of preamble)","G1 Z".concat(t.jogHeight," F").concat(t.jogRate),"G0 X".concat(i[0]," Y").concat(i[1])],Object(o.a)(c),["G1 Z".concat(t.jogHeight," F").concat(t.jogRate)]).join("\n")}(n,t.parameters)),"pocket"===t.type&&(a=function(e,t){var a,n=e.map(function(e){return e.map(function(e){return[e.origin[0],e.origin[1]]})}).map(function(e){var a=e.length>1,n=e[0];return n="G1 X".concat(n[0]," Y").concat(n[1]," F").concat(t.feedRate),a?["G1 Z".concat(t.jogHeight," F").concat(t.jogRate),n,"plunge"].concat(Object(o.a)(e.map(function(e){return"G1 X".concat(e[0]," Y").concat(e[1]," F").concat(t.feedRate)})),[n,"G1 Z".concat(t.jogHeight," F").concat(t.jogRate)]):[n,"plunge"].concat(Object(o.a)(e.map(function(e){return"G1 X".concat(e[0]," Y").concat(e[1]," F").concat(t.feedRate)})),[n])}).flat(),r=V(t.cutDepth,t.passDepth),i=r.map(function(e,a){return Object(o.a)(n.map(function(e){return"plunge"===e?"G1 Z".concat(r[a]," F").concat(t.plungeRate):e}))});return i=i.flat(),"in"===t.units&&(a="G20"),"mm"===t.units&&(a="G21"),[].concat([a,"G90"],["(end of preamble)","G1 Z".concat(t.jogHeight," F").concat(t.jogRate)],Object(o.a)(i),["G1 Z".concat(t.jogHeight," F").concat(t.jogRate)]).join("\n")}(n,t.parameters))),e.push(a)}}),j("toolpaths.gcode",e.join("\n"))}},"Export")),r.a.createElement(ue.a.TextCell,null,r.a.createElement(s.a,{onClick:function(){var e=z.state.toolpaths.filter(function(e){return!e.visible});z.update({toolpaths:e})}},"Delete")),r.a.createElement(ue.a.TextCell,null,r.a.createElement(s.a,{onClick:function(){var e=(t=z.getState().toolpaths).every(function(e){return e.visible});t=t.map(function(t,a){return t.visible=!e,t}),z.update({toolpaths:t})}},"Select/View All"))))},ge=function(e){return N(L()(function(e,t){return e.map(function(e,a){return a===t-1?[{x:e.origin[0],y:e.origin[1]},{x:e.end[0],y:e.end[1]}]:{x:e.origin[0],y:e.origin[1]}}).flat()}(e,e.length),.1,!1).map(function(e){return[e.x,e.y]}))},fe=function(e,t,a,n){var r="toolpath"===(e=e.split("_"))[1];e=e[0];var i=a.groupHovered;i.push(e),n(e&&!r&&t?Object(u.a)({},a,{groupHovered:i}):Object(u.a)({},a,{groupHovered:[]}))},he=function(e){var t=document.getElementById("tempSVGID"),a=t.createSVGPoint();a.x=e.clientX,a.y=e.clientY;var n=a.matrixTransform(t.getScreenCTM().inverse());return[n.x,n.y]},be=function(){var e=Object(n.useState)({groupHovered:[],mouseDown:!1,downPoint:void 0,drag:!1,selectionBoxWidth:void 0,selectionBoxHeight:void 0,selectionBoxOrigin:[0,0]}),t=Object(c.a)(e,2),a=t[0],i=t[1],l=Object.entries(z.state.contours).map(function(e){var t=Object(c.a)(e,2),n=t[0],l=t[1];return r.a.createElement("g",{onMouseEnter:function(e){return fe(e.target.parentNode.id,!0,a,i)},onMouseLeave:function(e){return fe(e.target.parentNode.id,!1,a,i)},key:"".concat(n),id:"".concat(n,"_contour")},ge(l,l.length).map(function(e,t){return w(e,"".concat(n,"_index").concat(t),{selected:z.state.selected.includes(n),highlighted:a.groupHovered.includes(n)})}))}),g=z.state.toolpaths.map(function(e){return r.a.createElement("g",{key:"".concat(e.id),id:"".concat(e.id,"_toolpath")},e.visible&&function(e){return e.map(function(e){return Array.isArray(e[0])?e.map(function(e){return ge(e,e.length)}).flat():ge(e,e.length)}).flat()}(e.geometry.drawing).map(function(t,a){return w(t,"".concat(e.id,"_index").concat(a),{toolpath:!0})}))}),f=r.a.createElement("circle",{cx:"0",cy:"0",r:"2",stroke:"orange",strokeWidth:"1",fill:"orange",opacity:".8",key:"origin"});return l=[].concat(Object(o.a)(l),Object(o.a)(g),[f]),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",null,r.a.createElement("div",{onMouseDown:function(e){var t=he(e);console.log(t),i(Object(u.a)({},a,{mouseDown:!0,downPoint:t}))},onMouseMove:function(e){if(a.mouseDown){var t=Object(c.a)(a.downPoint,2),n=t[0],r=t[1],l=he(e),o=Object(c.a)(l,2),s=o[0],d=o[1],m=Math.abs(n-s),p=Math.abs(r-d),g=[0,0];n<s&&r<d?g=a.downPoint:n<s&&r>d?g=[n,r-p]:n>s&&r<d?g=[n-m,r]:n>s&&r>d&&(g=[n-m,r-p]),i(Object(u.a)({},a,{drag:!0,selectionBoxWidth:m,selectionBoxHeight:p,selectionBoxOrigin:g}))}},onMouseUp:function(e){console.log(z.state),Object.entries(z.state.contours).forEach(function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];console.log(a,n)}),z.update({selected:[].concat(Object(o.a)(z.state.selected),[])}),a.drag||function(e){var t="toolpath"===(e=e.split("_"))[1];!(e=e[0])||z.state.selected.includes(e)||t?z.update({selected:[]}):z.update(function(t){return t.selected.push(e)})}(e.target.parentNode.id),i(Object(u.a)({},a,{mouseDown:!1,drag:!1}))},className:"mainEvent"},a.drag?r.a.createElement(ee,{groups:[].concat(Object(o.a)(l),[r.a.createElement("rect",{key:"selectionBox",x:"".concat(a.selectionBoxOrigin[0]),y:"".concat(a.selectionBoxOrigin[1]),width:"".concat(a.selectionBoxWidth),height:"".concat(a.selectionBoxHeight),style:{fill:"blue",opacity:.1}})])}):r.a.createElement(ee,{groups:Object(o.a)(l)}),r.a.createElement("svg",{width:0,height:0,id:"thisIsDumb"})),r.a.createElement("div",null,r.a.createElement("input",{id:"myInput",type:"file",style:{display:"none"},onChange:function(e){var t=e.target.files[0].name.split(".")[1];return"bbjs"===t?function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){var t=e.target.result,a=JSON.parse(t);z.update(a)},a.readAsText(t)}(e):"svg"===t?function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){var t=e.target.result,a=document.getElementById("thisIsDumb");a.innerHTML=t;var n=Object(W.flattenSVG)(a),r={};Object.values(n).forEach(function(e){var t=N(e.points);r[E()]=t}),r=Object(u.a)({},z.state.contours,r),z.update({contours:r})},a.readAsText(t)}(e):void 0}}),r.a.createElement(s.a,{marginRight:4,onClick:function(){return document.getElementById("myInput").click()}},"upload (SVG or BBJS)"),r.a.createElement(s.a,{onClick:function(){j("save.bbjs",JSON.stringify(z.state))}},"save"),r.a.createElement("br",null),"Number Selected: ",z.state.selected.length,"\xa0",r.a.createElement(s.a,{onClick:function(){var e=Object.entries(z.state.contours);e=e.filter(function(e){var t=Object(c.a)(e,2),a=t[0];return t[1],!z.state.selected.includes(a)});var t=z.state.toolpaths.filter(function(e){return!z.state.selected.includes(e.sourceGeometryID)}),a={};e.forEach(function(e){a[e[0]]=e[1]}),e=a,z.update({contours:e,toolpaths:t,selected:[]})}},"Delete"))),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",null,r.a.createElement(X,null),r.a.createElement("br",null),r.a.createElement("div",null,"Origin: Top Left"),r.a.createElement("br",null),z.state.initialized?"":r.a.createElement(d.a,{marginTop:4},"enable calculator before editting options"),r.a.createElement(m.a,null," ",r.a.createElement(ce,{disabled:!z.state.initialized,setDefault:!0,params:z.getState().defaultParameters}))),r.a.createElement("div",null,r.a.createElement(p.a,{marginTop:8},"Create Toolpaths"),z.state.initialized?"":r.a.createElement(d.a,{marginTop:4},"enable calculator before creating toolpaths"),r.a.createElement("div",{className:"toolpaths"},r.a.createElement(m.a,{marginLeft:8,marginTop:4},r.a.createElement(ie,{disabled:!z.state.initialized})),r.a.createElement(m.a,{marginLeft:8,marginTop:4},r.a.createElement(re,{disabled:!z.state.initialized})),r.a.createElement(m.a,{marginLeft:8,marginTop:4},r.a.createElement(le,{disabled:!z.state.initialized})))),r.a.createElement("div",null,r.a.createElement(p.a,{marginTop:8},"Toolpaths"),r.a.createElement(pe,{marginTop:4,state:z.getState()}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=function(){l.a.render(r.a.createElement(be,null),document.getElementById("root"))};z.subscribe(ve),ve(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,a){e.exports=a(168)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.8d217b21.chunk.js.map