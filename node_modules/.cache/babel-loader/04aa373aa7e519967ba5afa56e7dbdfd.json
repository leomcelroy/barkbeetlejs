{"ast":null,"code":"/** @module utils/Positioning/getTextWidth */\nvar cachedCanvas = void 0;\n/**\n * A utility function to measure the width (in px) of any text. It will require a canvas\n * and an element to use to determine the current fonts to apply since different fonts will\n * have different widths.\n *\n * This isn't fully accurate since some browsers handle the calculations a bit differently so\n * they are off by a 0-3px\n *\n * @param {String} text - The text to measure the width\n * @param {HTMLElement} el - The element to use to determine the current font for the text.\n * @param {HTMLElement=} canvas - An optional canvas to use for doing the calculations. If this\n *    is omitted, it will just use the locally created canvas to do the calculations.\n * @return {number} this will either return null if there is a problem calculating the width or\n *    the length (in px) of the text.\n */\n\nexport default function getTextWidth(text, el, canvas) {\n  if (!el) {\n    return null;\n  }\n\n  if (!canvas) {\n    if (!cachedCanvas) {\n      cachedCanvas = document.createElement('canvas');\n    }\n\n    canvas = cachedCanvas;\n  }\n\n  var context = canvas.getContext('2d');\n\n  if (!context) {\n    // context doesn't exist in testing without complicated mocks\n    return null;\n  }\n\n  var styles = window.getComputedStyle(el);\n  var font = styles.font; // Some browsers do not actually supply the font style since they are on an older version of CSSProperties,\n  // so the font string needs to be made manually.\n\n  if (!font) {\n    // font-style font-variant font-weight font-size/line-height font-family\n    var sizing = styles.fontSize + ' / ' + styles.lineHeight + ' ' + styles.fontFamily;\n    font = styles.fontStyle + ' ' + styles.fontVariant + ' ' + styles.fontWeight + ' ' + sizing;\n  }\n\n  context.font = font;\n  return context.measureText(text).width;\n}","map":null,"metadata":{},"sourceType":"module"}