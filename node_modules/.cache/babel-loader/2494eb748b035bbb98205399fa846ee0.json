{"ast":null,"code":"import { gcode } from './exampleGCode.js'; //gocode: string -> {points: list, preamble: list} :object\n\nvar getPoints = function getPoints(gcode) {\n  var gcodeList = gcode.split('\\n');\n  var preamble = [];\n  var points = [];\n  var sawPreamble = false;\n  gcodeList.forEach(function (e) {\n    if (sawPreamble) {\n      var xIndex = e.indexOf(\"X\");\n      var yIndex = e.indexOf(\"Y\");\n      var fIndex = e.indexOf(\"F\");\n\n      if (e.includes(\"X\")) {\n        //console.log(\"full\", e);\n        var x = e.substring(xIndex + 1, yIndex - 1); //console.log(\"x\", x)\n\n        x = parseFloat(x);\n        var y = fIndex === -1 ? e.substring(yIndex + 1, e.length) : e.substring(yIndex + 1, fIndex - 1); //console.log(\"y\", y, \"f\", fIndex)\n\n        y = parseFloat(y);\n        points.push([x, y]);\n      }\n    } else {\n      preamble.push(e);\n    }\n\n    if (e === \"(end of preamble)\") sawPreamble = true;\n  });\n  return {\n    points: points,\n    preamble: preamble\n  };\n}; // finds center of a list of contours\n//points: list -> single point: technically list\n\n\nexport var center = function center(contours) {\n  var points = contours.flat(1);\n  points = points.map(function (line) {\n    return [line.origin, line.end];\n  }).flat();\n  console.log(points);\n}; // mirrors a list of contours\n//points: list, x: boolean, y: boolean -> mirrored points: list\n\nvar mirror = function mirror(contours, x, y) {}; //offsets a list of contours\n//points: list, xOffset: number, yOffset: number -> offsetPoints: list\n\n\nvar offset = function offset(points) {};\n\nexport var test = function test() {\n  var points = getPoints(gcode).points;\n  console.log(points);\n};","map":{"version":3,"sources":["/Users/leomcelroy/Desktop/barkbeetle_js/src/gcodeManipulations.js"],"names":["gcode","getPoints","gcodeList","split","preamble","points","sawPreamble","forEach","e","xIndex","indexOf","yIndex","fIndex","includes","x","substring","parseFloat","y","length","push","center","contours","flat","map","line","origin","end","console","log","mirror","offset","test"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,mBAApB,C,CAEA;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACD,KAAD,EAAW;AAC3B,MAAIE,SAAS,GAAGF,KAAK,CAACG,KAAN,CAAY,IAAZ,CAAhB;AACA,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,MAAM,GAAG,EAAb;AAEA,MAAIC,WAAW,GAAG,KAAlB;AACAJ,EAAAA,SAAS,CAACK,OAAV,CAAkB,UAAAC,CAAC,EAAI;AACrB,QAAIF,WAAJ,EAAiB;AACf,UAAIG,MAAM,GAAGD,CAAC,CAACE,OAAF,CAAU,GAAV,CAAb;AACA,UAAIC,MAAM,GAAGH,CAAC,CAACE,OAAF,CAAU,GAAV,CAAb;AACA,UAAIE,MAAM,GAAGJ,CAAC,CAACE,OAAF,CAAU,GAAV,CAAb;;AAEA,UAAIF,CAAC,CAACK,QAAF,CAAW,GAAX,CAAJ,EAAqB;AACnB;AAEA,YAAIC,CAAC,GAAGN,CAAC,CAACO,SAAF,CAAYN,MAAM,GAAG,CAArB,EAAwBE,MAAM,GAAG,CAAjC,CAAR,CAHmB,CAInB;;AACAG,QAAAA,CAAC,GAAGE,UAAU,CAACF,CAAD,CAAd;AAEA,YAAIG,CAAC,GAAIL,MAAM,KAAK,CAAC,CAAb,GAAkBJ,CAAC,CAACO,SAAF,CAAYJ,MAAM,GAAG,CAArB,EAAwBH,CAAC,CAACU,MAA1B,CAAlB,GAAsDV,CAAC,CAACO,SAAF,CAAYJ,MAAM,GAAG,CAArB,EAAwBC,MAAM,GAAG,CAAjC,CAA9D,CAPmB,CAQnB;;AACAK,QAAAA,CAAC,GAAGD,UAAU,CAACC,CAAD,CAAd;AAEAZ,QAAAA,MAAM,CAACc,IAAP,CAAY,CAACL,CAAD,EAAIG,CAAJ,CAAZ;AACD;AAEF,KAnBD,MAmBO;AACLb,MAAAA,QAAQ,CAACe,IAAT,CAAcX,CAAd;AACD;;AAED,QAAIA,CAAC,KAAK,mBAAV,EAA+BF,WAAW,GAAG,IAAd;AAChC,GAzBD;AA2BA,SAAO;AAACD,IAAAA,MAAM,EAANA,MAAD;AAASD,IAAAA,QAAQ,EAARA;AAAT,GAAP;AACD,CAlCD,C,CAoCA;AACA;;;AACA,OAAO,IAAMgB,MAAM,GAAG,SAATA,MAAS,CAACC,QAAD,EAAc;AAClC,MAAIhB,MAAM,GAAGgB,QAAQ,CAACC,IAAT,CAAc,CAAd,CAAb;AACAjB,EAAAA,MAAM,GAAGA,MAAM,CAACkB,GAAP,CAAW,UAAAC,IAAI;AAAA,WAAI,CAACA,IAAI,CAACC,MAAN,EAAcD,IAAI,CAACE,GAAnB,CAAJ;AAAA,GAAf,EAA4CJ,IAA5C,EAAT;AAEAK,EAAAA,OAAO,CAACC,GAAR,CAAYvB,MAAZ;AACD,CALM,C,CAOP;AACA;;AACA,IAAMwB,MAAM,GAAG,SAATA,MAAS,CAACR,QAAD,EAAWP,CAAX,EAAcG,CAAd,EAAoB,CAAE,CAArC,C,CAEA;AACA;;;AACA,IAAMa,MAAM,GAAG,SAATA,MAAS,CAACzB,MAAD,EAAY,CAAE,CAA7B;;AAEA,OAAO,IAAM0B,IAAI,GAAG,SAAPA,IAAO,GAAM;AACxB,MAAI1B,MAAM,GAAGJ,SAAS,CAACD,KAAD,CAAT,CAAiBK,MAA9B;AACAsB,EAAAA,OAAO,CAACC,GAAR,CAAYvB,MAAZ;AACD,CAHM","sourcesContent":["import {gcode} from './exampleGCode.js';\n\n//gocode: string -> {points: list, preamble: list} :object\nconst getPoints = (gcode) => {\n  let gcodeList = gcode.split('\\n');\n  let preamble = [];\n  let points = [];\n\n  let sawPreamble = false;\n  gcodeList.forEach(e => {\n    if (sawPreamble) {\n      let xIndex = e.indexOf(\"X\");\n      let yIndex = e.indexOf(\"Y\");\n      let fIndex = e.indexOf(\"F\");\n\n      if (e.includes(\"X\")) {\n        //console.log(\"full\", e);\n\n        let x = e.substring(xIndex + 1, yIndex - 1);\n        //console.log(\"x\", x)\n        x = parseFloat(x);\n\n        let y = (fIndex === -1) ? e.substring(yIndex + 1, e.length) : e.substring(yIndex + 1, fIndex - 1);\n        //console.log(\"y\", y, \"f\", fIndex)\n        y = parseFloat(y);\n\n        points.push([x, y]);\n      }\n\n    } else {\n      preamble.push(e);\n    }\n\n    if (e === \"(end of preamble)\") sawPreamble = true;\n  })\n\n  return {points, preamble};\n}\n\n// finds center of a list of contours\n//points: list -> single point: technically list\nexport const center = (contours) => {\n  let points = contours.flat(1);\n  points = points.map(line => [line.origin, line.end]).flat();\n\n  console.log(points);\n}\n\n// mirrors a list of contours\n//points: list, x: boolean, y: boolean -> mirrored points: list\nconst mirror = (contours, x, y) => {}\n\n//offsets a list of contours\n//points: list, xOffset: number, yOffset: number -> offsetPoints: list\nconst offset = (points) => {}\n\nexport const test = () => {\n  let points = getPoints(gcode).points;\n  console.log(points)\n}\n"]},"metadata":{},"sourceType":"module"}