{"ast":null,"code":"import _slicedToArray from \"/Users/leomcelroy/Desktop/barkbeetle_js/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"/Users/leomcelroy/Desktop/barkbeetle_js/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/leomcelroy/Desktop/barkbeetle_js/src/Workplane.js\";\n\nimport React, { Component, useState } from 'react';\nimport * as utils from './utils.js';\n\nvar Workplane = function Workplane(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var _useState = useState({\n    width: 500,\n    height: 500,\n    v0: 0,\n    v1: 0,\n    v2: 500,\n    v3: 500,\n    mousedown: false //zoomDelta: 0,\n\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var wheel = function wheel(e) {\n    e.preventDefault();\n    var loc = utils.getSVGpoint(e, _this.state.v0, _this.state.v1, _this.state.v2, _this.state.v3, _this.state.width, _this.state.height);\n\n    if (e.ctrlKey) {\n      var zoomRate = 10; //zooms to center now\n\n      if (e.deltaY < 0) {\n        //console.log('zoom in');\n        var v2 = e.deltaY * zoomRate + _this.state.v2 > 1 ? e.deltaY * zoomRate + _this.state.v2 : _this.state.v2;\n        var v3 = e.deltaY * zoomRate + _this.state.v3 > 1 ? e.deltaY * zoomRate + _this.state.v3 : _this.state.v3;\n        var v0 = _this.state.v0 - e.deltaY * zoomRate / 2;\n        var v1 = _this.state.v1 - e.deltaY * zoomRate / 2; // console.log(\"e.deltaY * zoomRate\", e.deltaY * zoomRate)\n        // console.log(\"v0\", e.deltaY * zoomRate, v0)\n        // console.log(\"v1\", this.state.v1, v1)\n\n        _this.setState({\n          v0: v0,\n          v1: v1,\n          v2: v2,\n          v3: v3\n        });\n      }\n\n      if (e.deltaY > 0) {\n        //console.log('zoom out');\n        var _v = e.deltaY * zoomRate + _this.state.v2;\n\n        var _v2 = e.deltaY * zoomRate + _this.state.v3;\n\n        var _v3 = _this.state.v0 - e.deltaY * zoomRate / 2;\n\n        var _v4 = _this.state.v1 - e.deltaY * zoomRate / 2;\n\n        _this.setState({\n          v0: _v3,\n          v1: _v4,\n          v2: _v,\n          v3: _v2\n        });\n      }\n\n      return;\n    }\n\n    if (e.deltaY < 0) {\n      //console.log('scrolling up');\n      var _v5 = _this.state.v1 + e.deltaY;\n\n      _this.setState({\n        v1: _v5\n      });\n    }\n\n    if (e.deltaY > 0) {\n      //console.log('scrolling down');\n      var _v6 = _this.state.v1 + e.deltaY;\n\n      _this.setState({\n        v1: _v6\n      });\n    }\n\n    if (e.deltaX < 0) {\n      //console.log('scrolling left');\n      var _v7 = _this.state.v0 + e.deltaX;\n\n      _this.setState({\n        v0: _v7\n      });\n    }\n\n    if (e.deltaX > 0) {\n      //console.log('scrolling right');\n      var _v8 = _this.state.v0 + e.deltaX;\n\n      _this.setState({\n        v0: _v8\n      });\n    }\n  }; //   // Find your root SVG element\n  // var svg = document.querySelector('svg');\n  //\n  // // Create an SVGPoint for future math\n  // var pt = svg.createSVGPoint();\n  //\n  // // Get point in global SVG space\n  // function cursorPoint(evt){\n  //   pt.x = evt.clientX; pt.y = evt.clientY;\n  //   return pt.matrixTransform(svg.getScreenCTM().inverse());\n  // }\n  //\n  // svg.addEventListener('mousemove',function(evt){\n  //   var loc = cursorPoint(evt);\n  //   // Use loc.x and loc.y here\n  // },false);\n\n\n  var mouseDown = function mouseDown(e) {\n    _this.setState({\n      mousedown: true\n    });\n  };\n\n  var mouseMove = function mouseMove(e) {\n    var loc = utils.getSVGpoint(e, _this.state.v0, _this.state.v1, _this.state.v2, _this.state.v3, _this.state.width, _this.state.height); // console.log(loc.x, loc.y)\n  };\n\n  var mouseUp = function mouseUp(e) {\n    _this.setState({\n      mousedown: false\n    });\n  };\n\n  return React.createElement(\"svg\", {\n    width: _this.state.width,\n    height: _this.state.height,\n    viewBox: \"\".concat(_this.state.v0, \" \").concat(_this.state.v1, \" \").concat(_this.state.v2, \" \").concat(_this.state.v3),\n    xmlns: \"http://www.w3.org/2000/svg\",\n    onWheel: function onWheel(e) {\n      return _this.wheel(e);\n    },\n    onMouseDown: function onMouseDown(e) {\n      return _this.mouseDown(e);\n    },\n    onMouseMove: function onMouseMove(e) {\n      return _this.mouseMove(e);\n    },\n    onMouseUp: function onMouseUp(e) {\n      return _this.mouseUp(e);\n    },\n    style: {\n      border: \"1px solid #cccccc\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, _this.props.groups);\n};\n\nexport { Workplane };","map":{"version":3,"sources":["/Users/leomcelroy/Desktop/barkbeetle_js/src/Workplane.js"],"names":["React","Component","useState","utils","Workplane","width","height","v0","v1","v2","v3","mousedown","state","setState","wheel","e","preventDefault","loc","getSVGpoint","ctrlKey","zoomRate","deltaY","deltaX","mouseDown","mouseMove","mouseUp","border","props","groups"],"mappings":"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","sourcesContent":["import React, { Component, useState} from 'react';\nimport * as utils from './utils.js';\n\n\nconst Workplane = ({}) => {\n\n  const [state, setState] = useState({\n      width: 500,\n      height: 500,\n      v0: 0,\n      v1: 0,\n      v2: 500,\n      v3: 500,\n      mousedown: false,\n      //zoomDelta: 0,\n    });\n\n  const wheel = (e) => {\n    e.preventDefault();\n    let loc = utils.getSVGpoint(e, this.state.v0, this.state.v1, this.state.v2, this.state.v3 ,this.state.width, this.state.height);\n\n    if (e.ctrlKey) {\n\n      let zoomRate = 10;\n      //zooms to center now\n\n      if (e.deltaY < 0) {\n        //console.log('zoom in');\n\n        let v2 = (e.deltaY * zoomRate + this.state.v2 > 1) ? e.deltaY * zoomRate + this.state.v2 : this.state.v2;\n        let v3 = (e.deltaY * zoomRate + this.state.v3 > 1) ? e.deltaY * zoomRate + this.state.v3 : this.state.v3;\n\n        let v0 = this.state.v0 - e.deltaY * zoomRate/2;\n        let v1 = this.state.v1 - e.deltaY * zoomRate/2;\n        // console.log(\"e.deltaY * zoomRate\", e.deltaY * zoomRate)\n        // console.log(\"v0\", e.deltaY * zoomRate, v0)\n        // console.log(\"v1\", this.state.v1, v1)\n\n        this.setState({v0, v1, v2, v3})\n      }\n\n      if (e.deltaY > 0) {\n        //console.log('zoom out');\n\n        let v2 = e.deltaY * zoomRate + this.state.v2;\n        let v3 = e.deltaY * zoomRate + this.state.v3;\n\n        let v0 = this.state.v0 - e.deltaY * zoomRate/2;\n        let v1 = this.state.v1 - e.deltaY * zoomRate/2;\n\n        this.setState({v0,v1, v2, v3})\n      }\n\n      return\n    }\n\n    if (e.deltaY < 0) {\n      //console.log('scrolling up');\n\n      let v1 = this.state.v1 + e.deltaY;\n      this.setState({v1});\n    }\n    if (e.deltaY > 0) {\n      //console.log('scrolling down');\n\n      let v1 = this.state.v1 + e.deltaY;\n      this.setState({v1});\n    }\n    if (e.deltaX < 0) {\n      //console.log('scrolling left');\n\n      let v0 = this.state.v0 + e.deltaX;\n      this.setState({v0});\n    }\n    if (e.deltaX > 0) {\n      //console.log('scrolling right');\n\n      let v0 = this.state.v0 + e.deltaX;\n      this.setState({v0});\n    }\n  }\n\n//   // Find your root SVG element\n// var svg = document.querySelector('svg');\n//\n// // Create an SVGPoint for future math\n// var pt = svg.createSVGPoint();\n//\n// // Get point in global SVG space\n// function cursorPoint(evt){\n//   pt.x = evt.clientX; pt.y = evt.clientY;\n//   return pt.matrixTransform(svg.getScreenCTM().inverse());\n// }\n//\n// svg.addEventListener('mousemove',function(evt){\n//   var loc = cursorPoint(evt);\n//   // Use loc.x and loc.y here\n// },false);\n\n  const mouseDown = (e) => {\n    this.setState({\n      mousedown: true\n    });\n\n  }\n\n  const mouseMove = (e) => {\n    let loc = utils.getSVGpoint(e, this.state.v0, this.state.v1, this.state.v2, this.state.v3 ,this.state.width, this.state.height);\n\n    // console.log(loc.x, loc.y)\n  }\n\n  const mouseUp = (e) => {\n    this.setState({\n      mousedown: false\n    });\n  }\n\n  return (\n      <svg\n        width={this.state.width}\n        height={this.state.height}\n        viewBox={`${this.state.v0} ${this.state.v1} ${this.state.v2} ${this.state.v3}`}\n        xmlns={\"http://www.w3.org/2000/svg\"}\n        onWheel={(e) => this.wheel(e)}\n        onMouseDown={(e) => this.mouseDown(e)}\n        onMouseMove={(e) => this.mouseMove(e)}\n        onMouseUp={(e) => this.mouseUp(e)}\n        style={{border: \"1px solid #cccccc\"}}>\n\n          {this.props.groups}\n      </svg>\n    );\n\n}\n\nexport {Workplane}\n"]},"metadata":{},"sourceType":"module"}