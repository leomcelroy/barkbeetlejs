{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _libs = require('../../libs');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Option = function (_Component) {\n  (0, _inherits3.default)(Option, _Component);\n\n  function Option(props) {\n    (0, _classCallCheck3.default)(this, Option);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Option.__proto__ || Object.getPrototypeOf(Option)).call(this, props));\n\n    _this.state = {\n      index: -1,\n      visible: true,\n      hitState: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Option, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      this.parent().onOptionCreate(this);\n      this.setState({\n        index: this.parent().state.options.indexOf(this)\n      });\n\n      if (this.currentSelected() === true) {\n        this.parent().addOptionToValue(this, true);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.parent().onOptionDestroy(this);\n    }\n  }, {\n    key: 'parent',\n    value: function parent() {\n      return this.context.component;\n    }\n  }, {\n    key: 'currentSelected',\n    value: function currentSelected() {\n      return this.props.selected || (this.parent().props.multiple ? this.parent().state.value.indexOf(this.props.value) > -1 : this.parent().state.value === this.props.value);\n    }\n  }, {\n    key: 'currentLabel',\n    value: function currentLabel() {\n      return this.props.label || (typeof this.props.value === 'string' || typeof this.props.value === 'number' ? this.props.value : '');\n    }\n  }, {\n    key: 'itemSelected',\n    value: function itemSelected() {\n      if (Object.prototype.toString.call(this.parent().state.selected) === '[object Object]') {\n        return this === this.parent().state.selected;\n      } else if (Array.isArray(this.parent().state.selected)) {\n        return this.parent().state.selected.map(function (el) {\n          return el.props.value;\n        }).indexOf(this.props.value) > -1;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'hoverItem',\n    value: function hoverItem() {\n      if (!this.props.disabled && !this.parent().props.disabled) {\n        this.parent().setState({\n          hoverIndex: this.parent().state.options.indexOf(this)\n        });\n      }\n    }\n  }, {\n    key: 'selectOptionClick',\n    value: function selectOptionClick() {\n      if (this.props.disabled !== true && this.parent().props.disabled !== true) {\n        this.parent().onOptionClick(this);\n      }\n    }\n  }, {\n    key: 'queryChange',\n    value: function queryChange(query) {\n      // query 里如果有正则中的特殊字符，需要先将这些字符转义\n      var parsedQuery = query.replace(/(\\^|\\(|\\)|\\[|\\]|\\$|\\*|\\+|\\.|\\?|\\\\|\\{|\\}|\\|)/g, '\\\\$1');\n      var visible = new RegExp(parsedQuery, 'i').test(this.currentLabel());\n\n      if (!visible) {\n        this.parent().setState({\n          filteredOptionsCount: this.parent().state.filteredOptionsCount - 1\n        });\n      }\n\n      this.setState({\n        visible: visible\n      });\n    }\n  }, {\n    key: 'resetIndex',\n    value: function resetIndex() {\n      this.setState({\n        index: this.parent().state.options.indexOf(this)\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state = this.state,\n          visible = _state.visible,\n          index = _state.index;\n      return _react2.default.createElement(_libs.View, {\n        show: visible\n      }, _react2.default.createElement('li', {\n        style: this.style(),\n        className: this.className('el-select-dropdown__item', {\n          'selected': this.itemSelected(),\n          'is-disabled': this.props.disabled || this.parent().props.disabled,\n          'hover': this.parent().state.hoverIndex === index\n        }),\n        onMouseEnter: this.hoverItem.bind(this),\n        onClick: this.selectOptionClick.bind(this)\n      }, this.props.children || _react2.default.createElement('span', null, this.currentLabel())));\n    }\n  }]);\n  return Option;\n}(_libs.Component);\n\nvar _default = Option;\nexports.default = _default;\nOption.contextTypes = {\n  component: _libs.PropTypes.any\n};\nOption.propTypes = {\n  value: _libs.PropTypes.any.isRequired,\n  label: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  selected: _libs.PropTypes.bool,\n  disabled: _libs.PropTypes.bool\n};\n;\n\nvar _temp = function () {\n  if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n    return;\n  }\n\n  __REACT_HOT_LOADER__.register(Option, 'Option', 'src/select/Option.jsx');\n\n  __REACT_HOT_LOADER__.register(_default, 'default', 'src/select/Option.jsx');\n}();\n\n;","map":null,"metadata":{},"sourceType":"script"}