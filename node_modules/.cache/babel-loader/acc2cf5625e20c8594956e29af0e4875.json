{"ast":null,"code":"import * as mjs from 'makerjs';\nimport * as s2p from 'shape2path';\nimport * as svgson from 'svgson';\nimport * as utils from './utils.js';\n\nvar uploadSVG = function uploadSVG(e) {\n  //helper function\n  var replaceWithPath = function replaceWithPath(child) {\n    //TODO: why cant I put this in a different file\n    //console.log(\"child\", child);\n    if (child.name === \"g\") {\n      return child.children.map(function (grandchild) {\n        return replaceWithPath(grandchild);\n      });\n    }\n\n    if (child.name === \"rectangle\") {\n      var x;\n      var y;\n      var width;\n      var height;\n      var rx;\n      var ry;\n      var temp = s2p.rect({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        rx: rx,\n        ry: ry\n      });\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"circle\") {\n      var cx;\n      var cy;\n      var r;\n\n      var _temp = s2p.rect({\n        cx: cx,\n        cy: cy,\n        r: r\n      });\n\n      return mjs.importer.fromSVGPathData(_temp);\n    }\n\n    if (child.name === \"ellipse\") {\n      var _cx;\n\n      var _cy;\n\n      var _rx;\n\n      var _ry;\n\n      var _temp2 = s2p.ellipse({\n        cx: _cx,\n        cy: _cy,\n        rx: _rx,\n        ry: _ry\n      });\n\n      return mjs.importer.fromSVGPathData(_temp2);\n    }\n\n    if (child.name === \"polygon\") {\n      var points;\n\n      var _temp3 = s2p.polygon({\n        points: points\n      });\n\n      return mjs.importer.fromSVGPathData(_temp3);\n    }\n\n    if (child.name === \"polyline\") {\n      var _points;\n\n      var _temp4 = s2p.polyline({\n        points: _points\n      });\n\n      return mjs.importer.fromSVGPathData(_temp4);\n    }\n\n    if (child.name === \"line\") {\n      var x1;\n      var x2;\n      var y1;\n      var y2;\n\n      var _temp5 = s2p.line({\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      });\n\n      return mjs.importer.fromSVGPathData(_temp5);\n    }\n\n    if (child.name === \"path\") {\n      var makerjsPath = mjs.importer.fromSVGPathData(child.attributes.d);\n      return makerjsPath;\n    }\n  }; //main event\n\n\n  var files = e.target.files;\n  var file = files[0];\n  var reader = new FileReader();\n\n  reader.onload = function (event) {\n    var text = event.target.result;\n    svgson.parse(text).then(function (json) {\n      var svg = json.children.map(function (child) {\n        return replaceWithPath(child);\n      });\n      svg = svg.flat(1); //TODO: what does the argument do again?\n      //TODO: update state to have makerjs models\n      //console.log(\"svg\", svg);\n\n      var models = {};\n      svg.forEach(function (shape) {\n        models[utils.makeID()] = shape;\n      }); //console.log(\"models\", models);\n      //ultimately I will set state of app\n    });\n  };\n\n  reader.readAsText(file);\n};\n\nexport { uploadSVG };","map":{"version":3,"sources":["/Users/leomcelroy/Desktop/barkbeetle_js/src/uploadSVG.js"],"names":["mjs","s2p","svgson","utils","uploadSVG","e","replaceWithPath","child","name","children","map","grandchild","x","y","width","height","rx","ry","temp","rect","importer","fromSVGPathData","cx","cy","r","ellipse","points","polygon","polyline","x1","x2","y1","y2","line","makerjsPath","attributes","d","files","target","file","reader","FileReader","onload","event","text","result","parse","then","json","svg","flat","models","forEach","shape","makeID","readAsText"],"mappings":"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","sourcesContent":["import * as mjs from 'makerjs';\nimport * as s2p from 'shape2path';\nimport * as svgson from 'svgson';\nimport * as utils from './utils.js';\n\n\nconst uploadSVG = (e) => {\n  //helper function\n  const replaceWithPath = (child) => { //TODO: why cant I put this in a different file\n    //console.log(\"child\", child);\n\n    if (child.name === \"g\") {\n      return child.children.map(grandchild => replaceWithPath(grandchild));\n    }\n\n    if (child.name === \"rectangle\") {\n      let x;\n      let y;\n      let width;\n      let height;\n      let rx;\n      let ry;\n\n      let temp = s2p.rect({x, y, width, height, rx, ry});\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"circle\") {\n      let cx;\n      let cy;\n      let r;\n\n      let temp = s2p.rect({cx, cy, r});\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"ellipse\") {\n      let cx;\n      let cy;\n      let rx;\n      let ry;\n\n      let temp = s2p.ellipse({cx, cy, rx, ry});\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"polygon\") {\n      let points\n\n      let temp = s2p.polygon({points});\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"polyline\") {\n      let points\n\n      let temp = s2p.polyline({points});\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"line\") {\n      let x1;\n      let x2;\n      let y1;\n      let y2;\n\n      let temp = s2p.line({x1, x2, y1, y2});\n      return mjs.importer.fromSVGPathData(temp);\n    }\n\n    if (child.name === \"path\") {\n      let makerjsPath = mjs.importer.fromSVGPathData(child.attributes.d);\n      return makerjsPath;\n    }\n  }\n\n  //main event\n  let files = e.target.files;\n  let file = files[0];\n\n  var reader = new FileReader();\n\n  reader.onload = (event) => {\n    let text = event.target.result;\n\n    svgson.parse(text).then((json) => {\n      let svg = json.children.map(child => {\n        return replaceWithPath(child);\n      });\n\n      svg = svg.flat(1); //TODO: what does the argument do again?\n\n      //TODO: update state to have makerjs models\n      //console.log(\"svg\", svg);\n      let models = {};\n\n      svg.forEach(shape => {\n        models[utils.makeID()] = shape;\n      })\n\n      //console.log(\"models\", models);\n\n      //ultimately I will set state of app\n    });\n  };\n\n  reader.readAsText(file);\n}\n\nexport {uploadSVG};\n"]},"metadata":{},"sourceType":"module"}