{"version":3,"sources":["webpack://ReactSVGPanZoom/webpack/universalModuleDefinition","webpack://ReactSVGPanZoom/webpack/bootstrap","webpack://ReactSVGPanZoom/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactSVGPanZoom/./src/constants.js","webpack://ReactSVGPanZoom/external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://ReactSVGPanZoom/./src/features/common.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/applyToPoint.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromObject.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/identity.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/inverse.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/utils.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/isAffineMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/translate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/transform.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/rotate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/scale.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/shear.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/skew.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/toString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/smoothMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTriangles.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromDefinition.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/index.js","webpack://ReactSVGPanZoom/./src/features/zoom.js","webpack://ReactSVGPanZoom/./src/features/pan.js","webpack://ReactSVGPanZoom/./src/features/miniature.js","webpack://ReactSVGPanZoom/./src/migration-tips.js","webpack://ReactSVGPanZoom/./src/viewer.js","webpack://ReactSVGPanZoom/./src/events/viewer-event.js","webpack://ReactSVGPanZoom/./src/features/interactions.js","webpack://ReactSVGPanZoom/./src/utils/calculateBox.js","webpack://ReactSVGPanZoom/./src/utils/RandomUID.js","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature.jsx","webpack://ReactSVGPanZoom/./src/index.js","webpack://ReactSVGPanZoom/./src/utils/is.js","webpack://ReactSVGPanZoom/./src/events/event-factory.js","webpack://ReactSVGPanZoom/./src/events/viewer-mouse-event.js","webpack://ReactSVGPanZoom/./src/events/viewer-touch-event.js","webpack://ReactSVGPanZoom/./src/utils/mapRange.js","webpack://ReactSVGPanZoom/./src/features/interactions-touch.js","webpack://ReactSVGPanZoom/./src/ui/cursor-polyfill.js","webpack://ReactSVGPanZoom/./src/ui/border-gradient.js","webpack://ReactSVGPanZoom/./src/utils/getDisplayName.js","webpack://ReactSVGPanZoom/./src/ui/selection.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-cursor.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-pan.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-in.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-out.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-fit.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar-button.jsx","webpack://ReactSVGPanZoom/./src/ui/detect-touch.js","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-toggle-button.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/icon-arrow.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-mask.jsx","webpack://ReactSVGPanZoom/./src/uncontrolled-viewer.js"],"names":["MODE_IDLE","MODE_PANNING","MODE_ZOOMING","TOOL_AUTO","TOOL_NONE","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","POSITION_NONE","POSITION_TOP","POSITION_RIGHT","POSITION_BOTTOM","POSITION_LEFT","ACTION_ZOOM","ACTION_PAN","ALIGN_CENTER","ALIGN_LEFT","ALIGN_RIGHT","ALIGN_TOP","ALIGN_BOTTOM","INITIAL_VALUE","getDefaultValue","viewerWidth","viewerHeight","SVGWidth","SVGHeight","scaleFactorMin","scaleFactorMax","set","version","mode","focus","pinchPointDistance","prePinchMode","startX","startY","endX","endY","miniatureOpen","lastAction","value","change","action","Object","assign","freeze","isValueValid","hasOwnProperty","getSVGPoint","viewerX","viewerY","matrix","inverseMatrix","x","y","decompose","scaleFactor","a","translationX","e","translationY","f","setFocus","setViewerSize","setSVGSize","setZoomLevels","setPointOnViewerCenter","SVGPointX","SVGPointY","zoomLevel","reset","resetMode","lessThanScaleFactorMin","d","moreThanScaleFactorMax","isZoomLevelGoingOutOfBounds","limitZoomLevel","scaleLevel","Math","max","min","zoom","fitSelection","selectionSVGPointX","selectionSVGPointY","selectionWidth","selectionHeight","scaleX","scaleY","fitToViewer","SVGAlignX","SVGAlignY","scaleMatrix","translationMatrix","remainderY","round","remainderX","zoomOnViewerCenter","SVGPoint","startZooming","updateZooming","Error","stopZooming","props","start","end","abs","box","width","height","pan","SVGDeltaX","SVGDeltaY","panLimit","undefined","x1","y1","x2","y2","moveX","moveY","startPanning","updatePanning","deltaX","deltaY","nextValue","stopPanning","autoPanIfNeeded","openMiniature","closeMiniature","github_base","doc_v1_to_v2","doc_v2_to_v3","tipNoViewer","console","error","tipControlledComponent","tipDeprecatedMiniatureProps","tipDeprecateToolbarProps","printMigrationTipsRelatedToProps","tool","miniaturePosition","miniatureBackground","miniatureWidth","miniatureHeight","toolbarPosition","ReactSVGPanZoom","context","children","ViewerDOM","state","pointerX","pointerY","defaultValue","autoPanLoop","bind","process","prevProps","getValue","needUpdate","prevSVGWidth","prevSVGHeight","setValue","autoPanIsRunning","requestAnimationFrame","onChangeValue","onZoom","onPan","event","indexOf","getTool","target","eventsHandler","click","onClick","dblclick","onDoubleClick","mousemove","onMouseMove","mouseup","onMouseUp","mousedown","onMouseDown","touchstart","onTouchStart","touchmove","onTouchMove","touchend","onTouchEnd","touchcancel","onTouchCancel","onEventHandler","type","coords","CustomToolbar","customToolbar","CustomMiniature","customMiniature","panningWithToolAuto","cursor","blockChildEvents","touchAction","detectPinchGesture","style","display","position","className","handleViewerEvent","getBoundingClientRect","left","top","clientX","clientY","setState","background","pointerEvents","SVGBackground","SVGStyle","detectAutoPan","toolbarProps","onChangeTool","miniatureProps","React","Component","propTypes","PropTypes","number","isRequired","oneOfType","object","shape","oneOf","bool","b","c","func","string","detectWheel","preventPanOutside","scaleFactorOnWheel","modifierKeys","array","disableDoubleClickZoomWithToolAuto","element","propName","componentName","prop","types","Children","count","join","defaultProps","disableZoomWithToolAuto","Toolbar","Miniature","ViewerEvent","originalEvent","SVGViewer","preventDefault","stopPropagation","_cacheDecomposedValue","forceExit","buttons","modifierKeysReducer","current","modifierKey","getModifierState","modifierKeyActive","reduce","onWheel","delta","onMouseEnterOrLeave","onInterval","calculateBox","uid","nextUID","RandomUID","WrappedComponent","displayName","handleChangeTool","handleFit","isHorizontal","transform","right","bottom","backgroundColor","borderRadius","flexDirection","padding","ratio","zoomToFit","overflow","outline","transition","centerTranslation","Viewer","isNullOrUndefined","eventType","ViewerMouseEvent","ViewerTouchEvent","_cachePoint","rect","point","_cachePoints","touchesToPoints","touches","_cacheChangedPoints","changedTouches","points","i","length","touch","push","identifier","mapRange","low1","high1","low2","high2","hasPinchPointDistance","onMultiTouch","sqrt","pow","previousPointDistance","svgPoint","distanceFactor","cancelable","isMultiTouch","shouldResetPinchPointDistance","getTouchPosition","getNextValue","nextValueFn","touchPosition","needPrefix","userAgent","navigator","toLowerCase","isFirefox","isWebkit","prefixID","BorderGradient","direction","_uid","gradientID","maskID","stroke","fill","mask","getDisplayName","name","Selection","IconCursor","IconPan","IconZoomIn","IconZoomOut","IconFit","ToolbarButton","hover","margin","color","active","border","title","isTouchDevice","window","maxTouchPoints","MiniatureToggleButton","IconArrow","open","MiniatureMask","opacity","UncontrolledReactSVGPanZoom","defaultTool","changeTool","changeValue"],"mappings":"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O;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;;;AClB6C;;AAE7C;AACA;AACA,kBAAkB,OAAO;AACzB,YAAY,QAAQ;AACpB;;AAEO;AACP,SAAS,QAAQ;AACjB;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;;;ACtBA;AACA;AACA,cAAc,OAAO;AACrB,oBAAoB,OAAO;AAC3B,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA;AACA,oBAAoB,SAAS;AAC7B,aAAa,OAAO;AACpB;AACO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B,aAAa,OAAO;AACpB;AACO;AACP;AACA;;;AC3CqC;AACE;AACA;;AAEvC,OAAO,eAAe;AACtB;AACA;AACA,iBAAiB,OAAO;AACxB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,WAAW,QAAQ,WAAW;AACpC;AACA;;AAEA,SAAS,SAAS;AAClB,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,aAAa,OAAO;AACpB;AACO;AACP;AACA;;;AC3CqC;;AAErC;AACA;AACA,cAAc,OAAO;AACrB,qBAAqB,OAAO;AAC5B,aAAa,OAAO;AACpB;AACO;AACP,MAAM,WAAW;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClBA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA,OAAO,MAAM;;AAEb;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,aAAa,OAAO;AACpB;AACO;AACP;AACA;;;AC5BA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO;AACP,SAAS,iBAAQ;AACjB;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO;AACP,SAAS,iBAAQ;AACjB;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO,SAAS,iBAAQ;AACxB,mBAAmB,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS;AACxF;;;ACzBA;AACA;AACA,kBAAkB,OAAO;AACzB,uBAAuB,OAAO;AAC9B,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfmC;AACI;AACM;;AAE7C;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,OAAO;AACzB,qBAAqB,SAAS;;AAE9B;AACA,SAAS,YAAY;AACrB;;;ACpDyC;AACF;AACR;AACK;AACJ;AACD;;AAE/B;AACA;AACA,yCAAyC,SAAS;AAClD,aAAa,SAAS;AACtB;AACA;AACA;AACA,KAAK,+CAA+C;AACpD,KAAK,oCAAoC;AACzC,KAAK,8BAA8B;AACnC,KAAK,4CAA4C;AACjD,KAAK,2BAA2B;AAChC,KAAK,4BAA4B;AACjC,KAAK;AACL;AACA;AACA;AACA,KAAK,qCAAqC;AAC1C,KAAK,uCAAuC;AAC5C,KAAK,qCAAqC;AAC1C,KAAK,8CAA8C;AACnD,KAAK,0CAA0C;AAC/C,KAAK,wCAAwC;AAC7C,KAAK;AACL;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B,SAAS;AACT;AACA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;;AAEhD,eAAe,SAAS;;AAExB;AACA;;AAEA,uCAAuC,KAAK;;AAE5C,eAAe,KAAK;;AAEpB;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA,eAAe,SAAS;;AAExB;AACA;AACA,eAAe,OAAO;;AAEtB;AACA;AACA,eAAe,OAAO;;AAEtB;AACA;AACA,eAAe,KAAK;;AAEpB;AACA;AACA;AACA;AACA;;;AC3FA;;AAEA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yBAAyB,EAAE;AACjF,sDAAsD,yBAAyB,EAAE;AACjF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yBAAyB,EAAE;AACjF,sDAAsD,yBAAyB,EAAE;AACjF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B,WAAW;AACxC,gCAAgC;AAChC;AACA,iBAAiB,mDAAmD;AACpE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA,4BAA4B,+BAA+B;AAC3D,4BAA4B,6BAA6B;AACzD,6BAA6B,UAAU;AACvC,kCAAkC,iBAAiB;AACnD,8BAA8B,oBAAoB;AAClD,kCAAkC,6DAA6D;AAC/F,6BAA6B,mBAAmB;;AAEhD;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,iCAAiC;AACxD;;AAEA;AACA;;AAEA,gCAAgC,QAAQ;;AAExC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,QAAQ;;AAE3C;AACA;AACA,gDAAgD;AAChD,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAKE;;AAEa;AACf;AACA;AACA,CAAC,EAAC;;;AC16C4D;;AAE9D;AACA;AACA;AACA,2BAA2B,OAAO;AAClC,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,KAAK,qCAAqC;AAC1C,KAAK,8BAA8B;AACnC,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACO;AACP,SAAS,SAAK;AACd;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8B;AACF;AACA;AACF;AACD;AACO;AACR;AACD;AACA;AACD;AACI;A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","file":"react-svg-pan-zoom.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactSVGPanZoom\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"ReactSVGPanZoom\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export const MODE_IDLE = 'idle';\nexport const MODE_PANNING = 'panning';\nexport const MODE_ZOOMING = 'zooming';\n\nexport const TOOL_AUTO = 'auto';\nexport const TOOL_NONE = 'none';\nexport const TOOL_PAN = 'pan';\nexport const TOOL_ZOOM_IN = 'zoom-in';\nexport const TOOL_ZOOM_OUT = 'zoom-out';\n\nexport const POSITION_NONE = 'none';\nexport const POSITION_TOP = 'top';\nexport const POSITION_RIGHT = 'right';\nexport const POSITION_BOTTOM = 'bottom';\nexport const POSITION_LEFT = 'left';\n\nexport const ACTION_ZOOM = 'zoom';\nexport const ACTION_PAN = 'pan';\n\nexport const ALIGN_CENTER = 'center';\nexport const ALIGN_LEFT = 'left';\nexport const ALIGN_RIGHT = 'right';\nexport const ALIGN_TOP = 'top';\nexport const ALIGN_BOTTOM = 'bottom';\n\nexport const INITIAL_VALUE = {}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import {TOOL_NONE, MODE_IDLE} from '../constants';\nimport {\n  identity,\n  fromObject,\n  inverse,\n  applyToPoint,\n  transform,\n  translate,\n  scale\n} from 'transformation-matrix';\n\n/**\n * Obtain default value\n * @returns {Object}\n */\nexport function getDefaultValue(viewerWidth, viewerHeight, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax) {\n  return set({}, {\n    ...identity(),\n    version: 2,\n    mode: MODE_IDLE,\n    focus: false,\n    pinchPointDistance: null,\n    prePinchMode: null,\n    viewerWidth,\n    viewerHeight,\n    SVGWidth,\n    SVGHeight,\n    scaleFactorMin,\n    scaleFactorMax,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    miniatureOpen: true,\n    lastAction: null,\n  });\n}\n\n/**\n * Change value\n * @param value\n * @param change\n * @param action\n * @returns {Object}\n */\nexport function set(value, change, action = null) {\n  value = Object.assign({}, value, change, {lastAction: action});\n  return Object.freeze(value);\n}\n\n/**\n * value valid check\n * @param value\n */\nexport function isValueValid(value) {\n  return value !== null\n    && typeof value === 'object'\n    && value.hasOwnProperty('version');\n}\n\n/**\n * Export x,y coords relative to SVG\n * @param value\n * @param viewerX\n * @param viewerY\n * @returns {*|{x, y}|{x: number, y: number}}\n */\nexport function getSVGPoint(value, viewerX, viewerY) {\n  let matrix = fromObject(value);\n\n  let inverseMatrix = inverse(matrix);\n  return applyToPoint(inverseMatrix, {x: viewerX, y: viewerY});\n}\n\n/**\n * Decompose matrix from value\n * @param value\n * @returns {{scaleFactor: number, translationX: number, translationY: number}}\n */\nexport function decompose(value) {\n  let matrix = fromObject(value);\n\n  return {\n    scaleFactor: matrix.a,\n    translationX: matrix.e,\n    translationY: matrix.f\n  }\n}\n\n/**\n *\n * @param value\n * @param focus\n * @returns {Object}\n */\nexport function setFocus(value, focus) {\n  return set(value, {focus});\n}\n\n\n/**\n *\n * @param value\n * @param viewerWidth\n * @param viewerHeight\n * @returns {Object}\n */\nexport function setViewerSize(value, viewerWidth, viewerHeight) {\n  return set(value, {viewerWidth, viewerHeight});\n}\n\n/**\n *\n * @param value\n * @param SVGWidth\n * @param SVGHeight\n * @returns {Object}\n */\nexport function setSVGSize(value, SVGWidth, SVGHeight) {\n  return set(value, {SVGWidth, SVGHeight});\n}\n\n/**\n *\n * @param value\n * @param scaleFactorMin\n * @param scaleFactorMax\n * @returns {Object}\n */\nexport function setZoomLevels(value, scaleFactorMin, scaleFactorMax) {\n  return set(value, {scaleFactorMin, scaleFactorMax});\n}\n\n/**\n *\n * @param value\n * @param SVGPointX\n * @param SVGPointY\n * @param zoomLevel\n * @returns {Object}\n */\nexport function setPointOnViewerCenter(value, SVGPointX, SVGPointY, zoomLevel) {\n  let {viewerWidth, viewerHeight} = value;\n\n  let matrix = transform(\n    translate(-SVGPointX + viewerWidth / 2, -SVGPointY + viewerHeight / 2),   //4\n    translate(SVGPointX, SVGPointY),                                          //3\n    scale(zoomLevel, zoomLevel),                                              //2\n    translate(-SVGPointX, -SVGPointY)                                         //1\n  );\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n  });\n}\n\n/**\n *\n * @param value\n * @returns {Object}\n */\nexport function reset(value) {\n  return set(value, {\n    mode: MODE_IDLE,\n    ...identity()\n  });\n}\n\n/**\n *\n * @param value\n * @returns {Object}\n */\nexport function resetMode(value) {\n  return set(value, {\n    mode: MODE_IDLE,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  })\n}\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nexport function fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n","/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nexport function fromString (string) {\n  let parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n","/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  let { a, b, c, d, e, f } = matrix\n\n  let denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","import { isNumeric, isObject } from './utils'\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nexport function isAffineMatrix (object) {\n  return isObject(object) &&\n    object.hasOwnProperty('a') &&\n    isNumeric(object.a) &&\n    object.hasOwnProperty('b') &&\n    isNumeric(object.b) &&\n    object.hasOwnProperty('c') &&\n    isNumeric(object.c) &&\n    object.hasOwnProperty('d') &&\n    isNumeric(object.d) &&\n    object.hasOwnProperty('e') &&\n    isNumeric(object.e) &&\n    object.hasOwnProperty('f') &&\n    isNumeric(object.f)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of affine matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default:\n      let [m1, m2, ...rest] = matrices\n      let m = multiply(m1, m2)\n      return transform(m, ...rest)\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  let cosAngle = cos(angle)\n  let sinAngle = sin(angle)\n  let rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","import { isUndefined } from './utils'\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @returns {Matrix} Affine Matrix\n */\nexport function scale (sx, sy = undefined) {\n  if (isUndefined(sy)) sy = sx\n  return {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n}\n","/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n","/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n","/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nexport function smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n","import { inverse } from './inverse'\nimport { transform } from './transform'\nimport { smoothMatrix } from './smoothMatrix'\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nexport function fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  let px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  let py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  let px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  let py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  let qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  let qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  let qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  let qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  let rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  let ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  let rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  let ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  let r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  let r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  let inverseR1 = inverse(r1)\n  let affineMatrix = transform([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return smoothMatrix(affineMatrix)\n}\n","import { fromObject } from './fromObject'\nimport { translate } from './translate'\nimport { scale } from './scale'\nimport { rotateDEG } from './rotate'\nimport { skewDEG } from './skew'\nimport { shear } from './shear'\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, sx: 50, sy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nexport function fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return fromObject(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return translate(descriptor.tx, descriptor.ty)\n\n        return translate(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return scale(descriptor.sx, descriptor.sy)\n\n        return scale(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return rotateDEG(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return rotateDEG(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return shear(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n","// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { parse } from './fromTransformAttribute.autogenerated'\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {Matrix[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nexport function fromTransformAttribute (transformString) {\n  return parse(transformString)\n}\n","export * from './applyToPoint'\nexport * from './fromObject'\nexport * from './fromString'\nexport * from './identity'\nexport * from './inverse'\nexport * from './isAffineMatrix'\nexport * from './rotate'\nexport * from './scale'\nexport * from './shear'\nexport * from './skew'\nexport * from './toString'\nexport * from './transform'\nexport * from './translate'\nexport * from './fromTriangles'\nexport * from './smoothMatrix'\nexport * from './fromDefinition'\nexport * from './fromTransformAttribute'\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\n\nimport {\n  ACTION_ZOOM, MODE_IDLE, MODE_ZOOMING,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM\n} from '../constants';\nimport {set, getSVGPoint} from './common';\nimport calculateBox from '../utils/calculateBox';\n\nfunction lessThanScaleFactorMin (value, scaleFactor) {\n  return value.scaleFactorMin && (value.d * (scaleFactor)) <= value.scaleFactorMin;\n}\n\nfunction moreThanScaleFactorMax (value, scaleFactor) {\n  return value.scaleFactorMax && (value.d * scaleFactor) >= value.scaleFactorMax;\n}\n\nexport function isZoomLevelGoingOutOfBounds(value, scaleFactor) {\n  return lessThanScaleFactorMin(value, scaleFactor) && scaleFactor < 1 || moreThanScaleFactorMax(value, scaleFactor) && scaleFactor > 1;\n}\n\nexport function limitZoomLevel(value, matrix) {\n  let scaleLevel = matrix.a;\n\n  if(value.scaleFactorMin != null) {\n    // limit minimum zoom\n    scaleLevel = Math.max(scaleLevel, value.scaleFactorMin);\n  }\n\n  if(value.scaleFactorMax != null) {\n    // limit maximum zoom\n    scaleLevel = Math.min(scaleLevel, value.scaleFactorMax);\n  }\n\n  return set(matrix, {\n    a: scaleLevel,\n    d: scaleLevel\n  });\n}\n\nexport function zoom(value, SVGPointX, SVGPointY, scaleFactor) {\n  if (isZoomLevelGoingOutOfBounds(value, scaleFactor)) {\n      // Do not change translation and scale of value\n      return value;\n  }\n\n  const matrix = transform(\n    fromObject(value),\n    translate(SVGPointX, SVGPointY),\n    scale(scaleFactor, scaleFactor),\n    translate(-SVGPointX, -SVGPointY)\n  );\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function fitSelection(value, selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n  let {viewerWidth, viewerHeight} = value;\n\n  let scaleX = viewerWidth / selectionWidth;\n  let scaleY = viewerHeight / selectionHeight;\n\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  const matrix = transform(\n    scale(scaleLevel, scaleLevel),                      //2\n    translate(-selectionSVGPointX, -selectionSVGPointY) //1\n  );\n\n  if(isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\n    // Do not allow scale and translation\n    return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    });\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function fitToViewer(value, SVGAlignX=ALIGN_LEFT, SVGAlignY=ALIGN_TOP) {\n  let {viewerWidth, viewerHeight, SVGWidth, SVGHeight} = value;\n\n  let scaleX = viewerWidth / SVGWidth;\n  let scaleY = viewerHeight / SVGHeight;\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  const scaleMatrix = scale(scaleLevel, scaleLevel);\n  let translationMatrix = translate(0, 0);\n\n  // after fitting, SVG and the viewer will match in width (1) or in height (2)\n  if (scaleX < scaleY) {\n    //(1) match in width, meaning scaled SVGHeight <= viewerHeight\n    let remainderY = viewerHeight - scaleX * SVGHeight;\n\n    if (SVGAlignY === ALIGN_CENTER)\n      translationMatrix = translate(0, Math.round(remainderY / 2));\n    if (SVGAlignY === ALIGN_BOTTOM)\n      translationMatrix = translate(0, remainderY);\n  }\n  else {\n    //(2) match in height, meaning scaled SVGWidth <= viewerWidth\n    let remainderX = viewerWidth - scaleY * SVGWidth;\n\n    if (SVGAlignX === ALIGN_CENTER)\n      translationMatrix = translate(Math.round(remainderX / 2), 0);\n    if (SVGAlignX === ALIGN_RIGHT)\n      translationMatrix = translate(remainderX, 0);\n  }\n\n  const matrix = transform(\n    translationMatrix, //2\n    scaleMatrix        //1\n  );\n\n  if (isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\n    // Do not allow scale and translation\n    return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    });\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function zoomOnViewerCenter(value, scaleFactor) {\n  let {viewerWidth, viewerHeight} = value;\n  let SVGPoint = getSVGPoint(value, viewerWidth / 2, viewerHeight / 2);\n  return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor);\n}\n\nexport function startZooming(value, viewerX, viewerY) {\n  return set(value, {\n    mode: MODE_ZOOMING,\n    startX: viewerX,\n    startY: viewerY,\n    endX: viewerX,\n    endY: viewerY\n  });\n}\n\nexport function updateZooming(value, viewerX, viewerY) {\n  if (value.mode !== MODE_ZOOMING) throw new Error('update selection not allowed in this mode ' + value.mode);\n\n  return set(value, {\n    endX: viewerX,\n    endY: viewerY\n  });\n}\n\nexport function stopZooming(value, viewerX, viewerY, scaleFactor, props) {\n  let {startX, startY, endX, endY} = value;\n\n  let start = getSVGPoint(value, startX, startY);\n  let end = getSVGPoint(value, endX, endY);\n\n  if (Math.abs(startX - endX) > 7 && Math.abs(startY - endY) > 7) {\n    let box = calculateBox(start, end);\n    return fitSelection(value, box.x, box.y, box.width, box.height);\n  } else {\n    let SVGPoint = getSVGPoint(value, viewerX, viewerY);\n    return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n  }\n}\n","import {ACTION_PAN, MODE_IDLE, MODE_PANNING} from '../constants';\nimport {set, getSVGPoint} from './common';\nimport {fromObject, translate, transform, applyToPoints, inverse} from 'transformation-matrix';\n\n/**\n *\n * @param value\n * @param SVGDeltaX\n * @param SVGDeltaY\n * @param panLimit\n * @returns {Object}\n */\nexport function pan(value, SVGDeltaX, SVGDeltaY, panLimit = undefined) {\n\n  let matrix = transform(\n    fromObject(value),              //2\n    translate(SVGDeltaX, SVGDeltaY) //1\n  );\n\n  // apply pan limits\n  if (panLimit) {\n    let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(matrix, [\n      {x: panLimit, y: panLimit},\n      {x: value.SVGWidth - panLimit, y: value.SVGHeight - panLimit}\n    ]);\n\n    //x limit\n    let moveX = 0;\n    if (value.viewerWidth - x1 < 0)\n      moveX = value.viewerWidth - x1;\n    else if (x2 < 0) moveX = -x2;\n\n\n    //y limit\n    let moveY = 0;\n    if (value.viewerHeight - y1 < 0)\n      moveY = value.viewerHeight - y1;\n    else if (y2 < 0) moveY = -y2;\n\n    //apply limits\n    matrix = transform(\n      translate(moveX, moveY),\n      matrix\n    )\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n  }, ACTION_PAN);\n}\n\nexport function startPanning(value, viewerX, viewerY) {\n  return set(value, {\n    mode: MODE_PANNING,\n    startX: viewerX,\n    startY: viewerY,\n    endX: viewerX,\n    endY: viewerY\n  }, ACTION_PAN);\n}\n\nexport function updatePanning(value, viewerX, viewerY, panLimit) {\n  if (value.mode !== MODE_PANNING) throw new Error('update pan not allowed in this mode ' + value.mode);\n\n  let {endX, endY} = value;\n\n  let start = getSVGPoint(value, endX, endY);\n  let end = getSVGPoint(value, viewerX, viewerY);\n\n  let deltaX = end.x - start.x;\n  let deltaY = end.y - start.y;\n\n  let nextValue = pan(value, deltaX, deltaY, panLimit);\n  return set(nextValue, {\n    mode: MODE_PANNING,\n    endX: viewerX,\n    endY: viewerY,\n  }, ACTION_PAN);\n}\n\nexport function stopPanning(value) {\n  return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    }, ACTION_PAN\n  );\n}\n\nexport function autoPanIfNeeded(value, viewerX, viewerY) {\n  let deltaX = 0;\n  let deltaY = 0;\n\n  if (viewerY <= 20) deltaY = 2;\n  if (value.viewerWidth - viewerX <= 20) deltaX = -2;\n  if (value.viewerHeight - viewerY <= 20) deltaY = -2;\n  if (viewerX <= 20) deltaX = 2;\n\n  deltaX = deltaX / value.d;\n  deltaY = deltaY / value.d;\n\n  return (deltaX === 0 && deltaY === 0) ? value : pan(value, deltaX, deltaY);\n}\n","import {set} from './common';\n\n\nexport function openMiniature(value) {\n  return set(value, {\n    miniatureOpen: true\n  });\n}\n\nexport function closeMiniature(value) {\n  return set(value, {\n    miniatureOpen: false\n  });\n}\n\n","import {isNullOrUndefined} from \"./utils/is\";\n\nconst github_base = 'https://github.com/chrvadala/react-svg-pan-zoom/blob/master'\n\nconst doc_v1_to_v2 = github_base + '/docs/migrate-from-v1-to-v2.md'\nconst doc_v2_to_v3 = github_base + '/docs/migrate-from-v2-to-v3.md'\n\nexport function tipNoViewer() {\n  console.error(`HEY! You are trying to use an older version of ReactSVGPanZoom. Please read here ${doc_v1_to_v2}`)\n}\n\nexport function tipControlledComponent() {\n  console.error(`HEY! With ReactSVGPanZoom >= 3 you MUST specify value and tool props. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function tipDeprecatedMiniatureProps(){\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the props miniaturePosition, miniatureBackground, miniatureWidth, miniatureHeight can be specified as key in the miniatureProps object. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function tipDeprecateToolbarProps(){\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the prop toolbarPosition can be specified as key in the toolbarProps object. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function printMigrationTipsRelatedToProps(props){\n  if (\n    isNullOrUndefined(props.tool) ||\n    isNullOrUndefined(props.value)\n  ) tipControlledComponent()\n\n  if (\n    !isNullOrUndefined(props.miniaturePosition) ||\n    !isNullOrUndefined(props.miniatureBackground) ||\n    !isNullOrUndefined(props.miniatureWidth) ||\n    !isNullOrUndefined(props.miniatureHeight)\n  ) tipDeprecatedMiniatureProps()\n\n\n  if (\n    !isNullOrUndefined(props.toolbarPosition)\n  ) tipDeprecateToolbarProps()\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {toSVG} from 'transformation-matrix';\n//events\nimport eventFactory from './events/event-factory';\n//features\nimport {pan} from './features/pan';\nimport {\n  getDefaultValue,\n  isValueValid,\n  reset,\n  setPointOnViewerCenter,\n  setSVGSize,\n  setViewerSize,\n  setZoomLevels\n} from './features/common';\nimport {\n  onDoubleClick,\n  onInterval,\n  onMouseDown,\n  onMouseEnterOrLeave,\n  onMouseMove,\n  onMouseUp,\n  onWheel\n} from './features/interactions';\nimport {onTouchCancel, onTouchEnd, onTouchMove, onTouchStart} from './features/interactions-touch';\n\nimport {fitSelection, fitToViewer, zoom, zoomOnViewerCenter} from './features/zoom';\nimport {closeMiniature, openMiniature} from './features/miniature';\n//ui\nimport cursorPolyfill from './ui/cursor-polyfill';\nimport BorderGradient from './ui/border-gradient';\nimport Selection from './ui/selection';\nimport Toolbar from './ui-toolbar/toolbar';\nimport detectTouch from './ui/detect-touch';\nimport Miniature from './ui-miniature/miniature'\n\nimport {\n  ACTION_PAN,\n  ACTION_ZOOM,\n  ALIGN_BOTTOM,\n  ALIGN_CENTER,\n  ALIGN_LEFT,\n  ALIGN_RIGHT,\n  ALIGN_TOP,\n  MODE_IDLE,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  POSITION_BOTTOM,\n  POSITION_LEFT,\n  POSITION_NONE,\n  POSITION_RIGHT,\n  POSITION_TOP,\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT\n} from './constants';\nimport {printMigrationTipsRelatedToProps} from \"./migration-tips\";\n\nexport default class ReactSVGPanZoom extends React.Component {\n\n  constructor(props, context) {\n    const {value, width: viewerWidth, height: viewerHeight, scaleFactorMin, scaleFactorMax, children} = props;\n    const {width: SVGWidth, height: SVGHeight} = children.props;\n\n    super(props, context);\n    this.ViewerDOM = null;\n    this.state = {\n      pointerX: null,\n      pointerY: null,\n      defaultValue: getDefaultValue(viewerWidth, viewerHeight, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\n    }\n    this.autoPanLoop = this.autoPanLoop.bind(this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      printMigrationTipsRelatedToProps(props)\n    }\n  }\n\n  /** React hooks **/\n  componentDidUpdate(prevProps) {\n    const value = this.getValue();\n    const props = this.props\n\n    let nextValue = value;\n    let needUpdate = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      printMigrationTipsRelatedToProps(props)\n    }\n\n    if (\n      prevProps.width !== props.width ||\n      prevProps.height !== props.height\n    ) {\n      nextValue = setViewerSize(nextValue, props.width, props.height);\n      needUpdate = true;\n    }\n\n    let {width: SVGWidth, height: SVGHeight} = props.children.props;\n    let {width: prevSVGWidth, height: prevSVGHeight} = prevProps.children.props;\n    if (\n      prevSVGWidth !== SVGWidth ||\n      prevSVGHeight !== SVGHeight\n    ) {\n      nextValue = setSVGSize(nextValue, SVGWidth, SVGHeight);\n      needUpdate = true;\n    }\n\n    if (\n      prevProps.scaleFactorMin !== props.scaleFactorMin ||\n      prevProps.scaleFactorMax !== props.scaleFactorMax\n    ) {\n      nextValue = setZoomLevels(nextValue, props.scaleFactorMin, props.scaleFactorMax);\n      needUpdate = true;\n    }\n\n    if (needUpdate) {\n      this.setValue(nextValue);\n    }\n  }\n\n  componentDidMount() {\n    this.autoPanIsRunning = true;\n    requestAnimationFrame(this.autoPanLoop);\n  }\n\n  componentWillUnmount() {\n    this.autoPanIsRunning = false;\n  }\n\n  /** ReactSVGPanZoom handlers **/\n  getValue() {\n    if (isValueValid(this.props.value)) return this.props.value\n    return this.state.defaultValue\n  }\n\n  getTool() {\n    if (this.props.tool) return this.props.tool\n    return TOOL_NONE\n  }\n\n  setValue(nextValue) {\n    let {onChangeValue, onZoom, onPan} = this.props;\n\n    if (onChangeValue) onChangeValue(nextValue);\n    if (nextValue.lastAction) {\n      if (onZoom && nextValue.lastAction === ACTION_ZOOM) onZoom(nextValue);\n      if (onPan && nextValue.lastAction === ACTION_PAN) onPan(nextValue);\n    }\n  }\n\n  /** ReactSVGPanZoom methods **/\n  pan(SVGDeltaX, SVGDeltaY) {\n    let nextValue = pan(this.getValue(), SVGDeltaX, SVGDeltaY);\n    this.setValue(nextValue);\n  }\n\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\n    let nextValue = zoom(this.getValue(), SVGPointX, SVGPointY, scaleFactor);\n    this.setValue(nextValue);\n  }\n\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n    let nextValue = fitSelection(this.getValue(), selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight);\n    this.setValue(nextValue);\n  }\n\n  fitToViewer(SVGAlignX = ALIGN_LEFT, SVGAlignY = ALIGN_TOP) {\n    let nextValue = fitToViewer(this.getValue(), SVGAlignX, SVGAlignY);\n    this.setValue(nextValue);\n  }\n\n  zoomOnViewerCenter(scaleFactor) {\n    let nextValue = zoomOnViewerCenter(this.getValue(), scaleFactor);\n    this.setValue(nextValue);\n  }\n\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n    let nextValue = setPointOnViewerCenter(this.getValue(), SVGPointX, SVGPointY, zoomLevel);\n    this.setValue(nextValue);\n  }\n\n  reset() {\n    let nextValue = reset(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  openMiniature() {\n    let nextValue = openMiniature(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  closeMiniature() {\n    let nextValue = closeMiniature(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  /** ReactSVGPanZoom internals **/\n  handleViewerEvent(event) {\n    let {props, ViewerDOM} = this;\n\n    if (!([TOOL_NONE, TOOL_AUTO].indexOf(this.getTool()) >= 0)) return;\n    if (event.target === ViewerDOM) return;\n\n    let eventsHandler = {\n      click: props.onClick,\n      dblclick: props.onDoubleClick,\n\n      mousemove: props.onMouseMove,\n      mouseup: props.onMouseUp,\n      mousedown: props.onMouseDown,\n\n      touchstart: props.onTouchStart,\n      touchmove: props.onTouchMove,\n      touchend: props.onTouchEnd,\n      touchcancel: props.onTouchCancel,\n    };\n\n    let onEventHandler = eventsHandler[event.type];\n    if (!onEventHandler) return;\n\n    onEventHandler(eventFactory(event, props.value, ViewerDOM));\n  }\n\n  autoPanLoop() {\n    let coords = {x: this.state.pointerX, y: this.state.pointerY};\n    let nextValue = onInterval(null, this.ViewerDOM, this.getTool(), this.getValue(), this.props, coords);\n    if (this.getValue() !== nextValue) {\n      this.setValue(nextValue);\n    }\n\n    if (this.autoPanIsRunning) {\n      requestAnimationFrame(this.autoPanLoop);\n    }\n  }\n\n  /** React renderer **/\n  render() {\n    let {props, state: {pointerX, pointerY}} = this;\n    let tool = this.getTool();\n    let value = this.getValue();\n    let {customToolbar: CustomToolbar, customMiniature: CustomMiniature} = props;\n\n    let panningWithToolAuto = tool === TOOL_AUTO\n      && value.mode === MODE_PANNING\n      && value.startX !== value.endX\n      && value.startY !== value.endY;\n\n    let cursor;\n\n    if (tool === TOOL_PAN)\n      cursor = cursorPolyfill(value.mode === MODE_PANNING ? 'grabbing' : 'grab');\n\n    if (tool === TOOL_ZOOM_IN)\n      cursor = cursorPolyfill('zoom-in');\n\n    if (tool === TOOL_ZOOM_OUT)\n      cursor = cursorPolyfill('zoom-out');\n\n    if (panningWithToolAuto)\n      cursor = cursorPolyfill('grabbing');\n\n    let blockChildEvents = [TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT].indexOf(tool) >= 0;\n    blockChildEvents = blockChildEvents || panningWithToolAuto;\n\n    const touchAction = (this.props.detectPinchGesture || [TOOL_PAN, TOOL_AUTO].indexOf(this.getTool()) !== -1) ? 'none' : undefined\n\n    const style = {display: 'block', cursor, touchAction};\n\n    return (\n      <div\n        style={{position: \"relative\", width: value.viewerWidth, height: value.viewerHeight, ...props.style}}\n        className={this.props.className}>\n        <svg\n          ref={ViewerDOM => this.ViewerDOM = ViewerDOM}\n          width={value.viewerWidth}\n          height={value.viewerHeight}\n          style={style}\n\n          onMouseDown={event => {\n            let nextValue = onMouseDown(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onMouseMove={event => {\n            let {left, top} = this.ViewerDOM.getBoundingClientRect();\n            let x = event.clientX - Math.round(left);\n            let y = event.clientY - Math.round(top);\n\n            let nextValue = onMouseMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props, {x, y});\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.setState({pointerX: x, pointerY: y});\n            this.handleViewerEvent(event);\n          }}\n          onMouseUp={event => {\n            let nextValue = onMouseUp(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n\n          onClick={event => {\n            this.handleViewerEvent(event)\n          }}\n          onDoubleClick={event => {\n            let nextValue = onDoubleClick(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n\n          onWheel={event => {\n            let nextValue = onWheel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n\n          onMouseEnter={event => {\n            if (detectTouch()) return;\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n          onMouseLeave={event => {\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n\n          onTouchStart={event => {\n            let nextValue = onTouchStart(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchMove={event => {\n            let nextValue = onTouchMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchEnd={event => {\n            let nextValue = onTouchEnd(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchCancel={event => {\n            let nextValue = onTouchCancel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}>\n\n          <rect\n            fill={props.background}\n            x={0}\n            y={0}\n            width={value.viewerWidth}\n            height={value.viewerHeight}\n            style={{pointerEvents: \"none\"}}\n          />\n\n          <g\n            transform={toSVG(value)}\n            style={blockChildEvents ? {pointerEvents: \"none\"} : {}}>\n            <rect\n              fill={this.props.SVGBackground}\n              style={this.props.SVGStyle}\n              x={0}\n              y={0}\n              width={value.SVGWidth}\n              height={value.SVGHeight}/>\n            <g>\n              {props.children.props.children}\n            </g>\n          </g>\n\n          {!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0 && props.detectAutoPan && value.focus) ? null : (\n            <g style={{pointerEvents: \"none\"}}>\n              {!(pointerY <= 20) ? null :\n                <BorderGradient direction={POSITION_TOP} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.viewerWidth - pointerX <= 20) ? null :\n                <BorderGradient direction={POSITION_RIGHT} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.viewerHeight - pointerY <= 20) ? null :\n                <BorderGradient direction={POSITION_BOTTOM} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.focus && pointerX <= 20) ? null :\n                <BorderGradient direction={POSITION_LEFT} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n            </g>\n          )}\n\n          {!(value.mode === MODE_ZOOMING) ? null :\n            <Selection startX={value.startX} startY={value.startY} endX={value.endX} endY={value.endY}/>\n          }\n        </svg>\n\n        {props.toolbarProps.position === POSITION_NONE ? null :\n          <CustomToolbar\n            {...this.props.toolbarProps}\n            value={value}\n            onChangeValue={value => this.setValue(value)}\n            tool={tool}\n            onChangeTool={tool => this.props.onChangeTool(tool)}\n          />}\n\n        {props.miniatureProps.position === POSITION_NONE ? null :\n          <CustomMiniature\n            {...this.props.miniatureProps}\n            value={value}\n            onChangeValue={value => this.setValue(value)}\n            SVGBackground={this.props.SVGBackground}\n          >\n            {props.children.props.children}\n          </CustomMiniature>\n        }\n      </div>\n    );\n  }\n}\n\nReactSVGPanZoom.propTypes = {\n  /**************************************************************************/\n  /*  Viewer configuration                                                  */\n  /**************************************************************************/\n  //width of the viewer displayed on screen\n  width: PropTypes.number.isRequired,\n\n  //height of the viewer displayed on screen\n  height: PropTypes.number.isRequired,\n\n  //value of the viewer (current camera view)\n  value: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.shape({\n      version: PropTypes.oneOf([2]).isRequired,\n      mode: PropTypes.oneOf([MODE_IDLE, MODE_PANNING, MODE_ZOOMING]).isRequired,\n      focus: PropTypes.bool.isRequired,\n      a: PropTypes.number.isRequired,\n      b: PropTypes.number.isRequired,\n      c: PropTypes.number.isRequired,\n      d: PropTypes.number.isRequired,\n      e: PropTypes.number.isRequired,\n      f: PropTypes.number.isRequired,\n      viewerWidth: PropTypes.number.isRequired,\n      viewerHeight: PropTypes.number.isRequired,\n      SVGWidth: PropTypes.number.isRequired,\n      SVGHeight: PropTypes.number.isRequired,\n      startX: PropTypes.number,\n      startY: PropTypes.number,\n      endX: PropTypes.number,\n      endY: PropTypes.number,\n      miniatureOpen: PropTypes.bool.isRequired,\n    })\n  ]).isRequired,\n\n  //handler something changed\n  onChangeValue: PropTypes.func.isRequired,\n\n  //current active tool (TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT)\n  tool: PropTypes.oneOf([TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT]).isRequired,\n\n  //handler tool changed\n  onChangeTool: PropTypes.func.isRequired,\n\n  /**************************************************************************/\n  /* Customize style                                                        */\n  /**************************************************************************/\n\n  //background of the viewer\n  background: PropTypes.string,\n\n  //background of the svg\n  SVGBackground: PropTypes.string,\n\n  //style of the svg\n  SVGStyle: PropTypes.object,\n\n  //CSS style of the Viewer\n  style: PropTypes.object,\n\n  //className of the Viewer\n  className: PropTypes.string,\n\n\n  /**************************************************************************/\n  /* Detect events                                                          */\n  /**************************************************************************/\n\n  //perform zoom operation on mouse scroll\n  detectWheel: PropTypes.bool,\n\n  //perform PAN if the mouse is on viewer border\n  detectAutoPan: PropTypes.bool,\n\n  //perform zoom operation on pinch gesture\n  detectPinchGesture: PropTypes.bool,\n\n  //toolbar position\n  toolbarPosition: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n\n  //handler zoom level changed\n  onZoom: PropTypes.func,\n\n  //handler pan action performed\n  onPan: PropTypes.func,\n\n  //handler click\n  onClick: PropTypes.func,\n\n  //handler double click\n  onDoubleClick: PropTypes.func,\n\n  //handler mouseup\n  onMouseUp: PropTypes.func,\n\n  //handler mousemove\n  onMouseMove: PropTypes.func,\n\n  //handler mousedown\n  onMouseDown: PropTypes.func,\n\n  /**************************************************************************/\n  /* Some advanced configurations                                           */\n  /**************************************************************************/\n\n  //if disabled the user can move the image outside the viewer\n  preventPanOutside: PropTypes.bool,\n\n  //how much scale in or out\n  scaleFactor: PropTypes.number,\n\n  //how much scale in or out on mouse wheel (requires detectWheel enabled)\n  scaleFactorOnWheel: PropTypes.number,\n\n  // maximum amount of scale a user can zoom in to\n  scaleFactorMax: PropTypes.number,\n\n  // minimum amount of a scale a user can zoom out of\n  scaleFactorMin: PropTypes.number,\n\n  //modifier keys //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\n  modifierKeys: PropTypes.array,\n\n  //Turn off zoom on double click\n  disableDoubleClickZoomWithToolAuto: PropTypes.bool,\n\n  /**************************************************************************/\n  /* Miniature configurations                                                 */\n  /**************************************************************************/\n\n  //override miniature component\n  customMiniature: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  //miniature props\n  miniatureProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_RIGHT, POSITION_LEFT]),\n    background: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  }),\n\n  /**************************************************************************/\n  /* Toolbar configurations                                                 */\n  /**************************************************************************/\n\n  //override toolbar component\n  customToolbar: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  //toolbar props\n  toolbarProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n    SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n    SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n  }),\n\n  /**************************************************************************/\n  /* Children Check                                                         */\n  /**************************************************************************/\n  //accept only one node SVG\n  children: function (props, propName, componentName) {\n    // Only accept a single child, of the appropriate type\n    //credits: http://www.mattzabriskie.com/blog/react-validating-children\n    let prop = props[propName];\n    let types = ['svg'];\n    if (React.Children.count(prop) !== 1 ||\n      types.indexOf(prop.type) === -1) {\n      return new Error(\n        '`' + componentName + '` ' +\n        'should have a single child of the following types: ' +\n        ' `' + types.join('`, `') + '`.'\n      );\n    }\n    if (!prop.props.hasOwnProperty('width') || !prop.props.hasOwnProperty('height')) {\n      return new Error('SVG should have props `width` and `height`');\n    }\n\n  }\n};\n\nReactSVGPanZoom.defaultProps = {\n  style: {},\n  background: \"#616264\",\n  SVGBackground: \"#fff\",\n  SVGStyle: {},\n  detectWheel: true,\n  detectAutoPan: true,\n  detectPinchGesture: true,\n  modifierKeys: [\"Alt\", \"Shift\", \"Control\"],\n  preventPanOutside: true,\n  scaleFactor: 1.1,\n  scaleFactorOnWheel: 1.06,\n  disableZoomWithToolAuto: false,\n  onZoom: null,\n  onPan: null,\n  customToolbar: Toolbar,\n  toolbarProps: {},\n  customMiniature: Miniature,\n  miniatureProps: {},\n};\n","import {decompose} from '../features/common'\n\nexport default class ViewerEvent {\n  constructor(originalEvent, value, SVGViewer) {\n    this.originalEvent = originalEvent;\n    this.value = value;\n    this.SVGViewer = SVGViewer;\n  }\n\n  get scaleFactor() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.scaleFactor;\n  }\n\n  get translationX() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.translationX;\n  }\n\n  get translationY() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.translationY;\n  }\n\n  preventDefault(){\n    this.originalEvent.preventDefault();\n  }\n\n  stopPropagation(){\n    this.originalEvent.stopPropagation();\n  }\n}\n","import {\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  MODE_IDLE\n} from '../constants';\nimport {setFocus, setViewerCoords, getSVGPoint} from './common';\nimport {startPanning, updatePanning, stopPanning, autoPanIfNeeded} from './pan';\nimport {startZooming, updateZooming, stopZooming, zoom} from './zoom';\nimport mapRange from '../utils/mapRange';\n\n\nexport function onMouseDown(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      let SVGPoint = getSVGPoint(value, x, y);\n      nextValue = zoom(value, SVGPoint.x, SVGPoint.y, 1 / props.scaleFactor, props);\n      break;\n\n    case TOOL_ZOOM_IN:\n      nextValue = startZooming(value, x, y);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      nextValue = startPanning(value, x, y);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseMove(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let forceExit = (event.buttons === 0); //the mouse exited and reentered into svg\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_IN:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = forceExit ? stopZooming(value, x, y, props.scaleFactor, props) : updateZooming(value, x, y);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (value.mode === MODE_PANNING)\n        nextValue = forceExit ? stopPanning(value) : updatePanning(value, x, y, props.preventPanOutside ? 20 : undefined);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseUp(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = stopZooming(value, x, y, 1 / props.scaleFactor, props);\n      break;\n\n    case TOOL_ZOOM_IN:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = stopZooming(value, x, y, props.scaleFactor, props);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (value.mode === MODE_PANNING)\n        nextValue = stopPanning(value, x, y);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onDoubleClick(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_AUTO:\n      if (!props.disableDoubleClickZoomWithToolAuto) {\n        let SVGPoint = getSVGPoint(value, x, y);\n        let modifierKeysReducer = (current, modifierKey) => current || event.getModifierState(modifierKey);\n        let modifierKeyActive = props.modifierKeys.reduce(modifierKeysReducer, false);\n        let scaleFactor = modifierKeyActive ? 1 / props.scaleFactor : props.scaleFactor;\n        nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n      }\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onWheel(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  if (!props.detectWheel) return value;\n\n  let delta = Math.max(-1, Math.min(1, event.deltaY));\n  let scaleFactor = mapRange(delta, -1, 1, props.scaleFactorOnWheel, 1 / props.scaleFactorOnWheel);\n\n  let SVGPoint = getSVGPoint(value, x, y);\n  let nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseEnterOrLeave(event, ViewerDOM, tool, value, props, coords = null) {\n  let nextValue = setFocus(value, event.type === 'mouseenter');\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onInterval(event, ViewerDOM, tool, value, props, coords = null) {\n  let {x, y} = coords;\n\n  if (! ([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0) ) return value;\n  if (!props.detectAutoPan) return value;\n  if (!value.focus) return value;\n\n  return autoPanIfNeeded(value, x, y);\n}\n","export default function calculateBox(start, end) {\n  if (start.x <= end.x && start.y <= end.y) {\n    return {\n      x: start.x,\n      y: start.y,\n      width: end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y <= end.y) {\n    return {\n      x: end.x,\n      y: start.y,\n      width: start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y >= end.y) {\n    return {\n      x: end.x,\n      y: end.y,\n      width: start.x - end.x,\n      height: start.y - end.y\n    };\n  } else if (start.x <= end.x && start.y >= end.y) {\n    return {\n      x: start.x,\n      y: end.y,\n      width: end.x - start.x,\n      height: start.y - end.y\n    };\n  }\n}\n\n","import React from \"react\";\nimport getDisplayName from \"./getDisplayName\";\n\nlet uid = 1;\nconst nextUID = () => `uid${uid++}`;\n\nexport default function RandomUID(WrappedComponent) {\n  class RandomUID extends React.Component {\n    constructor(props) {\n      super(props)\n      this.state = {uid: nextUID()}\n    }\n\n    render() {\n      return <WrappedComponent _uid={this.state.uid} {...this.props}/>\n    }\n  }\n\n  RandomUID.displayName = `RandomUID(${getDisplayName(WrappedComponent)})`;\n\n  return RandomUID;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM,\n} from '../constants';\n\nimport {fitToViewer} from '../features/zoom';\nimport IconCursor from './icon-cursor';\nimport IconPan from './icon-pan';\nimport IconZoomIn from './icon-zoom-in';\nimport IconZoomOut from './icon-zoom-out';\nimport IconFit from './icon-fit';\nimport ToolbarButton from './toolbar-button';\n\nexport default function Toolbar({tool, value, onChangeValue, onChangeTool, position, SVGAlignX, SVGAlignY}) {\n\n  let handleChangeTool = (event, tool) => {\n    onChangeTool(tool);\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let handleFit = event => {\n    onChangeValue(fitToViewer(value, SVGAlignX, SVGAlignY));\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let isHorizontal = [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0;\n\n  let style = {\n    //position\n    position: \"absolute\",\n    transform: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"translate(-50%, 0px)\" : \"none\",\n    top: [POSITION_LEFT, POSITION_RIGHT, POSITION_TOP].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    left: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"50%\" : (POSITION_LEFT === position ? \"5px\" : \"unset\"),\n    right: [POSITION_RIGHT].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    bottom: [POSITION_BOTTOM].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n\n    //inner styling\n    backgroundColor: \"rgba(19, 20, 22, 0.90)\",\n    borderRadius: \"2px\",\n    display: \"flex\",\n    flexDirection: isHorizontal ? \"row\" : \"column\",\n    padding: isHorizontal ? \"1px 2px\" : \"2px 1px\"\n  };\n\n  return (\n    <div style={style} role=\"toolbar\">\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_NONE}\n        name=\"unselect-tools\"\n        title=\"Selection\"\n        onClick={ event => handleChangeTool(event, TOOL_NONE) }>\n        <IconCursor/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_PAN}\n        name=\"select-tool-pan\"\n        title=\"Pan\"\n        onClick={ event => handleChangeTool(event, TOOL_PAN) }>\n        <IconPan/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_IN}\n        name=\"select-tool-zoom-in\"\n        title=\"Zoom in\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_IN) }>\n        <IconZoomIn/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_OUT}\n        name=\"select-tool-zoom-out\"\n        title=\"Zoom out\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_OUT) }>\n        <IconZoomOut/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={false}\n        name=\"fit-to-viewer\"\n        title=\"Fit to viewer\"\n        onClick={ event => handleFit(event) }>\n        <IconFit/>\n      </ToolbarButton>\n    </div>\n  )\n}\n\nToolbar.propTypes = {\n  tool: PropTypes.string.isRequired,\n  onChangeTool: PropTypes.func.isRequired,\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n  SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n  SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n};\n\nToolbar.defaultProps = {\n  position: POSITION_RIGHT,\n  SVGAlignX: ALIGN_LEFT,\n  SVGAlignY: ALIGN_TOP\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_LEFT, POSITION_RIGHT,} from '../constants';\nimport {applyToPoints, inverse} from 'transformation-matrix';\nimport MiniatureToggleButton from './miniature-toggle-button';\nimport MiniatureMask from './miniature-mask';\n\nconst {min, max} = Math;\n\nexport default function Miniature(props) {\n\n  let {value, onChangeValue, children, position, background, SVGBackground, width: miniatureWidth, height: miniatureHeight} = props;\n  let {SVGWidth, SVGHeight, viewerWidth, viewerHeight} = value;\n\n  let ratio = SVGHeight / SVGWidth;\n\n  let zoomToFit = ratio >= 1\n    ? miniatureHeight / SVGHeight\n    : miniatureWidth / SVGWidth;\n\n  let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(inverse(value), [\n    {x: 0, y: 0},\n    {x: viewerWidth, y: viewerHeight}\n  ]);\n\n  let width, height;\n  if (value.miniatureOpen) {\n    width = miniatureWidth;\n    height = miniatureHeight;\n  } else {\n    width = 24;\n    height = 24;\n  }\n\n  let style = {\n    position: \"absolute\",\n    overflow: \"hidden\",\n    outline: \"1px solid rgba(19, 20, 22, 0.90)\",\n    transition: \"width 200ms ease, height 200ms ease, bottom 200ms ease\",\n    width: width + \"px\",\n    height: height + \"px\",\n    bottom: \"6px\",\n    [position === POSITION_LEFT ? 'left' : 'right']: \"6px\",\n    background\n  };\n\n  let centerTranslation = ratio >= 1\n    ? `translate(${(miniatureWidth - (SVGWidth * zoomToFit)) / 2}, 0)`\n    : `translate(0, ${(miniatureHeight - (SVGHeight * zoomToFit)) / 2})`;\n\n  return (\n    <div role=\"navigation\" style={style}>\n      <svg\n        width={miniatureWidth}\n        height={miniatureHeight}\n        style={{pointerEvents: \"none\"}}>\n        <g transform={centerTranslation}>\n          <g transform={`scale(${zoomToFit}, ${zoomToFit})`}>\n\n            <rect\n              fill={SVGBackground}\n              x={0}\n              y={0}\n              width={value.SVGWidth}\n              height={value.SVGHeight}/>\n\n            {children}\n\n            <MiniatureMask\n              SVGWidth={SVGWidth}\n              SVGHeight={SVGHeight}\n              x1={x1}\n              y1={y1}\n              x2={x2}\n              y2={y2}\n              zoomToFit={zoomToFit}\n            />\n\n          </g>\n        </g>\n      </svg>\n      <MiniatureToggleButton value={value} onChangeValue={onChangeValue} position={position}/>\n    </div>\n  )\n}\n\nMiniature.propTypes = {\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n  SVGBackground: PropTypes.string.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]),\n  background: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n};\n\nMiniature.defaultProps = {\n  position: POSITION_LEFT,\n  background: \"#616264\",\n  width: 100,\n  height: 80,\n}\n","import {tipNoViewer} from \"./migration-tips\";\n\nexport {default as ReactSVGPanZoom} from './viewer';\nexport {default as UncontrolledReactSVGPanZoom} from './uncontrolled-viewer';\nexport {default as Toolbar} from './ui-toolbar/toolbar';\nexport {default as Miniature} from './ui-miniature/miniature';\nexport {setPointOnViewerCenter, reset} from './features/common';\nexport {pan} from './features/pan';\nexport {zoom, fitSelection, fitToViewer, zoomOnViewerCenter} from './features/zoom';\nexport {openMiniature, closeMiniature} from './features/miniature'\nexport * from './constants';\n\nexport const Viewer = () => {\n  tipNoViewer()\n  return null;\n};\n","export function isNullOrUndefined(value) {\n  return typeof value === 'undefined' || value === null\n}\n","import ViewerMouseEvent from './viewer-mouse-event';\nimport ViewerTouchEvent from './viewer-touch-event';\n\nexport default function (originalEvent, value, SVGViewer) {\n\n  let eventType = originalEvent.type;\n\n  switch (eventType) {\n    case \"mousemove\":\n    case \"mouseup\":\n    case \"mousedown\":\n    case \"click\":\n    case \"dblclick\":\n      return new ViewerMouseEvent(originalEvent, value, SVGViewer);\n\n    case \"touchstart\":\n    case \"touchmove\":\n    case \"touchend\":\n    case \"touchcancel\":\n      return new ViewerTouchEvent(originalEvent, value, SVGViewer);\n\n    default:\n      throw new Error(`${eventType} not supported`);\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerMouseEvent extends ViewerEvent{\n\n  get point() {\n    if (!this._cachePoint) {\n      let event = this.originalEvent, value = this.value, SVGViewer = this.SVGViewer;\n\n      let rect = SVGViewer.getBoundingClientRect();\n      let x = event.clientX - Math.round(rect.left);\n      let y = event.clientY - Math.round(rect.top);\n\n      this._cachePoint = getSVGPoint(value, x, y);\n    }\n    return this._cachePoint;\n  }\n\n  get x() {\n    return this.point.x;\n  }\n\n  get y() {\n    return this.point.y;\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerTouchEvent extends ViewerEvent {\n  get points() {\n    if (!this._cachePoints)\n      this._cachePoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.touches, this.SVGViewer, this.value);\n\n    return this._cachePoints;\n  }\n\n  get changedPoints() {\n    if (!this._cacheChangedPoints)\n      this._cacheChangedPoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.changedTouches, this.SVGViewer, this.value);\n\n    return this._cacheChangedPoints;\n  }\n\n  static touchesToPoints(touches, SVGViewer, value) {\n    let points = [];\n    for (let i = 0; i < touches.length; i++) {\n      let touch = touches[i];\n\n      let rect = SVGViewer.getBoundingClientRect();\n      let x = touch.clientX - Math.round(rect.left);\n      let y = touch.clientY - Math.round(rect.top);\n\n      let point = getSVGPoint(value, x, y);\n\n      points.push({...point, identifier: touch.identifier});\n    }\n    return points;\n  }\n}\n","export default function mapRange(value, low1, high1, low2, high2) {\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_AUTO, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  MODE_IDLE, MODE_PANNING, MODE_ZOOMING\n} from '../constants';\nimport {resetMode, getSVGPoint, set} from './common';\nimport {onMouseDown, onMouseMove, onMouseUp} from './interactions';\nimport {isZoomLevelGoingOutOfBounds, limitZoomLevel} from './zoom';\n\nfunction hasPinchPointDistance(value) {\n  return typeof value.pinchPointDistance === 'number';\n}\n\nfunction onMultiTouch(event, ViewerDOM, tool, value, props) {\n  const {left, top} = ViewerDOM.getBoundingClientRect();\n  const x1 = event.touches[0].clientX - Math.round(left);\n  const y1 = event.touches[0].clientY - Math.round(top);\n  const x2 = event.touches[1].clientX - Math.round(left);\n  const y2 = event.touches[1].clientY - Math.round(top);\n  const pinchPointDistance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const previousPointDistance = hasPinchPointDistance(value) ? value.pinchPointDistance : pinchPointDistance;\n  const svgPoint = getSVGPoint(value, (x1 + x2) / 2, (y1 + y2) / 2);\n  let distanceFactor = pinchPointDistance/previousPointDistance;\n\n  if (isZoomLevelGoingOutOfBounds(value, distanceFactor)) {\n    // Do not change translation and scale of value\n    return value;\n  }\n\n  if (event.cancelable) {\n    event.preventDefault();\n  }\n\n  let matrix = transform(\n    fromObject(value),\n    translate(svgPoint.x, svgPoint.y),\n    scale(distanceFactor, distanceFactor),\n    translate(-svgPoint.x, -svgPoint.y)\n  );\n\n  return set(value, set({\n    mode: MODE_ZOOMING,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    prePinchMode: value.prePinchMode ? value.prePinchMode : value.mode,\n    pinchPointDistance\n  }));\n}\n\nfunction isMultiTouch(event, props) {\n  return props.detectPinchGesture && event.touches.length > 1;\n}\n\nfunction shouldResetPinchPointDistance(event, value, props) {\n  return props.detectPinchGesture && hasPinchPointDistance(value) && event.touches.length < 2;\n}\n\nfunction getTouchPosition(touch, ViewerDOM) {\n  let {left, top} = ViewerDOM.getBoundingClientRect();\n  let x = touch.clientX - Math.round(left);\n  let y = touch.clientY - Math.round(top);\n\n  return { x, y };\n}\n\nfunction getNextValue(event, ViewerDOM, tool, value, props, nextValueFn) {\n  let nextValue = event.touches.length === 0 ? set(value, { mode: value.prePinchMode ? MODE_IDLE : value.mode, prePinchMode: null }) : value;\n  let touch = event.touches.length > 0 ? event.touches[0] : event.changedTouches[0];\n  let touchPosition = getTouchPosition(touch, ViewerDOM);\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n    case TOOL_ZOOM_IN:\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      event.stopPropagation();\n      event.preventDefault();\n      return nextValueFn(event, ViewerDOM, tool, nextValue, props, touchPosition);\n\n    default:\n      return nextValue;\n  }\n}\n\nexport function onTouchStart(event, ViewerDOM, tool, value, props) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\n  }\n\n  if (event.touches.length !== 1) {\n    if ([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0){\n      return resetMode(value);\n    } else if([MODE_IDLE].indexOf(value.mode) >= 0){\n      return value;\n    }\n  }\n\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseDown);\n}\n\nexport function onTouchMove(event, ViewerDOM, tool, value, props) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\n  }\n\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\n    return value;\n  }\n\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseMove);\n}\n\nexport function onTouchEnd(event, ViewerDOM, tool, value, props) {\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\n    return value;\n  }\n\n  let nextValue = shouldResetPinchPointDistance(event, value, props) ? set(value, { pinchPointDistance: null }) : value;\n\n  if (event.touches.length > 0) {\n    return nextValue;\n  }\n\n  return getNextValue(event, ViewerDOM, tool, nextValue, props, onMouseUp);\n}\n\nexport function onTouchCancel(event, ViewerDOM, tool, value, props) {\n  event.stopPropagation();\n  event.preventDefault();\n\n  return resetMode(value);\n}\n","//specs: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\n\nlet needPrefix = (cursor) => ['zoom-in', 'zoom-out', 'grab', 'grabbing'].indexOf(cursor) > -1;\nlet userAgent = () => navigator.userAgent.toLowerCase();\nlet isFirefox = () => userAgent().indexOf('firefox') > -1;\nlet isWebkit = () => userAgent().indexOf('webkit') > -1;\n\nexport default function (cursor) {\n  if (!needPrefix(cursor)) return cursor;\n  if (isFirefox()) return `-moz-${cursor}`;\n  if (isWebkit()) return `-webkit-${cursor}`;\n}\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT} from '../constants';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_border_gradient'\n\nfunction BorderGradient({direction, width, height, _uid}) {\n\n  let transform;\n\n  switch (direction) {\n    case POSITION_TOP:\n      transform = `translate(${width}, 0) rotate(90)`;\n      break;\n\n    case POSITION_RIGHT:\n      transform = `translate(${width}, ${height}) rotate(180)`;\n      break;\n\n    case POSITION_BOTTOM:\n      transform = `translate(0, ${height}) rotate(270)`;\n      break;\n\n    case POSITION_LEFT:\n      transform = \" \";\n      break;\n  }\n\n  let gradientID = `${prefixID}_gradient_${_uid}`\n  let maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <linearGradient id={gradientID} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" spreadMethod=\"pad\">\n          <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.8\"/>\n          <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0.5\"/>\n        </linearGradient>\n\n        <mask id={maskID} x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}>\n          <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n                style={{stroke: \"none\", fill: `url(#${gradientID})`}}/>\n        </mask>\n      </defs>\n\n      <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n            style={{stroke: \"none\", fill: \"#000\", mask: `url(#${maskID})`}} transform={transform}/>\n    </g>\n  );\n}\n\nBorderGradient.propTypes = {\n  direction: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]).isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n\nexport default RandomUID(BorderGradient)\n","//https://facebook.github.io/react/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging\nexport default function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport calculateBox from '../utils/calculateBox';\n\nexport default function Selection({startX, startY, endX, endY}) {\n  if (!startX || !startY || !endX || !endY) return null;\n\n  let box = calculateBox({x: startX, y: startY}, {x: endX, y: endY});\n\n  return (<rect\n    stroke=\"#969FFF\"\n    strokeOpacity={0.7}\n    fill=\"#F3F4FF\"\n    fillOpacity={0.7}\n    x={box.x}\n    y={box.y}\n    width={box.width}\n    height={box.height}\n    style={{pointerEvents: \"none\"}}/>);\n}\n\nSelection.propTypes = {\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  endX: PropTypes.number,\n  endY: PropTypes.number\n};\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconCursor() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://materialdesignicons.com/icon/cursor-move\n\nexport default function IconPan() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_in\n\nexport default function IconZoomIn() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g>\n        <path\n          d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_out\n\nexport default function IconZoomOut() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\n    </svg>\n  )\n}\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconFit() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  POSITION_TOP, POSITION_BOTTOM\n} from '../constants';\n\nexport default class ToolbarButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  change(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.type) {\n      case 'mouseenter':\n      case 'touchstart':\n        this.setState({hover: true});\n        break;\n      case 'mouseleave':\n      case 'touchend':\n      case 'touchcancel':\n        this.setState({hover: false});\n        break;\n    }\n  }\n\n  render() {\n    let style = {\n      display: \"block\",\n      width: \"24px\",\n      height: \"24px\",\n      margin: [POSITION_TOP, POSITION_BOTTOM].indexOf(this.props.toolbarPosition) >= 0 ? \"2px 1px\" : \"1px 2px\",\n      color: this.props.active || this.state.hover ? '#1CA6FC' : '#FFF',\n      transition: \"color 200ms ease\",\n      background: \"none\",\n      padding: \"0px\",\n      border: \"0px\",\n      outline: \"0px\",\n      cursor: \"pointer\"\n    };\n\n    return (\n      <button\n        onMouseEnter={e => this.change(e)}\n        onMouseLeave={e => this.change(e)}\n\n        onTouchStart={e => {\n          this.change(e);\n          this.props.onClick(e);\n        }}\n        onTouchEnd={e => this.change(e)}\n        onTouchCancel={e => this.change(e)}\n\n        onClick={this.props.onClick}\n\n        style={style}\n        title={this.props.title}\n        name={this.props.name}\n        role=\"button\"\n        type=\"button\"\n      >{this.props.children}</button>\n    )\n  }\n\n}\n\nToolbarButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  toolbarPosition: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool.isRequired\n};\n","//http://stackoverflow.com/a/4819886/1398836\n\nexport default function isTouchDevice() {\n  return 'ontouchstart' in window        // works on most browsers\n    || navigator.maxTouchPoints;       // works on IE10/11 and Surface\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {openMiniature, closeMiniature} from '../features/miniature';\nimport IconArrow from './icon-arrow';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\nexport default function MiniatureToggleButton({value, onChangeValue, position}) {\n  let style = {\n    width: \"24px\",\n    height: \"24px\",\n    display: \"block\",\n    position: \"absolute\",\n    bottom: 0,\n    [position === POSITION_LEFT ? 'left' : 'right']: '0px',\n    background: \"rgba(19, 20, 22, 0.901961)\",\n    border: 0,\n    padding: 0,\n    outline: 0,\n    color: \"#fff\"\n  };\n\n  let action = value.miniatureOpen ? closeMiniature : openMiniature;\n\n  return (\n    <button role=\"button\" type=\"button\" style={style} onClick={event => onChangeValue(action(value))}>\n      <IconArrow open={value.miniatureOpen} position={position}/>\n    </button>\n  )\n\n}\n\nMiniatureToggleButton.propTypes = {\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\n//credits https://materialdesignicons.com/icon/chevron-up\n\nexport default function IconArrow({open, position}) {\n\n  let transform = 0;\n\n  switch (position){\n    case POSITION_LEFT:\n      transform = open ? \"rotate(225, 12, 13)\" : \"rotate(45, 12, 13)\";\n      break;\n\n    case POSITION_RIGHT:\n      transform = transform = open ? \"rotate(135, 12, 13)\" : \"rotate(-45, 12, 13)\";\n  }\n\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g transform={transform}>\n        <path fill=\"#000000\" d=\"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z\"/>\n      </g>\n    </svg>\n  );\n}\n\nIconArrow.propTypes = {\n  open: PropTypes.bool.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_miniature'\n\nfunction MiniatureMask({SVGWidth, SVGHeight, x1, y1, x2, y2, zoomToFit, _uid}) {\n  let maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <mask id={maskID}>\n          <rect x=\"0\" y=\"0\" width={SVGWidth} height={SVGHeight} fill=\"#ffffff\"/>\n          <rect x={x1} y={y1} width={x2 - x1} height={y2 - y1}/>\n        </mask>\n      </defs>\n\n      <rect\n        x=\"0\"\n        y=\"0\"\n        width={SVGWidth}\n        height={SVGHeight}\n        style={{\n          stroke: \"none\",\n          fill: \"#000\",\n          mask: `url(#${maskID})`,\n          opacity: 0.4\n        }}\n      />\n    </g>)\n}\n\nMiniatureMask.propTypes = {\n  SVGWidth: PropTypes.number.isRequired,\n  SVGHeight: PropTypes.number.isRequired,\n  x1: PropTypes.number.isRequired,\n  y1: PropTypes.number.isRequired,\n  x2: PropTypes.number.isRequired,\n  y2: PropTypes.number.isRequired,\n  zoomToFit: PropTypes.number.isRequired,\n}\n\nexport default RandomUID(MiniatureMask)\n","import React from \"react\";\nimport ReactSVGPanZoom from './viewer'\nimport PropTypes from \"prop-types\";\nimport {TOOL_NONE} from \"./constants\";\n\nexport default class UncontrolledReactSVGPanZoom extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: props.defaultValue || {},\n      tool: props.defaultTool || TOOL_NONE,\n    }\n\n    this.Viewer = null;\n    this.changeTool = this.changeTool.bind(this)\n    this.changeValue = this.changeValue.bind(this)\n  }\n\n  changeTool(tool) {\n    this.setState({tool})\n  }\n\n  changeValue(value) {\n    this.setState({value})\n  }\n\n  pan(SVGDeltaX, SVGDeltaY) {\n    this.Viewer.pan(SVGDeltaX, SVGDeltaY)\n  }\n\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\n    this.Viewer.zoom(SVGPointX, SVGPointY, scaleFactor)\n  }\n\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n    this.Viewer.fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight)\n  }\n\n  fitToViewer(SVGAlignX, SVGAlignY) {\n    this.Viewer.fitToViewer(SVGAlignX, SVGAlignY)\n  }\n\n  zoomOnViewerCenter(scaleFactor) {\n    this.Viewer.zoomOnViewerCenter(scaleFactor)\n  }\n\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n    this.Viewer.setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel)\n  }\n\n  reset() {\n    this.Viewer.reset()\n  }\n\n  openMiniature() {\n    this.Viewer.openMiniature()\n  }\n\n  closeMiniature() {\n    this.Viewer.closeMiniature()\n  }\n\n  render() {\n    const {width, height, onChangeTool, onChangeValue, ...props} = this.props\n    const {tool, value} = this.state\n\n    return (\n      <ReactSVGPanZoom\n        width={width} height={height}\n        tool={tool} onChangeTool={this.changeTool}\n        value={value} onChangeValue={this.changeValue}\n        ref={Viewer => this.Viewer = Viewer}\n        {...props}\n      />\n    )\n  }\n}\n\nUncontrolledReactSVGPanZoom.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n\n  defaultValue: PropTypes.object,\n  defaultTool: PropTypes.string,\n}\n"],"sourceRoot":""}