{"version":3,"sources":["webpack://ReactSVGPanZoom/webpack/universalModuleDefinition","webpack://ReactSVGPanZoom/webpack/bootstrap","webpack://ReactSVGPanZoom/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactSVGPanZoom/./src/constants.js","webpack://ReactSVGPanZoom/external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://ReactSVGPanZoom/./src/features/common.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/applyToPoint.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromObject.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/identity.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/inverse.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/utils.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/isAffineMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/translate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/transform.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/rotate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/scale.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/shear.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/skew.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/toString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/smoothMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTriangles.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromDefinition.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/index.js","webpack://ReactSVGPanZoom/./src/features/zoom.js","webpack://ReactSVGPanZoom/./src/features/pan.js","webpack://ReactSVGPanZoom/./src/features/miniature.js","webpack://ReactSVGPanZoom/./src/migration-tips.js","webpack://ReactSVGPanZoom/./src/viewer.js","webpack://ReactSVGPanZoom/./src/events/viewer-event.js","webpack://ReactSVGPanZoom/./src/features/interactions.js","webpack://ReactSVGPanZoom/./src/utils/calculateBox.js","webpack://ReactSVGPanZoom/./src/utils/RandomUID.js","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature.jsx","webpack://ReactSVGPanZoom/./src/index.js","webpack://ReactSVGPanZoom/./src/utils/is.js","webpack://ReactSVGPanZoom/./src/events/event-factory.js","webpack://ReactSVGPanZoom/./src/events/viewer-mouse-event.js","webpack://ReactSVGPanZoom/./src/events/viewer-touch-event.js","webpack://ReactSVGPanZoom/./src/utils/mapRange.js","webpack://ReactSVGPanZoom/./src/features/interactions-touch.js","webpack://ReactSVGPanZoom/./src/ui/cursor-polyfill.js","webpack://ReactSVGPanZoom/./src/ui/border-gradient.js","webpack://ReactSVGPanZoom/./src/utils/getDisplayName.js","webpack://ReactSVGPanZoom/./src/ui/selection.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-cursor.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-pan.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-in.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-out.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-fit.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar-button.jsx","webpack://ReactSVGPanZoom/./src/ui/detect-touch.js","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-toggle-button.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/icon-arrow.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-mask.jsx","webpack://ReactSVGPanZoom/./src/uncontrolled-viewer.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","viewerWidth","viewerHeight","SVGWidth","SVGHeight","scaleFactorMin","scaleFactorMax","set","_objectSpread","_transformationMatrix","identity","version","MODE_IDLE","focus","pinchPointDistance","prePinchMode","startX","startY","endX","endY","miniatureOpen","lastAction","_typeof","viewerX","viewerY","matrix","fromObject","inverseMatrix","inverse","applyToPoint","x","y","scaleFactor","a","translationX","e","translationY","f","SVGPointX","SVGPointY","zoomLevel","transform","translate","scale","_constants","change","action","arguments","length","undefined","assign","freeze","point","Array","isArray","b","applyToPoints","points","map","parseFloat","matrixRegex","fromString","string","parsed","match","Error","denom","isUndefined","val","isNumeric","Number","isNaN","isFinite","isAffineMatrix","obj","tx","ty","matrices","multiply","m1","m2","rest","compose","cos","sin","PI","Math","rotate","angle","cx","cy","cosAngle","sinAngle","rotationMatrix","rotateDEG","sx","sy","shear","shx","shy","tan","skew","ax","ay","skewDEG","toCSS","toString_toString","toSVG","smoothMatrix","precision","round","fromTriangles","t1","t2","px1","py1","px2","py2","qx1","qy1","qx2","qy2","rx1","ry1","rx2","ry2","fromDefinition","definitionOrArrayOfDefinition","mapper","descriptor","type","peg$SyntaxError","message","expected","found","location","this","captureStackTrace","peg$parse","input","options","peg$result","peg$FAILED","peg$startRuleFunctions","transformList","peg$parsetransformList","peg$startRuleFunction","peg$c0","peg$c1","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$r0","peg$r1","peg$r2","peg$r3","peg$e0","peg$literalExpectation","peg$e1","peg$e2","peg$e3","peg$e4","peg$e5","peg$e6","peg$e7","peg$e8","peg$e9","peg$otherExpectation","peg$e10","peg$classExpectation","peg$e11","peg$e12","peg$e13","peg$f0","ts","peg$f1","concat","peg$f2","peg$f3","peg$f4","peg$f5","peg$f6","peg$f7","peg$f8","join","peg$f9","parseInt","peg$f10","peg$f11","n1","n2","peg$f12","ds","peg$f13","d1","d2","peg$f14","peg$currPos","peg$posDetailsCache","line","column","peg$expected","peg$silentFails","startRule","text","ignoreCase","parts","inverted","description","peg$computePosDetails","pos","details","charCodeAt","peg$VALIDFILENAME","filename","peg$computeLocation","startPos","endPos","loc","startPosDetails","start","offset","endPosDetails","end","peg$expect","top","variants","push","peg$buildStructuredError","buildMessage","s0","s1","s2","s3","s4","peg$parsewsp","peg$parsetransforms","peg$parsetransform","peg$parsecommaWsp","s5","s7","s9","s11","s13","s15","s16","s17","rule$expects","substr","peg$parsenumber","peg$parsematrix","s6","s8","peg$parsecommaWspNumber","peg$parsetranslate","peg$parsescale","peg$parsecommaWspTwoNumbers","peg$parserotate","peg$parseskewX","peg$parseskewY","peg$parsesign","peg$parsedigitSequence","peg$parsefractionalConstant","peg$parseexponent","peg$parsefloatingPointConstant","peg$parseintegerConstant","peg$parsecomma","test","charAt","peg$parsedigit","failPos","peg$buildError","child","parent","C","constructor","peg$subclass","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","class","escapedParts","part","classEscape","any","other","not","describeExpectation","hex","ch","toString","toUpperCase","replace","j","descriptions","sort","slice","describeExpected","describeFound","fromTransformAttribute","transformString","__webpack_exports__","SVGAlignX","ALIGN_LEFT","SVGAlignY","ALIGN_TOP","scaleX","scaleY","scaleLevel","min","scaleMatrix","translationMatrix","remainderY","ALIGN_CENTER","ALIGN_BOTTOM","remainderX","ALIGN_RIGHT","isZoomLevelGoingOutOfBounds","_common","limitZoomLevel","ACTION_ZOOM","SVGPoint","getSVGPoint","zoom","MODE_ZOOMING","props","abs","box","_calculateBox","default","fitSelection","width","height","lessThanScaleFactorMin","moreThanScaleFactorMax","max","selectionSVGPointX","selectionSVGPointY","selectionWidth","selectionHeight","MODE_PANNING","ACTION_PAN","panLimit","deltaX","deltaY","nextValue","pan","SVGDeltaX","SVGDeltaY","_applyToPoints2","_slicedToArray","_applyToPoints2$","x1","y1","_applyToPoints2$2","x2","y2","moveX","moveY","console","error","doc_v1_to_v2","_is","isNullOrUndefined","tool","tipControlledComponent","miniaturePosition","miniatureBackground","miniatureWidth","miniatureHeight","tipDeprecatedMiniatureProps","toolbarPosition","tipDeprecateToolbarProps","github_base","doc_v2_to_v3","_react","_interopRequireDefault","_propTypes","_eventFactory","_pan2","_interactions","_interactionsTouch","_zoom2","_miniature","_cursorPolyfill","_borderGradient","_selection","_toolbar","_detectTouch","_miniature2","ReactSVGPanZoom","context","_this","_classCallCheck","_children$props","children","_getPrototypeOf","ViewerDOM","state","pointerX","pointerY","defaultValue","getDefaultValue","autoPanLoop","_assertThisInitialized","React","Component","prevProps","getValue","needUpdate","setViewerSize","_props$children$props","_prevProps$children$p","prevSVGWidth","prevSVGHeight","setSVGSize","setZoomLevels","setValue","autoPanIsRunning","requestAnimationFrame","isValueValid","TOOL_NONE","_this$props","onChangeValue","onZoom","onPan","fitToViewer","zoomOnViewerCenter","setPointOnViewerCenter","reset","openMiniature","closeMiniature","event","TOOL_AUTO","indexOf","getTool","target","onEventHandler","click","onClick","dblclick","onDoubleClick","mousemove","onMouseMove","mouseup","onMouseUp","mousedown","onMouseDown","touchstart","onTouchStart","touchmove","onTouchMove","touchend","onTouchEnd","touchcancel","onTouchCancel","coords","onInterval","cursor","_this2","_this$state","CustomToolbar","customToolbar","CustomMiniature","customMiniature","panningWithToolAuto","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","blockChildEvents","style","display","touchAction","detectPinchGesture","createElement","position","className","ref","handleViewerEvent","_this2$ViewerDOM$getB","getBoundingClientRect","left","clientX","clientY","setState","onWheel","onMouseEnter","onMouseEnterOrLeave","onMouseLeave","fill","background","pointerEvents","SVGBackground","SVGStyle","detectAutoPan","direction","POSITION_TOP","POSITION_RIGHT","POSITION_BOTTOM","POSITION_LEFT","toolbarProps","POSITION_NONE","_extends","onChangeTool","miniatureProps","propTypes","PropTypes","number","isRequired","oneOfType","shape","oneOf","bool","func","detectWheel","preventPanOutside","scaleFactorOnWheel","modifierKeys","array","disableDoubleClickZoomWithToolAuto","element","propName","componentName","prop","types","Children","count","defaultProps","disableZoomWithToolAuto","Toolbar","Miniature","ViewerEvent","originalEvent","SVGViewer","preventDefault","stopPropagation","_cacheDecomposedValue","decompose","_ViewerDOM$getBoundin","_zoom","startZooming","_pan","startPanning","_ViewerDOM$getBoundin2","forceExit","buttons","stopZooming","updateZooming","stopPanning","updatePanning","_ViewerDOM$getBoundin3","_ViewerDOM$getBoundin4","modifierKeyActive","reduce","current","modifierKey","getModifierState","_ViewerDOM$getBoundin5","delta","_mapRange","setFocus","autoPanIfNeeded","WrappedComponent","RandomUID","_React$Component","_possibleConstructorReturn","uid","nextUID","_inherits","_createClass","_uid","displayName","_getDisplayName","_iconCursor","_iconPan","_iconZoomIn","_iconZoomOut","_iconFit","_toolbarButton","_ref","handleChangeTool","isHorizontal","right","bottom","backgroundColor","borderRadius","flexDirection","padding","role","active","title","handleFit","_miniatureToggleButton","_miniatureMask","_style","ratio","zoomToFit","_defineProperty","overflow","outline","transition","centerTranslation","_migrationTips","_viewer","_uncontrolledViewer","keys","forEach","_exportNames","tipNoViewer","eventType","ViewerMouseEvent","ViewerTouchEvent","_viewerMouseEvent","_viewerTouchEvent","_viewerEvent","_cachePoint","rect","touches","touch","identifier","_cachePoints","touchesToPoints","_cacheChangedPoints","changedTouches","low1","high1","low2","high2","isMultiTouch","onMultiTouch","resetMode","getNextValue","hasPinchPointDistance","shouldResetPinchPointDistance","sqrt","pow","previousPointDistance","svgPoint","distanceFactor","cancelable","nextValueFn","touchPosition","getTouchPosition","needPrefix","isFirefox","isWebkit","userAgent","navigator","toLowerCase","_RandomUID","prefixID","BorderGradient","gradientID","maskID","id","spreadMethod","stopColor","stopOpacity","stroke","mask","Selection","strokeOpacity","fillOpacity","ToolbarButton","hover","margin","color","border","maxTouchPoints","_iconArrow","MiniatureToggleButton","open","IconArrow","MiniatureMask","opacity","UncontrolledReactSVGPanZoom","defaultTool","Viewer","changeTool","changeValue","_objectWithoutProperties"],"mappings":"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","file":"react-svg-pan-zoom.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactSVGPanZoom\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"ReactSVGPanZoom\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export const MODE_IDLE = 'idle';\nexport const MODE_PANNING = 'panning';\nexport const MODE_ZOOMING = 'zooming';\n\nexport const TOOL_AUTO = 'auto';\nexport const TOOL_NONE = 'none';\nexport const TOOL_PAN = 'pan';\nexport const TOOL_ZOOM_IN = 'zoom-in';\nexport const TOOL_ZOOM_OUT = 'zoom-out';\n\nexport const POSITION_NONE = 'none';\nexport const POSITION_TOP = 'top';\nexport const POSITION_RIGHT = 'right';\nexport const POSITION_BOTTOM = 'bottom';\nexport const POSITION_LEFT = 'left';\n\nexport const ACTION_ZOOM = 'zoom';\nexport const ACTION_PAN = 'pan';\n\nexport const ALIGN_CENTER = 'center';\nexport const ALIGN_LEFT = 'left';\nexport const ALIGN_RIGHT = 'right';\nexport const ALIGN_TOP = 'top';\nexport const ALIGN_BOTTOM = 'bottom';\n\nexport const INITIAL_VALUE = {}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import {TOOL_NONE, MODE_IDLE} from '../constants';\nimport {\n  identity,\n  fromObject,\n  inverse,\n  applyToPoint,\n  transform,\n  translate,\n  scale\n} from 'transformation-matrix';\n\n/**\n * Obtain default value\n * @returns {Object}\n */\nexport function getDefaultValue(viewerWidth, viewerHeight, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax) {\n  return set({}, {\n    ...identity(),\n    version: 2,\n    mode: MODE_IDLE,\n    focus: false,\n    pinchPointDistance: null,\n    prePinchMode: null,\n    viewerWidth,\n    viewerHeight,\n    SVGWidth,\n    SVGHeight,\n    scaleFactorMin,\n    scaleFactorMax,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    miniatureOpen: true,\n    lastAction: null,\n  });\n}\n\n/**\n * Change value\n * @param value\n * @param change\n * @param action\n * @returns {Object}\n */\nexport function set(value, change, action = null) {\n  value = Object.assign({}, value, change, {lastAction: action});\n  return Object.freeze(value);\n}\n\n/**\n * value valid check\n * @param value\n */\nexport function isValueValid(value) {\n  return value !== null\n    && typeof value === 'object'\n    && value.hasOwnProperty('version');\n}\n\n/**\n * Export x,y coords relative to SVG\n * @param value\n * @param viewerX\n * @param viewerY\n * @returns {*|{x, y}|{x: number, y: number}}\n */\nexport function getSVGPoint(value, viewerX, viewerY) {\n  let matrix = fromObject(value);\n\n  let inverseMatrix = inverse(matrix);\n  return applyToPoint(inverseMatrix, {x: viewerX, y: viewerY});\n}\n\n/**\n * Decompose matrix from value\n * @param value\n * @returns {{scaleFactor: number, translationX: number, translationY: number}}\n */\nexport function decompose(value) {\n  let matrix = fromObject(value);\n\n  return {\n    scaleFactor: matrix.a,\n    translationX: matrix.e,\n    translationY: matrix.f\n  }\n}\n\n/**\n *\n * @param value\n * @param focus\n * @returns {Object}\n */\nexport function setFocus(value, focus) {\n  return set(value, {focus});\n}\n\n\n/**\n *\n * @param value\n * @param viewerWidth\n * @param viewerHeight\n * @returns {Object}\n */\nexport function setViewerSize(value, viewerWidth, viewerHeight) {\n  return set(value, {viewerWidth, viewerHeight});\n}\n\n/**\n *\n * @param value\n * @param SVGWidth\n * @param SVGHeight\n * @returns {Object}\n */\nexport function setSVGSize(value, SVGWidth, SVGHeight) {\n  return set(value, {SVGWidth, SVGHeight});\n}\n\n/**\n *\n * @param value\n * @param scaleFactorMin\n * @param scaleFactorMax\n * @returns {Object}\n */\nexport function setZoomLevels(value, scaleFactorMin, scaleFactorMax) {\n  return set(value, {scaleFactorMin, scaleFactorMax});\n}\n\n/**\n *\n * @param value\n * @param SVGPointX\n * @param SVGPointY\n * @param zoomLevel\n * @returns {Object}\n */\nexport function setPointOnViewerCenter(value, SVGPointX, SVGPointY, zoomLevel) {\n  let {viewerWidth, viewerHeight} = value;\n\n  let matrix = transform(\n    translate(-SVGPointX + viewerWidth / 2, -SVGPointY + viewerHeight / 2),   //4\n    translate(SVGPointX, SVGPointY),                                          //3\n    scale(zoomLevel, zoomLevel),                                              //2\n    translate(-SVGPointX, -SVGPointY)                                         //1\n  );\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n  });\n}\n\n/**\n *\n * @param value\n * @returns {Object}\n */\nexport function reset(value) {\n  return set(value, {\n    mode: MODE_IDLE,\n    ...identity()\n  });\n}\n\n/**\n *\n * @param value\n * @returns {Object}\n */\nexport function resetMode(value) {\n  return set(value, {\n    mode: MODE_IDLE,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  })\n}\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nexport function fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n","/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nexport function fromString (string) {\n  let parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n","/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  let { a, b, c, d, e, f } = matrix\n\n  let denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","import { isNumeric, isObject } from './utils'\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nexport function isAffineMatrix (object) {\n  return isObject(object) &&\n    object.hasOwnProperty('a') &&\n    isNumeric(object.a) &&\n    object.hasOwnProperty('b') &&\n    isNumeric(object.b) &&\n    object.hasOwnProperty('c') &&\n    isNumeric(object.c) &&\n    object.hasOwnProperty('d') &&\n    isNumeric(object.d) &&\n    object.hasOwnProperty('e') &&\n    isNumeric(object.e) &&\n    object.hasOwnProperty('f') &&\n    isNumeric(object.f)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of affine matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default:\n      let [m1, m2, ...rest] = matrices\n      let m = multiply(m1, m2)\n      return transform(m, ...rest)\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  let cosAngle = cos(angle)\n  let sinAngle = sin(angle)\n  let rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","import { isUndefined } from './utils'\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @returns {Matrix} Affine Matrix\n */\nexport function scale (sx, sy = undefined) {\n  if (isUndefined(sy)) sy = sx\n  return {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n}\n","/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n","/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n","/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nexport function smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n","import { inverse } from './inverse'\nimport { transform } from './transform'\nimport { smoothMatrix } from './smoothMatrix'\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nexport function fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  let px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  let py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  let px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  let py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  let qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  let qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  let qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  let qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  let rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  let ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  let rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  let ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  let r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  let r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  let inverseR1 = inverse(r1)\n  let affineMatrix = transform([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return smoothMatrix(affineMatrix)\n}\n","import { fromObject } from './fromObject'\nimport { translate } from './translate'\nimport { scale } from './scale'\nimport { rotateDEG } from './rotate'\nimport { skewDEG } from './skew'\nimport { shear } from './shear'\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, sx: 50, sy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nexport function fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return fromObject(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return translate(descriptor.tx, descriptor.ty)\n\n        return translate(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return scale(descriptor.sx, descriptor.sy)\n\n        return scale(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return rotateDEG(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return rotateDEG(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return shear(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n","// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { parse } from './fromTransformAttribute.autogenerated'\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {Matrix[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nexport function fromTransformAttribute (transformString) {\n  return parse(transformString)\n}\n","export * from './applyToPoint'\nexport * from './fromObject'\nexport * from './fromString'\nexport * from './identity'\nexport * from './inverse'\nexport * from './isAffineMatrix'\nexport * from './rotate'\nexport * from './scale'\nexport * from './shear'\nexport * from './skew'\nexport * from './toString'\nexport * from './transform'\nexport * from './translate'\nexport * from './fromTriangles'\nexport * from './smoothMatrix'\nexport * from './fromDefinition'\nexport * from './fromTransformAttribute'\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\n\nimport {\n  ACTION_ZOOM, MODE_IDLE, MODE_ZOOMING,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM\n} from '../constants';\nimport {set, getSVGPoint} from './common';\nimport calculateBox from '../utils/calculateBox';\n\nfunction lessThanScaleFactorMin (value, scaleFactor) {\n  return value.scaleFactorMin && (value.d * (scaleFactor)) <= value.scaleFactorMin;\n}\n\nfunction moreThanScaleFactorMax (value, scaleFactor) {\n  return value.scaleFactorMax && (value.d * scaleFactor) >= value.scaleFactorMax;\n}\n\nexport function isZoomLevelGoingOutOfBounds(value, scaleFactor) {\n  return lessThanScaleFactorMin(value, scaleFactor) && scaleFactor < 1 || moreThanScaleFactorMax(value, scaleFactor) && scaleFactor > 1;\n}\n\nexport function limitZoomLevel(value, matrix) {\n  let scaleLevel = matrix.a;\n\n  if(value.scaleFactorMin != null) {\n    // limit minimum zoom\n    scaleLevel = Math.max(scaleLevel, value.scaleFactorMin);\n  }\n\n  if(value.scaleFactorMax != null) {\n    // limit maximum zoom\n    scaleLevel = Math.min(scaleLevel, value.scaleFactorMax);\n  }\n\n  return set(matrix, {\n    a: scaleLevel,\n    d: scaleLevel\n  });\n}\n\nexport function zoom(value, SVGPointX, SVGPointY, scaleFactor) {\n  if (isZoomLevelGoingOutOfBounds(value, scaleFactor)) {\n      // Do not change translation and scale of value\n      return value;\n  }\n\n  const matrix = transform(\n    fromObject(value),\n    translate(SVGPointX, SVGPointY),\n    scale(scaleFactor, scaleFactor),\n    translate(-SVGPointX, -SVGPointY)\n  );\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function fitSelection(value, selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n  let {viewerWidth, viewerHeight} = value;\n\n  let scaleX = viewerWidth / selectionWidth;\n  let scaleY = viewerHeight / selectionHeight;\n\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  const matrix = transform(\n    scale(scaleLevel, scaleLevel),                      //2\n    translate(-selectionSVGPointX, -selectionSVGPointY) //1\n  );\n\n  if(isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\n    // Do not allow scale and translation\n    return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    });\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function fitToViewer(value, SVGAlignX=ALIGN_LEFT, SVGAlignY=ALIGN_TOP) {\n  let {viewerWidth, viewerHeight, SVGWidth, SVGHeight} = value;\n\n  let scaleX = viewerWidth / SVGWidth;\n  let scaleY = viewerHeight / SVGHeight;\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  const scaleMatrix = scale(scaleLevel, scaleLevel);\n  let translationMatrix = translate(0, 0);\n\n  // after fitting, SVG and the viewer will match in width (1) or in height (2)\n  if (scaleX < scaleY) {\n    //(1) match in width, meaning scaled SVGHeight <= viewerHeight\n    let remainderY = viewerHeight - scaleX * SVGHeight;\n\n    if (SVGAlignY === ALIGN_CENTER)\n      translationMatrix = translate(0, Math.round(remainderY / 2));\n    if (SVGAlignY === ALIGN_BOTTOM)\n      translationMatrix = translate(0, remainderY);\n  }\n  else {\n    //(2) match in height, meaning scaled SVGWidth <= viewerWidth\n    let remainderX = viewerWidth - scaleY * SVGWidth;\n\n    if (SVGAlignX === ALIGN_CENTER)\n      translationMatrix = translate(Math.round(remainderX / 2), 0);\n    if (SVGAlignX === ALIGN_RIGHT)\n      translationMatrix = translate(remainderX, 0);\n  }\n\n  const matrix = transform(\n    translationMatrix, //2\n    scaleMatrix        //1\n  );\n\n  if (isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\n    // Do not allow scale and translation\n    return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    });\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function zoomOnViewerCenter(value, scaleFactor) {\n  let {viewerWidth, viewerHeight} = value;\n  let SVGPoint = getSVGPoint(value, viewerWidth / 2, viewerHeight / 2);\n  return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor);\n}\n\nexport function startZooming(value, viewerX, viewerY) {\n  return set(value, {\n    mode: MODE_ZOOMING,\n    startX: viewerX,\n    startY: viewerY,\n    endX: viewerX,\n    endY: viewerY\n  });\n}\n\nexport function updateZooming(value, viewerX, viewerY) {\n  if (value.mode !== MODE_ZOOMING) throw new Error('update selection not allowed in this mode ' + value.mode);\n\n  return set(value, {\n    endX: viewerX,\n    endY: viewerY\n  });\n}\n\nexport function stopZooming(value, viewerX, viewerY, scaleFactor, props) {\n  let {startX, startY, endX, endY} = value;\n\n  let start = getSVGPoint(value, startX, startY);\n  let end = getSVGPoint(value, endX, endY);\n\n  if (Math.abs(startX - endX) > 7 && Math.abs(startY - endY) > 7) {\n    let box = calculateBox(start, end);\n    return fitSelection(value, box.x, box.y, box.width, box.height);\n  } else {\n    let SVGPoint = getSVGPoint(value, viewerX, viewerY);\n    return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n  }\n}\n","import {ACTION_PAN, MODE_IDLE, MODE_PANNING} from '../constants';\nimport {set, getSVGPoint} from './common';\nimport {fromObject, translate, transform, applyToPoints, inverse} from 'transformation-matrix';\n\n/**\n *\n * @param value\n * @param SVGDeltaX\n * @param SVGDeltaY\n * @param panLimit\n * @returns {Object}\n */\nexport function pan(value, SVGDeltaX, SVGDeltaY, panLimit = undefined) {\n\n  let matrix = transform(\n    fromObject(value),              //2\n    translate(SVGDeltaX, SVGDeltaY) //1\n  );\n\n  // apply pan limits\n  if (panLimit) {\n    let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(matrix, [\n      {x: panLimit, y: panLimit},\n      {x: value.SVGWidth - panLimit, y: value.SVGHeight - panLimit}\n    ]);\n\n    //x limit\n    let moveX = 0;\n    if (value.viewerWidth - x1 < 0)\n      moveX = value.viewerWidth - x1;\n    else if (x2 < 0) moveX = -x2;\n\n\n    //y limit\n    let moveY = 0;\n    if (value.viewerHeight - y1 < 0)\n      moveY = value.viewerHeight - y1;\n    else if (y2 < 0) moveY = -y2;\n\n    //apply limits\n    matrix = transform(\n      translate(moveX, moveY),\n      matrix\n    )\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n  }, ACTION_PAN);\n}\n\nexport function startPanning(value, viewerX, viewerY) {\n  return set(value, {\n    mode: MODE_PANNING,\n    startX: viewerX,\n    startY: viewerY,\n    endX: viewerX,\n    endY: viewerY\n  }, ACTION_PAN);\n}\n\nexport function updatePanning(value, viewerX, viewerY, panLimit) {\n  if (value.mode !== MODE_PANNING) throw new Error('update pan not allowed in this mode ' + value.mode);\n\n  let {endX, endY} = value;\n\n  let start = getSVGPoint(value, endX, endY);\n  let end = getSVGPoint(value, viewerX, viewerY);\n\n  let deltaX = end.x - start.x;\n  let deltaY = end.y - start.y;\n\n  let nextValue = pan(value, deltaX, deltaY, panLimit);\n  return set(nextValue, {\n    mode: MODE_PANNING,\n    endX: viewerX,\n    endY: viewerY,\n  }, ACTION_PAN);\n}\n\nexport function stopPanning(value) {\n  return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    }, ACTION_PAN\n  );\n}\n\nexport function autoPanIfNeeded(value, viewerX, viewerY) {\n  let deltaX = 0;\n  let deltaY = 0;\n\n  if (viewerY <= 20) deltaY = 2;\n  if (value.viewerWidth - viewerX <= 20) deltaX = -2;\n  if (value.viewerHeight - viewerY <= 20) deltaY = -2;\n  if (viewerX <= 20) deltaX = 2;\n\n  deltaX = deltaX / value.d;\n  deltaY = deltaY / value.d;\n\n  return (deltaX === 0 && deltaY === 0) ? value : pan(value, deltaX, deltaY);\n}\n","import {set} from './common';\n\n\nexport function openMiniature(value) {\n  return set(value, {\n    miniatureOpen: true\n  });\n}\n\nexport function closeMiniature(value) {\n  return set(value, {\n    miniatureOpen: false\n  });\n}\n\n","import {isNullOrUndefined} from \"./utils/is\";\n\nconst github_base = 'https://github.com/chrvadala/react-svg-pan-zoom/blob/master'\n\nconst doc_v1_to_v2 = github_base + '/docs/migrate-from-v1-to-v2.md'\nconst doc_v2_to_v3 = github_base + '/docs/migrate-from-v2-to-v3.md'\n\nexport function tipNoViewer() {\n  console.error(`HEY! You are trying to use an older version of ReactSVGPanZoom. Please read here ${doc_v1_to_v2}`)\n}\n\nexport function tipControlledComponent() {\n  console.error(`HEY! With ReactSVGPanZoom >= 3 you MUST specify value and tool props. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function tipDeprecatedMiniatureProps(){\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the props miniaturePosition, miniatureBackground, miniatureWidth, miniatureHeight can be specified as key in the miniatureProps object. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function tipDeprecateToolbarProps(){\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the prop toolbarPosition can be specified as key in the toolbarProps object. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function printMigrationTipsRelatedToProps(props){\n  if (\n    isNullOrUndefined(props.tool) ||\n    isNullOrUndefined(props.value)\n  ) tipControlledComponent()\n\n  if (\n    !isNullOrUndefined(props.miniaturePosition) ||\n    !isNullOrUndefined(props.miniatureBackground) ||\n    !isNullOrUndefined(props.miniatureWidth) ||\n    !isNullOrUndefined(props.miniatureHeight)\n  ) tipDeprecatedMiniatureProps()\n\n\n  if (\n    !isNullOrUndefined(props.toolbarPosition)\n  ) tipDeprecateToolbarProps()\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {toSVG} from 'transformation-matrix';\n//events\nimport eventFactory from './events/event-factory';\n//features\nimport {pan} from './features/pan';\nimport {\n  getDefaultValue,\n  isValueValid,\n  reset,\n  setPointOnViewerCenter,\n  setSVGSize,\n  setViewerSize,\n  setZoomLevels\n} from './features/common';\nimport {\n  onDoubleClick,\n  onInterval,\n  onMouseDown,\n  onMouseEnterOrLeave,\n  onMouseMove,\n  onMouseUp,\n  onWheel\n} from './features/interactions';\nimport {onTouchCancel, onTouchEnd, onTouchMove, onTouchStart} from './features/interactions-touch';\n\nimport {fitSelection, fitToViewer, zoom, zoomOnViewerCenter} from './features/zoom';\nimport {closeMiniature, openMiniature} from './features/miniature';\n//ui\nimport cursorPolyfill from './ui/cursor-polyfill';\nimport BorderGradient from './ui/border-gradient';\nimport Selection from './ui/selection';\nimport Toolbar from './ui-toolbar/toolbar';\nimport detectTouch from './ui/detect-touch';\nimport Miniature from './ui-miniature/miniature'\n\nimport {\n  ACTION_PAN,\n  ACTION_ZOOM,\n  ALIGN_BOTTOM,\n  ALIGN_CENTER,\n  ALIGN_LEFT,\n  ALIGN_RIGHT,\n  ALIGN_TOP,\n  MODE_IDLE,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  POSITION_BOTTOM,\n  POSITION_LEFT,\n  POSITION_NONE,\n  POSITION_RIGHT,\n  POSITION_TOP,\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT\n} from './constants';\nimport {printMigrationTipsRelatedToProps} from \"./migration-tips\";\n\nexport default class ReactSVGPanZoom extends React.Component {\n\n  constructor(props, context) {\n    const {value, width: viewerWidth, height: viewerHeight, scaleFactorMin, scaleFactorMax, children} = props;\n    const {width: SVGWidth, height: SVGHeight} = children.props;\n\n    super(props, context);\n    this.ViewerDOM = null;\n    this.state = {\n      pointerX: null,\n      pointerY: null,\n      defaultValue: getDefaultValue(viewerWidth, viewerHeight, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\n    }\n    this.autoPanLoop = this.autoPanLoop.bind(this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      printMigrationTipsRelatedToProps(props)\n    }\n  }\n\n  /** React hooks **/\n  componentDidUpdate(prevProps) {\n    const value = this.getValue();\n    const props = this.props\n\n    let nextValue = value;\n    let needUpdate = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      printMigrationTipsRelatedToProps(props)\n    }\n\n    if (\n      prevProps.width !== props.width ||\n      prevProps.height !== props.height\n    ) {\n      nextValue = setViewerSize(nextValue, props.width, props.height);\n      needUpdate = true;\n    }\n\n    let {width: SVGWidth, height: SVGHeight} = props.children.props;\n    let {width: prevSVGWidth, height: prevSVGHeight} = prevProps.children.props;\n    if (\n      prevSVGWidth !== SVGWidth ||\n      prevSVGHeight !== SVGHeight\n    ) {\n      nextValue = setSVGSize(nextValue, SVGWidth, SVGHeight);\n      needUpdate = true;\n    }\n\n    if (\n      prevProps.scaleFactorMin !== props.scaleFactorMin ||\n      prevProps.scaleFactorMax !== props.scaleFactorMax\n    ) {\n      nextValue = setZoomLevels(nextValue, props.scaleFactorMin, props.scaleFactorMax);\n      needUpdate = true;\n    }\n\n    if (needUpdate) {\n      this.setValue(nextValue);\n    }\n  }\n\n  componentDidMount() {\n    this.autoPanIsRunning = true;\n    requestAnimationFrame(this.autoPanLoop);\n  }\n\n  componentWillUnmount() {\n    this.autoPanIsRunning = false;\n  }\n\n  /** ReactSVGPanZoom handlers **/\n  getValue() {\n    if (isValueValid(this.props.value)) return this.props.value\n    return this.state.defaultValue\n  }\n\n  getTool() {\n    if (this.props.tool) return this.props.tool\n    return TOOL_NONE\n  }\n\n  setValue(nextValue) {\n    let {onChangeValue, onZoom, onPan} = this.props;\n\n    if (onChangeValue) onChangeValue(nextValue);\n    if (nextValue.lastAction) {\n      if (onZoom && nextValue.lastAction === ACTION_ZOOM) onZoom(nextValue);\n      if (onPan && nextValue.lastAction === ACTION_PAN) onPan(nextValue);\n    }\n  }\n\n  /** ReactSVGPanZoom methods **/\n  pan(SVGDeltaX, SVGDeltaY) {\n    let nextValue = pan(this.getValue(), SVGDeltaX, SVGDeltaY);\n    this.setValue(nextValue);\n  }\n\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\n    let nextValue = zoom(this.getValue(), SVGPointX, SVGPointY, scaleFactor);\n    this.setValue(nextValue);\n  }\n\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n    let nextValue = fitSelection(this.getValue(), selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight);\n    this.setValue(nextValue);\n  }\n\n  fitToViewer(SVGAlignX = ALIGN_LEFT, SVGAlignY = ALIGN_TOP) {\n    let nextValue = fitToViewer(this.getValue(), SVGAlignX, SVGAlignY);\n    this.setValue(nextValue);\n  }\n\n  zoomOnViewerCenter(scaleFactor) {\n    let nextValue = zoomOnViewerCenter(this.getValue(), scaleFactor);\n    this.setValue(nextValue);\n  }\n\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n    let nextValue = setPointOnViewerCenter(this.getValue(), SVGPointX, SVGPointY, zoomLevel);\n    this.setValue(nextValue);\n  }\n\n  reset() {\n    let nextValue = reset(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  openMiniature() {\n    let nextValue = openMiniature(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  closeMiniature() {\n    let nextValue = closeMiniature(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  /** ReactSVGPanZoom internals **/\n  handleViewerEvent(event) {\n    let {props, ViewerDOM} = this;\n\n    if (!([TOOL_NONE, TOOL_AUTO].indexOf(this.getTool()) >= 0)) return;\n    if (event.target === ViewerDOM) return;\n\n    let eventsHandler = {\n      click: props.onClick,\n      dblclick: props.onDoubleClick,\n\n      mousemove: props.onMouseMove,\n      mouseup: props.onMouseUp,\n      mousedown: props.onMouseDown,\n\n      touchstart: props.onTouchStart,\n      touchmove: props.onTouchMove,\n      touchend: props.onTouchEnd,\n      touchcancel: props.onTouchCancel,\n    };\n\n    let onEventHandler = eventsHandler[event.type];\n    if (!onEventHandler) return;\n\n    onEventHandler(eventFactory(event, props.value, ViewerDOM));\n  }\n\n  autoPanLoop() {\n    let coords = {x: this.state.pointerX, y: this.state.pointerY};\n    let nextValue = onInterval(null, this.ViewerDOM, this.getTool(), this.getValue(), this.props, coords);\n    if (this.getValue() !== nextValue) {\n      this.setValue(nextValue);\n    }\n\n    if (this.autoPanIsRunning) {\n      requestAnimationFrame(this.autoPanLoop);\n    }\n  }\n\n  /** React renderer **/\n  render() {\n    let {props, state: {pointerX, pointerY}} = this;\n    let tool = this.getTool();\n    let value = this.getValue();\n    let {customToolbar: CustomToolbar, customMiniature: CustomMiniature} = props;\n\n    let panningWithToolAuto = tool === TOOL_AUTO\n      && value.mode === MODE_PANNING\n      && value.startX !== value.endX\n      && value.startY !== value.endY;\n\n    let cursor;\n\n    if (tool === TOOL_PAN)\n      cursor = cursorPolyfill(value.mode === MODE_PANNING ? 'grabbing' : 'grab');\n\n    if (tool === TOOL_ZOOM_IN)\n      cursor = cursorPolyfill('zoom-in');\n\n    if (tool === TOOL_ZOOM_OUT)\n      cursor = cursorPolyfill('zoom-out');\n\n    if (panningWithToolAuto)\n      cursor = cursorPolyfill('grabbing');\n\n    let blockChildEvents = [TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT].indexOf(tool) >= 0;\n    blockChildEvents = blockChildEvents || panningWithToolAuto;\n\n    const touchAction = (this.props.detectPinchGesture || [TOOL_PAN, TOOL_AUTO].indexOf(this.getTool()) !== -1) ? 'none' : undefined\n\n    const style = {display: 'block', cursor, touchAction};\n\n    return (\n      <div\n        style={{position: \"relative\", width: value.viewerWidth, height: value.viewerHeight, ...props.style}}\n        className={this.props.className}>\n        <svg\n          ref={ViewerDOM => this.ViewerDOM = ViewerDOM}\n          width={value.viewerWidth}\n          height={value.viewerHeight}\n          style={style}\n\n          onMouseDown={event => {\n            let nextValue = onMouseDown(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onMouseMove={event => {\n            let {left, top} = this.ViewerDOM.getBoundingClientRect();\n            let x = event.clientX - Math.round(left);\n            let y = event.clientY - Math.round(top);\n\n            let nextValue = onMouseMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props, {x, y});\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.setState({pointerX: x, pointerY: y});\n            this.handleViewerEvent(event);\n          }}\n          onMouseUp={event => {\n            let nextValue = onMouseUp(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n\n          onClick={event => {\n            this.handleViewerEvent(event)\n          }}\n          onDoubleClick={event => {\n            let nextValue = onDoubleClick(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n\n          onWheel={event => {\n            let nextValue = onWheel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n\n          onMouseEnter={event => {\n            if (detectTouch()) return;\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n          onMouseLeave={event => {\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n\n          onTouchStart={event => {\n            let nextValue = onTouchStart(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchMove={event => {\n            let nextValue = onTouchMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchEnd={event => {\n            let nextValue = onTouchEnd(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchCancel={event => {\n            let nextValue = onTouchCancel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}>\n\n          <rect\n            fill={props.background}\n            x={0}\n            y={0}\n            width={value.viewerWidth}\n            height={value.viewerHeight}\n            style={{pointerEvents: \"none\"}}\n          />\n\n          <g\n            transform={toSVG(value)}\n            style={blockChildEvents ? {pointerEvents: \"none\"} : {}}>\n            <rect\n              fill={this.props.SVGBackground}\n              style={this.props.SVGStyle}\n              x={0}\n              y={0}\n              width={value.SVGWidth}\n              height={value.SVGHeight}/>\n            <g>\n              {props.children.props.children}\n            </g>\n          </g>\n\n          {!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0 && props.detectAutoPan && value.focus) ? null : (\n            <g style={{pointerEvents: \"none\"}}>\n              {!(pointerY <= 20) ? null :\n                <BorderGradient direction={POSITION_TOP} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.viewerWidth - pointerX <= 20) ? null :\n                <BorderGradient direction={POSITION_RIGHT} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.viewerHeight - pointerY <= 20) ? null :\n                <BorderGradient direction={POSITION_BOTTOM} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.focus && pointerX <= 20) ? null :\n                <BorderGradient direction={POSITION_LEFT} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n            </g>\n          )}\n\n          {!(value.mode === MODE_ZOOMING) ? null :\n            <Selection startX={value.startX} startY={value.startY} endX={value.endX} endY={value.endY}/>\n          }\n        </svg>\n\n        {props.toolbarProps.position === POSITION_NONE ? null :\n          <CustomToolbar\n            {...this.props.toolbarProps}\n            value={value}\n            onChangeValue={value => this.setValue(value)}\n            tool={tool}\n            onChangeTool={tool => this.props.onChangeTool(tool)}\n          />}\n\n        {props.miniatureProps.position === POSITION_NONE ? null :\n          <CustomMiniature\n            {...this.props.miniatureProps}\n            value={value}\n            onChangeValue={value => this.setValue(value)}\n            SVGBackground={this.props.SVGBackground}\n          >\n            {props.children.props.children}\n          </CustomMiniature>\n        }\n      </div>\n    );\n  }\n}\n\nReactSVGPanZoom.propTypes = {\n  /**************************************************************************/\n  /*  Viewer configuration                                                  */\n  /**************************************************************************/\n  //width of the viewer displayed on screen\n  width: PropTypes.number.isRequired,\n\n  //height of the viewer displayed on screen\n  height: PropTypes.number.isRequired,\n\n  //value of the viewer (current camera view)\n  value: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.shape({\n      version: PropTypes.oneOf([2]).isRequired,\n      mode: PropTypes.oneOf([MODE_IDLE, MODE_PANNING, MODE_ZOOMING]).isRequired,\n      focus: PropTypes.bool.isRequired,\n      a: PropTypes.number.isRequired,\n      b: PropTypes.number.isRequired,\n      c: PropTypes.number.isRequired,\n      d: PropTypes.number.isRequired,\n      e: PropTypes.number.isRequired,\n      f: PropTypes.number.isRequired,\n      viewerWidth: PropTypes.number.isRequired,\n      viewerHeight: PropTypes.number.isRequired,\n      SVGWidth: PropTypes.number.isRequired,\n      SVGHeight: PropTypes.number.isRequired,\n      startX: PropTypes.number,\n      startY: PropTypes.number,\n      endX: PropTypes.number,\n      endY: PropTypes.number,\n      miniatureOpen: PropTypes.bool.isRequired,\n    })\n  ]).isRequired,\n\n  //handler something changed\n  onChangeValue: PropTypes.func.isRequired,\n\n  //current active tool (TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT)\n  tool: PropTypes.oneOf([TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT]).isRequired,\n\n  //handler tool changed\n  onChangeTool: PropTypes.func.isRequired,\n\n  /**************************************************************************/\n  /* Customize style                                                        */\n  /**************************************************************************/\n\n  //background of the viewer\n  background: PropTypes.string,\n\n  //background of the svg\n  SVGBackground: PropTypes.string,\n\n  //style of the svg\n  SVGStyle: PropTypes.object,\n\n  //CSS style of the Viewer\n  style: PropTypes.object,\n\n  //className of the Viewer\n  className: PropTypes.string,\n\n\n  /**************************************************************************/\n  /* Detect events                                                          */\n  /**************************************************************************/\n\n  //perform zoom operation on mouse scroll\n  detectWheel: PropTypes.bool,\n\n  //perform PAN if the mouse is on viewer border\n  detectAutoPan: PropTypes.bool,\n\n  //perform zoom operation on pinch gesture\n  detectPinchGesture: PropTypes.bool,\n\n  //toolbar position\n  toolbarPosition: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n\n  //handler zoom level changed\n  onZoom: PropTypes.func,\n\n  //handler pan action performed\n  onPan: PropTypes.func,\n\n  //handler click\n  onClick: PropTypes.func,\n\n  //handler double click\n  onDoubleClick: PropTypes.func,\n\n  //handler mouseup\n  onMouseUp: PropTypes.func,\n\n  //handler mousemove\n  onMouseMove: PropTypes.func,\n\n  //handler mousedown\n  onMouseDown: PropTypes.func,\n\n  /**************************************************************************/\n  /* Some advanced configurations                                           */\n  /**************************************************************************/\n\n  //if disabled the user can move the image outside the viewer\n  preventPanOutside: PropTypes.bool,\n\n  //how much scale in or out\n  scaleFactor: PropTypes.number,\n\n  //how much scale in or out on mouse wheel (requires detectWheel enabled)\n  scaleFactorOnWheel: PropTypes.number,\n\n  // maximum amount of scale a user can zoom in to\n  scaleFactorMax: PropTypes.number,\n\n  // minimum amount of a scale a user can zoom out of\n  scaleFactorMin: PropTypes.number,\n\n  //modifier keys //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\n  modifierKeys: PropTypes.array,\n\n  //Turn off zoom on double click\n  disableDoubleClickZoomWithToolAuto: PropTypes.bool,\n\n  /**************************************************************************/\n  /* Miniature configurations                                                 */\n  /**************************************************************************/\n\n  //override miniature component\n  customMiniature: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  //miniature props\n  miniatureProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_RIGHT, POSITION_LEFT]),\n    background: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  }),\n\n  /**************************************************************************/\n  /* Toolbar configurations                                                 */\n  /**************************************************************************/\n\n  //override toolbar component\n  customToolbar: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  //toolbar props\n  toolbarProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n    SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n    SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n  }),\n\n  /**************************************************************************/\n  /* Children Check                                                         */\n  /**************************************************************************/\n  //accept only one node SVG\n  children: function (props, propName, componentName) {\n    // Only accept a single child, of the appropriate type\n    //credits: http://www.mattzabriskie.com/blog/react-validating-children\n    let prop = props[propName];\n    let types = ['svg'];\n    if (React.Children.count(prop) !== 1 ||\n      types.indexOf(prop.type) === -1) {\n      return new Error(\n        '`' + componentName + '` ' +\n        'should have a single child of the following types: ' +\n        ' `' + types.join('`, `') + '`.'\n      );\n    }\n    if (!prop.props.hasOwnProperty('width') || !prop.props.hasOwnProperty('height')) {\n      return new Error('SVG should have props `width` and `height`');\n    }\n\n  }\n};\n\nReactSVGPanZoom.defaultProps = {\n  style: {},\n  background: \"#616264\",\n  SVGBackground: \"#fff\",\n  SVGStyle: {},\n  detectWheel: true,\n  detectAutoPan: true,\n  detectPinchGesture: true,\n  modifierKeys: [\"Alt\", \"Shift\", \"Control\"],\n  preventPanOutside: true,\n  scaleFactor: 1.1,\n  scaleFactorOnWheel: 1.06,\n  disableZoomWithToolAuto: false,\n  onZoom: null,\n  onPan: null,\n  customToolbar: Toolbar,\n  toolbarProps: {},\n  customMiniature: Miniature,\n  miniatureProps: {},\n};\n","import {decompose} from '../features/common'\n\nexport default class ViewerEvent {\n  constructor(originalEvent, value, SVGViewer) {\n    this.originalEvent = originalEvent;\n    this.value = value;\n    this.SVGViewer = SVGViewer;\n  }\n\n  get scaleFactor() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.scaleFactor;\n  }\n\n  get translationX() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.translationX;\n  }\n\n  get translationY() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.translationY;\n  }\n\n  preventDefault(){\n    this.originalEvent.preventDefault();\n  }\n\n  stopPropagation(){\n    this.originalEvent.stopPropagation();\n  }\n}\n","import {\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  MODE_IDLE\n} from '../constants';\nimport {setFocus, setViewerCoords, getSVGPoint} from './common';\nimport {startPanning, updatePanning, stopPanning, autoPanIfNeeded} from './pan';\nimport {startZooming, updateZooming, stopZooming, zoom} from './zoom';\nimport mapRange from '../utils/mapRange';\n\n\nexport function onMouseDown(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      let SVGPoint = getSVGPoint(value, x, y);\n      nextValue = zoom(value, SVGPoint.x, SVGPoint.y, 1 / props.scaleFactor, props);\n      break;\n\n    case TOOL_ZOOM_IN:\n      nextValue = startZooming(value, x, y);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      nextValue = startPanning(value, x, y);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseMove(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let forceExit = (event.buttons === 0); //the mouse exited and reentered into svg\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_IN:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = forceExit ? stopZooming(value, x, y, props.scaleFactor, props) : updateZooming(value, x, y);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (value.mode === MODE_PANNING)\n        nextValue = forceExit ? stopPanning(value) : updatePanning(value, x, y, props.preventPanOutside ? 20 : undefined);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseUp(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = stopZooming(value, x, y, 1 / props.scaleFactor, props);\n      break;\n\n    case TOOL_ZOOM_IN:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = stopZooming(value, x, y, props.scaleFactor, props);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (value.mode === MODE_PANNING)\n        nextValue = stopPanning(value, x, y);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onDoubleClick(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_AUTO:\n      if (!props.disableDoubleClickZoomWithToolAuto) {\n        let SVGPoint = getSVGPoint(value, x, y);\n        let modifierKeysReducer = (current, modifierKey) => current || event.getModifierState(modifierKey);\n        let modifierKeyActive = props.modifierKeys.reduce(modifierKeysReducer, false);\n        let scaleFactor = modifierKeyActive ? 1 / props.scaleFactor : props.scaleFactor;\n        nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n      }\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onWheel(event, ViewerDOM, tool, value, props, coords = null) {\n  let x, y;\n  if (coords) {\n    ({x, y} = coords);\n  } else {\n    let {left, top} = ViewerDOM.getBoundingClientRect();\n    x = event.clientX - Math.round(left);\n    y = event.clientY - Math.round(top);\n  }\n\n  if (!props.detectWheel) return value;\n\n  let delta = Math.max(-1, Math.min(1, event.deltaY));\n  let scaleFactor = mapRange(delta, -1, 1, props.scaleFactorOnWheel, 1 / props.scaleFactorOnWheel);\n\n  let SVGPoint = getSVGPoint(value, x, y);\n  let nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseEnterOrLeave(event, ViewerDOM, tool, value, props, coords = null) {\n  let nextValue = setFocus(value, event.type === 'mouseenter');\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onInterval(event, ViewerDOM, tool, value, props, coords = null) {\n  let {x, y} = coords;\n\n  if (! ([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0) ) return value;\n  if (!props.detectAutoPan) return value;\n  if (!value.focus) return value;\n\n  return autoPanIfNeeded(value, x, y);\n}\n","export default function calculateBox(start, end) {\n  if (start.x <= end.x && start.y <= end.y) {\n    return {\n      x: start.x,\n      y: start.y,\n      width: end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y <= end.y) {\n    return {\n      x: end.x,\n      y: start.y,\n      width: start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y >= end.y) {\n    return {\n      x: end.x,\n      y: end.y,\n      width: start.x - end.x,\n      height: start.y - end.y\n    };\n  } else if (start.x <= end.x && start.y >= end.y) {\n    return {\n      x: start.x,\n      y: end.y,\n      width: end.x - start.x,\n      height: start.y - end.y\n    };\n  }\n}\n\n","import React from \"react\";\nimport getDisplayName from \"./getDisplayName\";\n\nlet uid = 1;\nconst nextUID = () => `uid${uid++}`;\n\nexport default function RandomUID(WrappedComponent) {\n  class RandomUID extends React.Component {\n    constructor(props) {\n      super(props)\n      this.state = {uid: nextUID()}\n    }\n\n    render() {\n      return <WrappedComponent _uid={this.state.uid} {...this.props}/>\n    }\n  }\n\n  RandomUID.displayName = `RandomUID(${getDisplayName(WrappedComponent)})`;\n\n  return RandomUID;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM,\n} from '../constants';\n\nimport {fitToViewer} from '../features/zoom';\nimport IconCursor from './icon-cursor';\nimport IconPan from './icon-pan';\nimport IconZoomIn from './icon-zoom-in';\nimport IconZoomOut from './icon-zoom-out';\nimport IconFit from './icon-fit';\nimport ToolbarButton from './toolbar-button';\n\nexport default function Toolbar({tool, value, onChangeValue, onChangeTool, position, SVGAlignX, SVGAlignY}) {\n\n  let handleChangeTool = (event, tool) => {\n    onChangeTool(tool);\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let handleFit = event => {\n    onChangeValue(fitToViewer(value, SVGAlignX, SVGAlignY));\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let isHorizontal = [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0;\n\n  let style = {\n    //position\n    position: \"absolute\",\n    transform: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"translate(-50%, 0px)\" : \"none\",\n    top: [POSITION_LEFT, POSITION_RIGHT, POSITION_TOP].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    left: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"50%\" : (POSITION_LEFT === position ? \"5px\" : \"unset\"),\n    right: [POSITION_RIGHT].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    bottom: [POSITION_BOTTOM].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n\n    //inner styling\n    backgroundColor: \"rgba(19, 20, 22, 0.90)\",\n    borderRadius: \"2px\",\n    display: \"flex\",\n    flexDirection: isHorizontal ? \"row\" : \"column\",\n    padding: isHorizontal ? \"1px 2px\" : \"2px 1px\"\n  };\n\n  return (\n    <div style={style} role=\"toolbar\">\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_NONE}\n        name=\"unselect-tools\"\n        title=\"Selection\"\n        onClick={ event => handleChangeTool(event, TOOL_NONE) }>\n        <IconCursor/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_PAN}\n        name=\"select-tool-pan\"\n        title=\"Pan\"\n        onClick={ event => handleChangeTool(event, TOOL_PAN) }>\n        <IconPan/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_IN}\n        name=\"select-tool-zoom-in\"\n        title=\"Zoom in\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_IN) }>\n        <IconZoomIn/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_OUT}\n        name=\"select-tool-zoom-out\"\n        title=\"Zoom out\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_OUT) }>\n        <IconZoomOut/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={false}\n        name=\"fit-to-viewer\"\n        title=\"Fit to viewer\"\n        onClick={ event => handleFit(event) }>\n        <IconFit/>\n      </ToolbarButton>\n    </div>\n  )\n}\n\nToolbar.propTypes = {\n  tool: PropTypes.string.isRequired,\n  onChangeTool: PropTypes.func.isRequired,\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n  SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n  SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n};\n\nToolbar.defaultProps = {\n  position: POSITION_RIGHT,\n  SVGAlignX: ALIGN_LEFT,\n  SVGAlignY: ALIGN_TOP\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_LEFT, POSITION_RIGHT,} from '../constants';\nimport {applyToPoints, inverse} from 'transformation-matrix';\nimport MiniatureToggleButton from './miniature-toggle-button';\nimport MiniatureMask from './miniature-mask';\n\nconst {min, max} = Math;\n\nexport default function Miniature(props) {\n\n  let {value, onChangeValue, children, position, background, SVGBackground, width: miniatureWidth, height: miniatureHeight} = props;\n  let {SVGWidth, SVGHeight, viewerWidth, viewerHeight} = value;\n\n  let ratio = SVGHeight / SVGWidth;\n\n  let zoomToFit = ratio >= 1\n    ? miniatureHeight / SVGHeight\n    : miniatureWidth / SVGWidth;\n\n  let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(inverse(value), [\n    {x: 0, y: 0},\n    {x: viewerWidth, y: viewerHeight}\n  ]);\n\n  let width, height;\n  if (value.miniatureOpen) {\n    width = miniatureWidth;\n    height = miniatureHeight;\n  } else {\n    width = 24;\n    height = 24;\n  }\n\n  let style = {\n    position: \"absolute\",\n    overflow: \"hidden\",\n    outline: \"1px solid rgba(19, 20, 22, 0.90)\",\n    transition: \"width 200ms ease, height 200ms ease, bottom 200ms ease\",\n    width: width + \"px\",\n    height: height + \"px\",\n    bottom: \"6px\",\n    [position === POSITION_LEFT ? 'left' : 'right']: \"6px\",\n    background\n  };\n\n  let centerTranslation = ratio >= 1\n    ? `translate(${(miniatureWidth - (SVGWidth * zoomToFit)) / 2}, 0)`\n    : `translate(0, ${(miniatureHeight - (SVGHeight * zoomToFit)) / 2})`;\n\n  return (\n    <div role=\"navigation\" style={style}>\n      <svg\n        width={miniatureWidth}\n        height={miniatureHeight}\n        style={{pointerEvents: \"none\"}}>\n        <g transform={centerTranslation}>\n          <g transform={`scale(${zoomToFit}, ${zoomToFit})`}>\n\n            <rect\n              fill={SVGBackground}\n              x={0}\n              y={0}\n              width={value.SVGWidth}\n              height={value.SVGHeight}/>\n\n            {children}\n\n            <MiniatureMask\n              SVGWidth={SVGWidth}\n              SVGHeight={SVGHeight}\n              x1={x1}\n              y1={y1}\n              x2={x2}\n              y2={y2}\n              zoomToFit={zoomToFit}\n            />\n\n          </g>\n        </g>\n      </svg>\n      <MiniatureToggleButton value={value} onChangeValue={onChangeValue} position={position}/>\n    </div>\n  )\n}\n\nMiniature.propTypes = {\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n  SVGBackground: PropTypes.string.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]),\n  background: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n};\n\nMiniature.defaultProps = {\n  position: POSITION_LEFT,\n  background: \"#616264\",\n  width: 100,\n  height: 80,\n}\n","import {tipNoViewer} from \"./migration-tips\";\n\nexport {default as ReactSVGPanZoom} from './viewer';\nexport {default as UncontrolledReactSVGPanZoom} from './uncontrolled-viewer';\nexport {default as Toolbar} from './ui-toolbar/toolbar';\nexport {default as Miniature} from './ui-miniature/miniature';\nexport {setPointOnViewerCenter, reset} from './features/common';\nexport {pan} from './features/pan';\nexport {zoom, fitSelection, fitToViewer, zoomOnViewerCenter} from './features/zoom';\nexport {openMiniature, closeMiniature} from './features/miniature'\nexport * from './constants';\n\nexport const Viewer = () => {\n  tipNoViewer()\n  return null;\n};\n","export function isNullOrUndefined(value) {\n  return typeof value === 'undefined' || value === null\n}\n","import ViewerMouseEvent from './viewer-mouse-event';\nimport ViewerTouchEvent from './viewer-touch-event';\n\nexport default function (originalEvent, value, SVGViewer) {\n\n  let eventType = originalEvent.type;\n\n  switch (eventType) {\n    case \"mousemove\":\n    case \"mouseup\":\n    case \"mousedown\":\n    case \"click\":\n    case \"dblclick\":\n      return new ViewerMouseEvent(originalEvent, value, SVGViewer);\n\n    case \"touchstart\":\n    case \"touchmove\":\n    case \"touchend\":\n    case \"touchcancel\":\n      return new ViewerTouchEvent(originalEvent, value, SVGViewer);\n\n    default:\n      throw new Error(`${eventType} not supported`);\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerMouseEvent extends ViewerEvent{\n\n  get point() {\n    if (!this._cachePoint) {\n      let event = this.originalEvent, value = this.value, SVGViewer = this.SVGViewer;\n\n      let rect = SVGViewer.getBoundingClientRect();\n      let x = event.clientX - Math.round(rect.left);\n      let y = event.clientY - Math.round(rect.top);\n\n      this._cachePoint = getSVGPoint(value, x, y);\n    }\n    return this._cachePoint;\n  }\n\n  get x() {\n    return this.point.x;\n  }\n\n  get y() {\n    return this.point.y;\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerTouchEvent extends ViewerEvent {\n  get points() {\n    if (!this._cachePoints)\n      this._cachePoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.touches, this.SVGViewer, this.value);\n\n    return this._cachePoints;\n  }\n\n  get changedPoints() {\n    if (!this._cacheChangedPoints)\n      this._cacheChangedPoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.changedTouches, this.SVGViewer, this.value);\n\n    return this._cacheChangedPoints;\n  }\n\n  static touchesToPoints(touches, SVGViewer, value) {\n    let points = [];\n    for (let i = 0; i < touches.length; i++) {\n      let touch = touches[i];\n\n      let rect = SVGViewer.getBoundingClientRect();\n      let x = touch.clientX - Math.round(rect.left);\n      let y = touch.clientY - Math.round(rect.top);\n\n      let point = getSVGPoint(value, x, y);\n\n      points.push({...point, identifier: touch.identifier});\n    }\n    return points;\n  }\n}\n","export default function mapRange(value, low1, high1, low2, high2) {\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_AUTO, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  MODE_IDLE, MODE_PANNING, MODE_ZOOMING\n} from '../constants';\nimport {resetMode, getSVGPoint, set} from './common';\nimport {onMouseDown, onMouseMove, onMouseUp} from './interactions';\nimport {isZoomLevelGoingOutOfBounds, limitZoomLevel} from './zoom';\n\nfunction hasPinchPointDistance(value) {\n  return typeof value.pinchPointDistance === 'number';\n}\n\nfunction onMultiTouch(event, ViewerDOM, tool, value, props) {\n  const {left, top} = ViewerDOM.getBoundingClientRect();\n  const x1 = event.touches[0].clientX - Math.round(left);\n  const y1 = event.touches[0].clientY - Math.round(top);\n  const x2 = event.touches[1].clientX - Math.round(left);\n  const y2 = event.touches[1].clientY - Math.round(top);\n  const pinchPointDistance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const previousPointDistance = hasPinchPointDistance(value) ? value.pinchPointDistance : pinchPointDistance;\n  const svgPoint = getSVGPoint(value, (x1 + x2) / 2, (y1 + y2) / 2);\n  let distanceFactor = pinchPointDistance/previousPointDistance;\n\n  if (isZoomLevelGoingOutOfBounds(value, distanceFactor)) {\n    // Do not change translation and scale of value\n    return value;\n  }\n\n  if (event.cancelable) {\n    event.preventDefault();\n  }\n\n  let matrix = transform(\n    fromObject(value),\n    translate(svgPoint.x, svgPoint.y),\n    scale(distanceFactor, distanceFactor),\n    translate(-svgPoint.x, -svgPoint.y)\n  );\n\n  return set(value, set({\n    mode: MODE_ZOOMING,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    prePinchMode: value.prePinchMode ? value.prePinchMode : value.mode,\n    pinchPointDistance\n  }));\n}\n\nfunction isMultiTouch(event, props) {\n  return props.detectPinchGesture && event.touches.length > 1;\n}\n\nfunction shouldResetPinchPointDistance(event, value, props) {\n  return props.detectPinchGesture && hasPinchPointDistance(value) && event.touches.length < 2;\n}\n\nfunction getTouchPosition(touch, ViewerDOM) {\n  let {left, top} = ViewerDOM.getBoundingClientRect();\n  let x = touch.clientX - Math.round(left);\n  let y = touch.clientY - Math.round(top);\n\n  return { x, y };\n}\n\nfunction getNextValue(event, ViewerDOM, tool, value, props, nextValueFn) {\n  let nextValue = event.touches.length === 0 ? set(value, { mode: value.prePinchMode ? MODE_IDLE : value.mode, prePinchMode: null }) : value;\n  let touch = event.touches.length > 0 ? event.touches[0] : event.changedTouches[0];\n  let touchPosition = getTouchPosition(touch, ViewerDOM);\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n    case TOOL_ZOOM_IN:\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      event.stopPropagation();\n      event.preventDefault();\n      return nextValueFn(event, ViewerDOM, tool, nextValue, props, touchPosition);\n\n    default:\n      return nextValue;\n  }\n}\n\nexport function onTouchStart(event, ViewerDOM, tool, value, props) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\n  }\n\n  if (event.touches.length !== 1) {\n    if ([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0){\n      return resetMode(value);\n    } else if([MODE_IDLE].indexOf(value.mode) >= 0){\n      return value;\n    }\n  }\n\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseDown);\n}\n\nexport function onTouchMove(event, ViewerDOM, tool, value, props) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\n  }\n\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\n    return value;\n  }\n\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseMove);\n}\n\nexport function onTouchEnd(event, ViewerDOM, tool, value, props) {\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\n    return value;\n  }\n\n  let nextValue = shouldResetPinchPointDistance(event, value, props) ? set(value, { pinchPointDistance: null }) : value;\n\n  if (event.touches.length > 0) {\n    return nextValue;\n  }\n\n  return getNextValue(event, ViewerDOM, tool, nextValue, props, onMouseUp);\n}\n\nexport function onTouchCancel(event, ViewerDOM, tool, value, props) {\n  event.stopPropagation();\n  event.preventDefault();\n\n  return resetMode(value);\n}\n","//specs: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\n\nlet needPrefix = (cursor) => ['zoom-in', 'zoom-out', 'grab', 'grabbing'].indexOf(cursor) > -1;\nlet userAgent = () => navigator.userAgent.toLowerCase();\nlet isFirefox = () => userAgent().indexOf('firefox') > -1;\nlet isWebkit = () => userAgent().indexOf('webkit') > -1;\n\nexport default function (cursor) {\n  if (!needPrefix(cursor)) return cursor;\n  if (isFirefox()) return `-moz-${cursor}`;\n  if (isWebkit()) return `-webkit-${cursor}`;\n}\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT} from '../constants';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_border_gradient'\n\nfunction BorderGradient({direction, width, height, _uid}) {\n\n  let transform;\n\n  switch (direction) {\n    case POSITION_TOP:\n      transform = `translate(${width}, 0) rotate(90)`;\n      break;\n\n    case POSITION_RIGHT:\n      transform = `translate(${width}, ${height}) rotate(180)`;\n      break;\n\n    case POSITION_BOTTOM:\n      transform = `translate(0, ${height}) rotate(270)`;\n      break;\n\n    case POSITION_LEFT:\n      transform = \" \";\n      break;\n  }\n\n  let gradientID = `${prefixID}_gradient_${_uid}`\n  let maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <linearGradient id={gradientID} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" spreadMethod=\"pad\">\n          <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.8\"/>\n          <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0.5\"/>\n        </linearGradient>\n\n        <mask id={maskID} x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}>\n          <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n                style={{stroke: \"none\", fill: `url(#${gradientID})`}}/>\n        </mask>\n      </defs>\n\n      <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n            style={{stroke: \"none\", fill: \"#000\", mask: `url(#${maskID})`}} transform={transform}/>\n    </g>\n  );\n}\n\nBorderGradient.propTypes = {\n  direction: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]).isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n\nexport default RandomUID(BorderGradient)\n","//https://facebook.github.io/react/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging\nexport default function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport calculateBox from '../utils/calculateBox';\n\nexport default function Selection({startX, startY, endX, endY}) {\n  if (!startX || !startY || !endX || !endY) return null;\n\n  let box = calculateBox({x: startX, y: startY}, {x: endX, y: endY});\n\n  return (<rect\n    stroke=\"#969FFF\"\n    strokeOpacity={0.7}\n    fill=\"#F3F4FF\"\n    fillOpacity={0.7}\n    x={box.x}\n    y={box.y}\n    width={box.width}\n    height={box.height}\n    style={{pointerEvents: \"none\"}}/>);\n}\n\nSelection.propTypes = {\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  endX: PropTypes.number,\n  endY: PropTypes.number\n};\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconCursor() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://materialdesignicons.com/icon/cursor-move\n\nexport default function IconPan() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_in\n\nexport default function IconZoomIn() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g>\n        <path\n          d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_out\n\nexport default function IconZoomOut() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\n    </svg>\n  )\n}\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconFit() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  POSITION_TOP, POSITION_BOTTOM\n} from '../constants';\n\nexport default class ToolbarButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  change(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.type) {\n      case 'mouseenter':\n      case 'touchstart':\n        this.setState({hover: true});\n        break;\n      case 'mouseleave':\n      case 'touchend':\n      case 'touchcancel':\n        this.setState({hover: false});\n        break;\n    }\n  }\n\n  render() {\n    let style = {\n      display: \"block\",\n      width: \"24px\",\n      height: \"24px\",\n      margin: [POSITION_TOP, POSITION_BOTTOM].indexOf(this.props.toolbarPosition) >= 0 ? \"2px 1px\" : \"1px 2px\",\n      color: this.props.active || this.state.hover ? '#1CA6FC' : '#FFF',\n      transition: \"color 200ms ease\",\n      background: \"none\",\n      padding: \"0px\",\n      border: \"0px\",\n      outline: \"0px\",\n      cursor: \"pointer\"\n    };\n\n    return (\n      <button\n        onMouseEnter={e => this.change(e)}\n        onMouseLeave={e => this.change(e)}\n\n        onTouchStart={e => {\n          this.change(e);\n          this.props.onClick(e);\n        }}\n        onTouchEnd={e => this.change(e)}\n        onTouchCancel={e => this.change(e)}\n\n        onClick={this.props.onClick}\n\n        style={style}\n        title={this.props.title}\n        name={this.props.name}\n        role=\"button\"\n        type=\"button\"\n      >{this.props.children}</button>\n    )\n  }\n\n}\n\nToolbarButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  toolbarPosition: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool.isRequired\n};\n","//http://stackoverflow.com/a/4819886/1398836\n\nexport default function isTouchDevice() {\n  return 'ontouchstart' in window        // works on most browsers\n    || navigator.maxTouchPoints;       // works on IE10/11 and Surface\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {openMiniature, closeMiniature} from '../features/miniature';\nimport IconArrow from './icon-arrow';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\nexport default function MiniatureToggleButton({value, onChangeValue, position}) {\n  let style = {\n    width: \"24px\",\n    height: \"24px\",\n    display: \"block\",\n    position: \"absolute\",\n    bottom: 0,\n    [position === POSITION_LEFT ? 'left' : 'right']: '0px',\n    background: \"rgba(19, 20, 22, 0.901961)\",\n    border: 0,\n    padding: 0,\n    outline: 0,\n    color: \"#fff\"\n  };\n\n  let action = value.miniatureOpen ? closeMiniature : openMiniature;\n\n  return (\n    <button role=\"button\" type=\"button\" style={style} onClick={event => onChangeValue(action(value))}>\n      <IconArrow open={value.miniatureOpen} position={position}/>\n    </button>\n  )\n\n}\n\nMiniatureToggleButton.propTypes = {\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\n//credits https://materialdesignicons.com/icon/chevron-up\n\nexport default function IconArrow({open, position}) {\n\n  let transform = 0;\n\n  switch (position){\n    case POSITION_LEFT:\n      transform = open ? \"rotate(225, 12, 13)\" : \"rotate(45, 12, 13)\";\n      break;\n\n    case POSITION_RIGHT:\n      transform = transform = open ? \"rotate(135, 12, 13)\" : \"rotate(-45, 12, 13)\";\n  }\n\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g transform={transform}>\n        <path fill=\"#000000\" d=\"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z\"/>\n      </g>\n    </svg>\n  );\n}\n\nIconArrow.propTypes = {\n  open: PropTypes.bool.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_miniature'\n\nfunction MiniatureMask({SVGWidth, SVGHeight, x1, y1, x2, y2, zoomToFit, _uid}) {\n  let maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <mask id={maskID}>\n          <rect x=\"0\" y=\"0\" width={SVGWidth} height={SVGHeight} fill=\"#ffffff\"/>\n          <rect x={x1} y={y1} width={x2 - x1} height={y2 - y1}/>\n        </mask>\n      </defs>\n\n      <rect\n        x=\"0\"\n        y=\"0\"\n        width={SVGWidth}\n        height={SVGHeight}\n        style={{\n          stroke: \"none\",\n          fill: \"#000\",\n          mask: `url(#${maskID})`,\n          opacity: 0.4\n        }}\n      />\n    </g>)\n}\n\nMiniatureMask.propTypes = {\n  SVGWidth: PropTypes.number.isRequired,\n  SVGHeight: PropTypes.number.isRequired,\n  x1: PropTypes.number.isRequired,\n  y1: PropTypes.number.isRequired,\n  x2: PropTypes.number.isRequired,\n  y2: PropTypes.number.isRequired,\n  zoomToFit: PropTypes.number.isRequired,\n}\n\nexport default RandomUID(MiniatureMask)\n","import React from \"react\";\nimport ReactSVGPanZoom from './viewer'\nimport PropTypes from \"prop-types\";\nimport {TOOL_NONE} from \"./constants\";\n\nexport default class UncontrolledReactSVGPanZoom extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: props.defaultValue || {},\n      tool: props.defaultTool || TOOL_NONE,\n    }\n\n    this.Viewer = null;\n    this.changeTool = this.changeTool.bind(this)\n    this.changeValue = this.changeValue.bind(this)\n  }\n\n  changeTool(tool) {\n    this.setState({tool})\n  }\n\n  changeValue(value) {\n    this.setState({value})\n  }\n\n  pan(SVGDeltaX, SVGDeltaY) {\n    this.Viewer.pan(SVGDeltaX, SVGDeltaY)\n  }\n\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\n    this.Viewer.zoom(SVGPointX, SVGPointY, scaleFactor)\n  }\n\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n    this.Viewer.fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight)\n  }\n\n  fitToViewer(SVGAlignX, SVGAlignY) {\n    this.Viewer.fitToViewer(SVGAlignX, SVGAlignY)\n  }\n\n  zoomOnViewerCenter(scaleFactor) {\n    this.Viewer.zoomOnViewerCenter(scaleFactor)\n  }\n\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n    this.Viewer.setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel)\n  }\n\n  reset() {\n    this.Viewer.reset()\n  }\n\n  openMiniature() {\n    this.Viewer.openMiniature()\n  }\n\n  closeMiniature() {\n    this.Viewer.closeMiniature()\n  }\n\n  render() {\n    const {width, height, onChangeTool, onChangeValue, ...props} = this.props\n    const {tool, value} = this.state\n\n    return (\n      <ReactSVGPanZoom\n        width={width} height={height}\n        tool={tool} onChangeTool={this.changeTool}\n        value={value} onChangeValue={this.changeValue}\n        ref={Viewer => this.Viewer = Viewer}\n        {...props}\n      />\n    )\n  }\n}\n\nUncontrolledReactSVGPanZoom.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n\n  defaultValue: PropTypes.object,\n  defaultTool: PropTypes.string,\n}\n"],"sourceRoot":""}